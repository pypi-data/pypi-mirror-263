"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6788],{6495:(t,e,s)=>{s.r(e),s.d(e,{default:()=>bt});var n=s(6252),i=s(3577);const a={class:"card"},r={class:"card-body"},o=(0,n._)("h1",null,"Sprint Information",-1),l=(0,n._)("div",{class:"spacer"},null,-1),d=["href"],c=(0,n._)("hr",null,null,-1),p={class:"row"},u=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Sprint Information")],-1),h={class:"col-md-8"},_=(0,n._)("strong",null,"Sprint Name: ",-1),b=(0,n._)("strong",null,"Sprint Status: ",-1),m=(0,n._)("strong",null,"Sprint Start Date: ",-1),g={key:0},y=(0,n._)("strong",null,"Sprint End Date: ",-1),S=(0,n._)("strong",null,"Sprint Total Story Points: ",-1),f=(0,n._)("strong",null,"Sprint Completed Story Points: ",-1),j=(0,n._)("hr",null,null,-1),w={class:"table table-striped"},k=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,"Object"),(0,n._)("td",null,"Description"),(0,n._)("td",null,"Status")])],-1),D=["href"],v=["href"],$=["href"],O=(0,n._)("hr",null,null,-1),R={class:"row submit-row"},U={class:"col-md-12"};var I=s(624);const M={class:"modal fade",id:"confirmSprintDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmSprintDelete","aria-hidden":"true"},C={class:"modal-dialog"},q={class:"modal-content"},x=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"confirmSprintDelete"}," Please confirm Sprint Deletion "),(0,n.kq)(" TASK INFORMATION "),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmSprintDeleteButton"})],-1),L=(0,n._)("div",{class:"modal-body"}," Are you sure you want to delete the sprint? ",-1),T={class:"modal-footer"};var E=s(989);const A={name:"confirmSprintDelete",props:{parentObjectLocationId:{type:Number,default:0},parentObjectDestination:{type:String,default:""}},computed:{...(0,E.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteSprint(){this.$store.dispatch("newToast",{header:"Deleting Sprint",message:"Please wait, whilst we delete the sprint",extra_classes:"bg-warning",delay:0,unique_type:"delete_sprint"}),this.axios.post(`${this.rootUrl}sprint_information/${this.locationId}/delete/`).then((()=>{window.location=`${this.rootUrl}${this.parentObjectDestination}_information/${this.parentObjectLocationId}/`})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Deleting Sprint",message:`Sorry, could not delete the sprint. Error -> ${t}`,extra_classes:"bg-warning",delay:0,unique_type:"delete_sprint"})}))},closeModal(){document.getElementById("confirmSprintDeleteButton").click()}}};var W=s(3744);const P=(0,W.Z)(A,[["render",function(t,e,s,i,a,r){return(0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("div",C,[(0,n._)("div",q,[x,L,(0,n._)("div",T,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=(...t)=>r.closeModal&&r.closeModal(...t))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>r.deleteSprint&&r.deleteSprint(...t))}," Yes ")])])])])}]]);var z=s(9963);const N={class:"modal fade",id:"addObjectWizardModal",tabindex:"-1","aria-labelledby":"addObjectWizardLabel","aria-hidden":"true"},B={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Z={class:"modal-content"},K=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"addObjectWizardLabel"}," Add Objects to Sprint Wizard "),(0,n._)("button",{id:"addObjectWizardButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Y={class:"modal-body"},F={class:"row"},H=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Object Selector"),(0,n._)("p",{class:"text-instructions"}," Please select which object you would like to link to this task. ")],-1),G={class:"col-md-8"},J=(0,n._)("hr",null,null,-1),V={class:"row"},Q=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Select Links"),(0,n._)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this sprint. ")],-1),X={class:"col-md-8"},tt={key:0,class:"alert alert-info"},et={key:1,class:"alert alert-warning"},st={key:2,class:"table"},nt=(0,n._)("td",null,"Status",-1),it={class:"form-check"},at=["value","id"],rt=["for"],ot=(0,n._)("div",{class:"spacer"},null,-1),lt={class:"small-text"},dt={class:"modal-footer"},ct=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),pt={name:"AddObjectWizard",components:{NSelect:s(2001).Z},data:()=>({linkModel:[],objectModel:"",objectOptions:[{value:"project",label:"Project"},{value:"requirement_item",label:"Requirement Item"},{value:"task",label:"Task"}],searchResults:[],searchStatus:""}),watch:{objectModel(t){this.linkModel=[],this.getObjectList(t)}},computed:{...(0,E.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{addObjects(){this.$store.dispatch("newToast",{header:"Adding objects to Sprint",message:"Currently adding object to sprint. Please wait",extra_classes:"bg-warning",delay:0,unique_type:"add_objects_to_sprint"});const t=new FormData;this.linkModel.forEach((e=>{t.append(`${this.objectModel.toLowerCase()}`,e)})),this.axios.post(`${this.rootUrl}object_data/sprint/${this.locationId}/add_object_to_sprint/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Added Objects to Sprint",message:"Objects successfully added to Sprint",extra_classes:"bg-success",unique_type:"add_objects_to_sprint"}),window.location.reload()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Adding Objects to Sprint",message:`Sorry - we came across an issue adding objects to the sprint. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"add_objects_to_sprint"})}))},getObjectList(t){this.searchStatus="currently_searching",this.axios.post(`${this.rootUrl}object_data/sprint/${this.locationId}/${t}/potential_object_list/`).then((t=>{this.searchResults=t.data,this.searchStatus="search_completed"})).catch((t=>{this.$store.dispatch("newToast",{header:"Error getting potential object list",message:`Sorry, we could not get a list of potential objects. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))}}},ut=(0,W.Z)(pt,[["render",function(t,e,s,a,r,o){const l=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",N,[(0,n._)("div",B,[(0,n._)("div",Z,[K,(0,n._)("div",Y,[(0,n.kq)(" OBJECT SELECTOR"),(0,n._)("div",F,[H,(0,n._)("div",G,[(0,n.Wm)(l,{filterable:"",placeholder:"Please select an object",value:r.objectModel,"onUpdate:value":e[0]||(e[0]=t=>r.objectModel=t),options:r.objectOptions,disabled:"currently_searching"===r.searchStatus},null,8,["value","options","disabled"])])]),J,(0,n._)("div",V,[Q,(0,n._)("div",X,[""===r.objectModel?((0,n.wg)(),(0,n.iD)("div",tt," Please select an object. ")):(0,n.kq)("v-if",!0),"currently_searching"===r.searchStatus?((0,n.wg)(),(0,n.iD)("div",et," Currently searching for potential objects... ")):(0,n.kq)("v-if",!0),r.searchResults.length>0&&null!=r.objectModel?((0,n.wg)(),(0,n.iD)("table",st,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("td",null,(0,i.toDisplayString)(r.objectModel)+" Description",1),nt])]),(0,n.kq)(" RENDER RESULTS "),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.searchResults,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",null,[(0,n._)("div",it,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",value:t.id,id:`checkbox_${r.objectModel.toLowerCase()}_${t.pk}`,"onUpdate:modelValue":e[1]||(e[1]=t=>r.linkModel=t)},null,8,at),[[z.vModelCheckbox,r.linkModel]]),(0,n._)("label",{class:"form-check-label",for:`checkbox_${r.objectModel.toLowerCase()}_${t.pk}`},(0,i.toDisplayString)(t.description),9,rt)]),ot,(0,n._)("p",lt,(0,i.toDisplayString)(r.objectModel)+" "+(0,i.toDisplayString)(t.id),1)]),(0,n._)("td",null,(0,i.toDisplayString)(t.status),1)])))),128))])])):(0,n.kq)("v-if",!0)])])]),(0,n._)("div",dt,[ct,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>o.addObjects&&o.addObjects(...t))}," Add Objects ")])])])])}]]);var ht=s(3138);const _t={name:"SprintInformation",components:{AddObjectWizard:ut,ConfirmSprintDelete:P},props:{rootUrl:{type:String,default:"/"},sprintResults:{type:Array,default:()=>[]},theme:{type:String,default:""},userLevel:{type:Number,default:1},requirementItemResults:{type:Array,default:()=>[]},projectResults:{type:Array,default:()=>[]},taskResults:{type:Array,default:()=>[]}},mixins:[I.Z],data:()=>({parentObjectDestination:"",parentObjectLocationId:0}),methods:{confirmDeleteSprint(){new ht.u_(document.getElementById("confirmSprintDeleteModal")).show()},finishSprint(){this.axios.post(`${this.rootUrl}sprint_information/${this.sprintResults[0].sprint_id}/finish_sprint/`).then((()=>{window.location.reload()})).catch((t=>{this.$store.dispatch("newToast",{header:"Can not start sprint",message:`Sorry, there was an error starting the sprint. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))},getParentUrl(){return`${this.rootUrl}${this.parentObjectDestination}_information/${this.parentObjectLocationId}`},showAddObjectWizard(){new ht.u_(document.getElementById("addObjectWizardModal")).show()},startSprint(){this.axios.post(`${this.rootUrl}sprint_information/${this.sprintResults[0].sprint_id}/start_sprint/`).then((()=>{window.location.reload()})).catch((t=>{this.$store.dispatch("newToast",{header:"Can not start sprint",message:`Sorry, there was an error starting the sprint. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateDestination",destination:"sprint",locationId:this.sprintResults[0].sprint_id}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel});const t=this.sprintResults[0].project,e=this.sprintResults[0].requirement;null!=t&&""!==t?(this.parentObjectDestination="project",this.parentObjectLocationId=t):null!=e&&""!==e?(this.parentObjectDestination="requirement",this.parentObjectLocationId=e):this.$store.dispatch("newToast",{header:"Error Getting Sprint's Parent",message:"We have come across an issue, where the current sprint does not contain a parent!",extra_classes:"bg-danger",delay:0})}},bt=(0,W.Z)(_t,[["render",function(t,e,s,I,M,C){const q=(0,n.up)("confirm-sprint-delete"),x=(0,n.up)("add-object-wizard"),L=(0,n.up)("n-config-provider");return(0,n.wg)(),(0,n.j4)(L,{theme:t.getTheme(s.theme)},{default:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n._)("div",r,[o,l,(0,n._)("a",{href:C.getParentUrl()}," Go to Parent Object ",8,d),c,(0,n._)("div",p,[u,(0,n._)("div",h,[(0,n._)("p",null,[_,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].sprint_name),1)]),(0,n._)("p",null,[b,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].sprint_status),1)]),(0,n._)("p",null,[m,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].sprint_start_date),1)]),"Finish"===s.sprintResults[0].sprint_status?((0,n.wg)(),(0,n.iD)("p",g,[y,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].sprint_end_date),1)])):(0,n.kq)("v-if",!0),(0,n._)("p",null,[S,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].total_story_points),1)]),(0,n._)("p",null,[f,(0,n.Uk)(" "+(0,i.toDisplayString)(s.sprintResults[0].completed_story_points),1)])])]),j,(0,n._)("table",w,[k,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.requirementItemResults,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.pk},[(0,n._)("td",null,[(0,n._)("a",{href:`${this.rootUrl}requirement_information/${t.pk}/`}," Req"+(0,i.toDisplayString)(t.pk),9,D)]),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.requirement_item_title),1),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.requirement_item_status),1)])))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.projectResults,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.pk},[(0,n._)("td",null,[(0,n._)("a",{href:`${this.rootUrl}project_information/${t.pk}/`}," Pro"+(0,i.toDisplayString)(t.pk),9,v)]),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.project_name),1),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.project_status),1)])))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.taskResults,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.pk},[(0,n._)("td",null,[(0,n._)("a",{href:`${this.rootUrl}task_information/${t.pk}/`}," Task"+(0,i.toDisplayString)(t.pk),9,$)]),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.task_short_description),1),(0,n._)("td",null,(0,i.toDisplayString)(t.fields.task_status),1)])))),128))])]),O,(0,n._)("div",R,[(0,n._)("div",U,[(0,n._)("button",{onClick:e[0]||(e[0]=(...t)=>C.showAddObjectWizard&&C.showAddObjectWizard(...t)),class:"btn btn-success"}," Add Object Wizard "),(0,n._)("button",{onClick:e[1]||(e[1]=(...t)=>C.confirmDeleteSprint&&C.confirmDeleteSprint(...t)),class:"btn btn-danger"}," Delete "),"Draft"===s.sprintResults[0].sprint_status?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-success save-changes",onClick:e[2]||(e[2]=(...t)=>C.startSprint&&C.startSprint(...t))}," Start Sprint ")):(0,n.kq)("v-if",!0),"Current"===s.sprintResults[0].sprint_status?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn-warning save-changes",onClick:e[3]||(e[3]=(...t)=>C.finishSprint&&C.finishSprint(...t))}," Finish Sprint ")):(0,n.kq)("v-if",!0)])])])]),(0,n.Wm)(q,{"parent-object-destination":M.parentObjectDestination,"parent-object-location-id":M.parentObjectLocationId},null,8,["parent-object-destination","parent-object-location-id"]),(0,n.Wm)(x)])),_:1},8,["theme"])}]])},624:(t,e,s)=>{s.d(e,{Z:()=>i});var n=s(7449);const i={data:()=>({darkTheme:n.$}),methods:{getTheme:t=>"dark"===t?n.$:null}}}}]);