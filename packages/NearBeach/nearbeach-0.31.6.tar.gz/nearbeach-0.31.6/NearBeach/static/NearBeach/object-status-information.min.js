"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6792],{3321:(t,e,s)=>{s.r(e),s.d(e,{default:()=>dt});var a=s(641),o=s(33);const r={class:"card"},i={class:"card-body"},l=(0,a.Lk)("hr",null,null,-1),d={class:"row"},n=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Editing Status"),(0,a.Lk)("p",{class:"text-instructions"}," Move the status' around to reorder them. Double click to edit text and settings. ")],-1),u={class:"col-md-8"},c=(0,a.Lk)("strong",null,"Status List",-1),h={key:0,class:"error"},p=(0,a.Lk)("br",null,null,-1),g=["data-id"],S=["data-id"],m=["onClick"],b=(0,a.Lk)("div",{class:"spacer"},null,-1);var x=s(2321),v=s(432),C=s.n(v),L=s(9336),w=s(2243);const y={class:"modal fade",id:"confirmStatusDeleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},f={class:"modal-dialog"},k={class:"modal-content"},_=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title"},"Confirm Deletion"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmStatusDeleteModalClose"})],-1),A={class:"modal-body"},M=(0,a.Lk)("div",{class:"alert alert-warning"},[(0,a.Lk)("h4",null,"WARNING"),(0,a.Lk)("p",null," This process can not be reversed. Deleting a status will remove it completely. "),(0,a.Lk)("p",null," All objects connected with this status will have to migrate to a new status. This is also permanent and can not be reversed. ")],-1),I={class:"row"},D=(0,a.Lk)("strong",null,"Status: ",-1),$=(0,a.Lk)("strong",null,"Higher Order Status: ",-1),O=(0,a.Lk)("div",{class:"spacer"},null,-1),z={class:"row"},E=(0,a.Lk)("p",null,"Please select an appropriate status to migrate too.",-1),j=(0,a.Lk)("label",null,[(0,a.Lk)("strong",null,"New Status for the objects")],-1),T=(0,a.Lk)("br",null,null,-1),H={class:"modal-footer"},F=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),P=["disabled"];var U=s(1080),N=s(2124);const W={name:"ObjectStatusConfirmDelete",components:{NSelect:U.A},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},data:()=>({migrationStatusIdModel:"",newStatusList:[]}),watch:{statusId(){this.migrationStatusIdModel="",this.newStatusList=this.statusList.filter((t=>parseInt(t.status_id)!==parseInt(this.statusId))).map((t=>({label:t.status,value:t.status_id})))}},computed:{...(0,N.L8)({destination:"getDestination",rootUrl:"getRootUrl"})},methods:{deleteStatus(){this.$store.dispatch("newToast",{header:"Removing Status",message:"Please wait whilst we remove the status",extra_classes:"bg-warning",delay:0,unique_type:"remove_status"});const t=new FormData;t.set("status_id",`${this.statusId}`),t.set("migration_status_id",this.migrationStatusIdModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/delete/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Status Successfully Removed",message:"Status has been removed",extra_classes:"bg-success",unique_type:"remove_status"}),this.$emit("delete_status"),document.getElementById("confirmStatusDeleteModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Removing Status",message:`Sorry, we could not remove the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"remove_status"})}))}}};var R=s(6262);const X=(0,R.A)(W,[["render",function(t,e,s,r,i,l){const d=(0,a.g2)("n-select");return(0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",f,[(0,a.Lk)("div",k,[_,(0,a.Lk)("div",A,[(0,a.Q3)(" WARNING "),M,(0,a.Lk)("div",I,[(0,a.Lk)("p",null,[D,(0,a.eW)((0,o.toDisplayString)(s.statusData.status),1)]),(0,a.Lk)("p",null,[$,(0,a.eW)((0,o.toDisplayString)(s.statusData.higherOrderStatus),1)])]),O,(0,a.Lk)("div",z,[E,j,(0,a.bF)(d,{options:i.newStatusList,value:i.migrationStatusIdModel,"onUpdate:value":e[0]||(e[0]=t=>i.migrationStatusIdModel=t),style:{"z-index":"9999"},class:"new-card-destination"},null,8,["options","value"])]),T]),(0,a.Lk)("div",H,[F,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.deleteStatus&&l.deleteStatus(...t)),disabled:null===this.migrationStatusIdModel||""===this.migrationStatusIdModel}," Delete Status ",8,P)])])])])}]]);var q=s(3751);const B={class:"modal fade",id:"objectStatusModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-keyboard":"false"},Q={class:"modal-dialog"},V={class:"modal-content"},G=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"}," Add/Edit Status "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"objectStatusModalClose"})],-1),K={class:"modal-body"},J={class:"form-group"},Y={key:0,class:"error"},Z=(0,a.Lk)("div",{class:"spacer"},null,-1),tt={class:"form-group"},et=(0,a.Lk)("label",null,"Higher Order Status",-1),st={class:"modal-footer"},at=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ot=["disabled"],rt={name:"ObjectStatusModal",components:{NSelect:U.A},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},computed:{...(0,N.L8)({destination:"getDestination",rootUrl:"getRootUrl"})},data:()=>({higherOrderStatusList:[{label:"Backlog",value:"Backlog"},{label:"Blocked",value:"Blocked"},{label:"Normal",value:"Normal"},{label:"Closed",value:"Closed"}],higherOrderStatusModel:"Normal",isDuplicate:!1,localStatusModel:""}),watch:{statusId(){this.higherOrderStatusModel=this.statusData.higherOrderStatus,this.localStatusModel=this.statusData.status},localStatusModel(){const t=this.statusList.filter((t=>t.status.toLowerCase()===this.localStatusModel.toLowerCase())).length;this.isDuplicate=t>0}},methods:{editStatus(){this.$store.dispatch("newToast",{header:"Updating Status",message:"Please wait whilst we update the status",extra_classes:"bg-warning",delay:0,unique_type:"update_status"});const t=new FormData;t.set("status_id",this.statusId.toString()),t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/update/`,t).then((t=>{this.$emit("update_status",{statusId:this.statusId,status:this.localStatusModel,higherOrderStatus:this.higherOrderStatusModel}),this.$store.dispatch("newToast",{header:"Successfully updated status",message:"Status has been updated",extra_classes:"bg-success",unique_type:"update_status"}),document.getElementById("objectStatusModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error updating status",message:`Sorry, but we could not update your status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"update_status"})}))},newStatus(){this.$store.dispatch("newToast",{header:"Creating New Status",message:"Please wait whilst we create new status",extra_classes:"bg-warning",delay:0,unique_type:"create_status"});const t=new FormData;t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/create/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Created New Status",message:"New Status has been created successfully",extra_classes:"bg-success",unique_type:"create_status"}),this.$emit("add_status",t.data),document.getElementById("objectStatusModalClose").click(),this.localStatusModel="",this.higherOrderStatusModel="Normal"})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Creating New Status",message:`Sorry, we could not create the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"create_status"})}))},saveChanges(){0===parseInt(this.statusId)?this.newStatus():this.editStatus()}}},it=(0,R.A)(rt,[["render",function(t,e,s,o,r,i){const l=(0,a.g2)("n-select");return(0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",Q,[(0,a.Lk)("div",V,[G,(0,a.Lk)("div",K,[(0,a.Lk)("div",J,[(0,a.Lk)("label",null,[(0,a.eW)(" Status "),r.isDuplicate?((0,a.uX)(),(0,a.CE)("span",Y," Sorry, there is a status of that name already ")):(0,a.Q3)("v-if",!0)]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.localStatusModel=t),type:"text",class:"form-control"},null,512),[[q.vModelText,r.localStatusModel]])]),Z,(0,a.Lk)("div",tt,[et,(0,a.bF)(l,{value:r.higherOrderStatusModel,"onUpdate:value":e[1]||(e[1]=t=>r.higherOrderStatusModel=t),options:r.higherOrderStatusList},null,8,["value","options"])])]),(0,a.Lk)("div",st,[at,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:r.isDuplicate,onClick:e[2]||(e[2]=(...t)=>i.saveChanges&&i.saveChanges(...t))}," Save changes ",8,ot)])])])])}]]),lt={name:"ObjectStatusInformation",props:{destination:{type:String,default:""},objectStatusResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},mixins:[w.A],components:{draggable:C(),Icon:x.In,ObjectStatusConfirmDelete:X,ObjectStatusModal:it},data(){return{localStatusList:this.objectStatusResults,statusData:{higherOrderStatus:"Closed",status:""},statusId:0}},methods:{addStatus(t){this.localStatusList.push(t[0])},delete_status(){this.localStatusList=this.localStatusList.filter((t=>t.status_id!==this.statusId))},editStatus(t){const e=parseInt(t.target.dataset.id);this.updateProps(e),new L.aF(document.getElementById("objectStatusModal")).show()},newStatus(){this.statusData={higherOrderStatus:"Normal",status:""},this.statusId=0,new L.aF(document.getElementById("objectStatusModal")).show()},removeStatus(t){this.updateProps(t),new L.aF(document.getElementById("confirmStatusDeleteModal")).show()},updateProps(t){const e=this.localStatusList.filter((e=>parseInt(e.status_id)===t));0!==e.length&&(this.statusData={higherOrderStatus:e[0].higher_order_status,status:e[0].status},this.statusId=t)},updateSortOrder(){this.$store.dispatch("newToast",{header:"Updating Sort Order",message:"Please wait, as we update the sort order",extra_classes:"bg-warning",delay:0,unique_type:"sort_order"});const t=new FormData;this.localStatusList.forEach((e=>{t.append("status_id",e.status_id)})),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/reorder/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Updated Sort Order",message:"Sort Order has been updated",extra_classes:"bg-success",unique_type:"sort_order"})})).catch((t=>{this.$store.dispatch("newToast",{header:"Failed Updating Sort Order",message:`We've encounted an issue updating the sort order: Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"sort_order"})}))},updateStatus(t){const e=parseInt(t.statusId);if(void 0===e)return void this.$store.dispatch("newToast",{header:"Error updating card",message:"Please reload the page. We have experienced an in page issue",extra_classes:"bg-danger",delay:0});const s=this.localStatusList.findIndex((t=>t.status_id===e));this.localStatusList[s].higher_order_status=t.higherOrderStatus,this.localStatusList[s].status=t.status}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination})}},dt=(0,R.A)(lt,[["render",function(t,e,s,x,v,C){const L=(0,a.g2)("Icon"),w=(0,a.g2)("draggable"),y=(0,a.g2)("object-status-modal"),f=(0,a.g2)("object-status-confirm-delete");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("h1",null,(0,o.toDisplayString)(s.destination)+" Status Editor",1),l,(0,a.Lk)("div",d,[n,(0,a.Lk)("div",u,[c,0===v.localStatusList.length?((0,a.uX)(),(0,a.CE)("span",h," Please create at least one status ")):(0,a.Q3)("v-if",!0),p,(0,a.bF)(w,{modelValue:v.localStatusList,"onUpdate:modelValue":e[1]||(e[1]=t=>v.localStatusList=t),"item-key":"status_id","ghost-class":"ghost",onChange:C.updateSortOrder},{item:(0,a.k6)((({element:s})=>[((0,a.uX)(),(0,a.CE)("div",{class:"sortable",key:s.status_id,"data-id":s.status_id,onDblclick:e[0]||(e[0]=t=>C.editStatus(t))},[((0,a.uX)(),(0,a.CE)("strong",{key:s.status_id,"data-id":s.status_id},(0,o.toDisplayString)(s.status),9,S)),v.localStatusList.length>1?((0,a.uX)(),(0,a.CE)("span",{key:0,onClick:t=>C.removeStatus(s.status_id)},[(0,a.bF)(L,{icon:t.icons.xCircle},null,8,["icon"])],8,m)):(0,a.Q3)("v-if",!0)],40,g))])),_:1},8,["modelValue","onChange"]),b,(0,a.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>C.newStatus&&C.newStatus(...t)),class:"btn btn-primary"}," New Status ")])])])]),(0,a.bF)(y,{"status-data":v.statusData,"status-id":v.statusId,"status-list":v.localStatusList,onAdd_status:e[3]||(e[3]=t=>C.addStatus(t)),onUpdate_status:e[4]||(e[4]=t=>C.updateStatus(t))},null,8,["status-data","status-id","status-list"]),(0,a.bF)(f,{"status-data":v.statusData,"status-id":v.statusId,"status-list":v.localStatusList,onDelete_status:C.delete_status},null,8,["status-data","status-id","status-list","onDelete_status"])],64)}]])},2243:(t,e,s)=>{s.d(e,{A:()=>M});var a=s(8998),o=s(102),r=s(9394),i=s(2438),l=s(9605),d=s(3438),n=s(5666),u=s(6375),c=s(1647),h=s(7066),p=s(4397),g=s(4603),S=s(7432),m=s(1758),b=s(8959),x=s(9587),v=s(9675),C=s(386),L=s(6120),w=s(8086),y=s(5617),f=s(6325),k=s(6500),_=s(5707),A=s(1511);const M={data:()=>({icons:{arrowUp:a.A,bugIcon:o.A,bxBriefcase:r.A,cardChecklist:i.A,clipboardIcon:l.A,documentPdf:d.A,documentText:n.A,folderIcon:u.A,groupPresentation:c.A,imageIcon:h.A,infoCircle:p.A,linkIcon:g.A,linkIcon2:S.A,linkOut:m.A,mailIcon:b.A,microsoftExcel:x.A,microsoftPowerpoint:v.A,microsoftWord:C.A,noteAdd:L.A,objectStorage:w.A,passwordIcon:y.A,trashCan:f.A,userIcon:k.A,usersIcon:_.A,xCircle:A.A}})}},707:(t,e,s)=>{s.d(e,{A:()=>n,b:()=>d});var a=s(1841),o=s(5219),r=s(8880);const i={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};var l=s(9359);const d=t=>{const{borderRadius:e,popoverColor:s,textColor3:a,dividerColor:o,textColor2:r,primaryColorPressed:l,textColorDisabled:d,primaryColor:n,opacityDisabled:u,hoverColor:c,fontSizeSmall:h,fontSizeMedium:p,fontSizeLarge:g,fontSizeHuge:S,heightSmall:m,heightMedium:b,heightLarge:x,heightHuge:v}=t;return Object.assign(Object.assign({},i),{optionFontSizeSmall:h,optionFontSizeMedium:p,optionFontSizeLarge:g,optionFontSizeHuge:S,optionHeightSmall:m,optionHeightMedium:b,optionHeightLarge:x,optionHeightHuge:v,borderRadius:e,color:s,groupHeaderTextColor:a,actionDividerColor:o,optionTextColor:r,optionTextColorPressed:l,optionTextColorDisabled:d,optionTextColorActive:n,optionOpacityDisabled:u,optionCheckColor:n,optionColorPending:c,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:c,actionTextColor:r,loadingColor:n})},n=(0,l.a)({name:"InternalSelectMenu",common:r.A,peers:{Scrollbar:o.A,Empty:a.A},self:d})},2719:(t,e,s)=>{s.d(e,{A:()=>a});const a={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"}},5991:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(4484),o=s(8880),r=s(7765),i=s(2719);const l=(0,s(9359).a)({name:"InternalSelection",common:o.A,peers:{Popover:r.A},self:t=>{const{borderRadius:e,textColor2:s,textColorDisabled:o,inputColor:r,inputColorDisabled:l,primaryColor:d,primaryColorHover:n,warningColor:u,warningColorHover:c,errorColor:h,errorColorHover:p,borderColor:g,iconColor:S,iconColorDisabled:m,clearColor:b,clearColorHover:x,clearColorPressed:v,placeholderColor:C,placeholderColorDisabled:L,fontSizeTiny:w,fontSizeSmall:y,fontSizeMedium:f,fontSizeLarge:k,heightTiny:_,heightSmall:A,heightMedium:M,heightLarge:I}=t;return Object.assign(Object.assign({},i.A),{fontSizeTiny:w,fontSizeSmall:y,fontSizeMedium:f,fontSizeLarge:k,heightTiny:_,heightSmall:A,heightMedium:M,heightLarge:I,borderRadius:e,textColor:s,textColorDisabled:o,placeholderColor:C,placeholderColorDisabled:L,color:r,colorDisabled:l,colorActive:r,border:`1px solid ${g}`,borderHover:`1px solid ${n}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${n}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${(0,a.QX)(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${(0,a.QX)(d,{alpha:.2})}`,caretColor:d,arrowColor:S,arrowColorDisabled:m,loadingColor:d,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,borderActiveWarning:`1px solid ${u}`,borderFocusWarning:`1px solid ${c}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${(0,a.QX)(u,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${(0,a.QX)(u,{alpha:.2})}`,colorActiveWarning:r,caretColorWarning:u,borderError:`1px solid ${h}`,borderHoverError:`1px solid ${p}`,borderActiveError:`1px solid ${h}`,borderFocusError:`1px solid ${p}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${(0,a.QX)(h,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${(0,a.QX)(h,{alpha:.2})}`,colorActiveError:r,caretColorError:h,clearColor:b,clearColorHover:x,clearColorPressed:v})}})},1841:(t,e,s)=>{s.d(e,{A:()=>i,b:()=>r});const a={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};var o=s(8880);const r=t=>{const{textColorDisabled:e,iconColor:s,textColor2:o,fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d}=t;return Object.assign(Object.assign({},a),{fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d,textColor:e,iconColor:s,extraTextColor:o})},i={name:"Empty",common:o.A,self:r}},7765:(t,e,s)=>{s.d(e,{A:()=>i,b:()=>r});var a=s(8880);const o={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},r=t=>{const{boxShadow2:e,popoverColor:s,textColor2:a,borderRadius:r,fontSize:i,dividerColor:l}=t;return Object.assign(Object.assign({},o),{fontSize:i,borderRadius:r,color:s,dividerColor:l,textColor:a,boxShadow:e})},i={name:"Popover",common:a.A,self:r}},2414:(t,e,s)=>{s.d(e,{A:()=>l,b:()=>i});var a=s(5991),o=s(707),r=s(8880);function i(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const l=(0,s(9359).a)({name:"Select",common:r.A,peers:{InternalSelection:a.A,InternalSelectMenu:o.A},self:i})},9166:(t,e,s)=>{s.d(e,{A:()=>a});const a={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"}}}]);