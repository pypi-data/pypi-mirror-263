[LDRDataFindServer]

# framecache file
# Location of diskcache (lsync) file used to answer queries.
framecachefile = /var/lib/diskcache/ascii_cache.dat
# Re-parse the diskcache file for updates at this frequency (seconds)
framecachetimeout = 600

# grid-mapfile
# Location of file to check against for grid-mapfile authorization
gridmapcachefile = /etc/grid-security/grid-mapfile.datafind
# Re-parse the grid-mapfile for updates at this frequency (seconds)
gridmapcachetimeout = 600

# Exclude/include frametypes (e.g. H1_R, L1_HOFT_C00) or sites (e.g. H, L, V)
# from possible results when parsing the diskcache. Provide comma-separated
# lists of either exact strings or patterns to match for exclusion/inclusion.
# Included patterns will return only those frame types that match.
frametype_exclude_pattern = .+EXCLUDE.+
#frametype_include_pattern = .+_HOFT_\d+
#frametype_include_pattern = .+_TEST_\d+
#frametype_include_pattern = .+_TEST_\d+, .+_HOFT_\d+
site_exclude_pattern = ^X$

# Set to Python dictionary with URL types as keys and a list of regular
# expressions in descending order of preference.
filter_preference = """{'^file': ['preferred', 'hdfs']}"""

# Set SciTokens claims
# SciTokens Issuer
scitokens_issuer = https://cilogon.org/igwn, https://test.cilogon.org/igwn
# SciTokens Audience
scitokens_audience = ANY
# SciTokens Scope
scitokens_scope = "gwdatafind.read"

# authorization must be one of 'None' or 'virtual_host', or a combination
# of 'grid-mapfile' and/or 'scitoken' with comma seperation.
# None does not authenticate users querying the server.
# grid-mapfile checks if the user's subject has an entry in a grid-mapfile
# scitoken uses a SciToken for authorisation.
# virtual_host allows for different authorization settings on different
# virtual hosts on the same machine. These are controlled in subsections
# below labeled by the IP address of each virtual host.
authorization = grid-mapfile

# Default setup: Create a virtual host for internal network with no
# authentication, and a public virtual host requiring authentication
[[INTERNAL_IP]] # Change to your internal IP
authorization = None

[[PUBLIC_IP]] # Change to your public IP
authorization = grid-mapfile

# OSDF configuration
[[osdf kagra]]
posix_prefix = /cvmfs/kagra.storage.igwn.org/igwn
osdf_base_path = /igwn

[[osdf ligo]]
posix_prefix = /cvmfs/ligo.storage.igwn.org/igwn
osdf_base_path = /igwn

[[osdf virgo]]
posix_prefix = /cvmfs/virgo.storage.igwn.org/igwn
osdf_base_path = /igwn

# legacy paths
[[osdf ligo-osgstorage]]
posix_prefix = /cvmfs/ligo.osgstorage.org/frames
osdf_base_path = /user/ligo/frames

[[osdf ligo-oasis]]
posix_prefix = /cvmfs/oasis.opensciencegrid.org/ligo/frames
osdf_base_path = /user/ligo/frames
