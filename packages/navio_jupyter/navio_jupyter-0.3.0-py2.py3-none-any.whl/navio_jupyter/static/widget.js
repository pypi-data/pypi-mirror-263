function Bt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Fr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ue(t){let e,r,n;t.length!==2?(e=Bt,r=(s,u)=>Bt(t(s),u),n=(s,u)=>t(s)-u):(e=t===Bt||t===Fr?t:Wa,r=t,n=t);function o(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let d=l+f>>>1;r(s[d],u)<0?l=d+1:f=d}while(l<f)}return l}function i(s,u,l=0,f=s.length){if(l<f){if(e(u,u)!==0)return f;do{let d=l+f>>>1;r(s[d],u)<=0?l=d+1:f=d}while(l<f)}return l}function a(s,u,l=0,f=s.length){let d=o(s,u,l,f-1);return d>l&&n(s[d-1],u)>-n(s[d],u)?d-1:d}return{left:o,center:a,right:i}}function Wa(){return 0}function Gr(t){return t===null?NaN:+t}var Yn=Ue(Bt),Zn=Yn.right,Xa=Yn.left,Ua=Ue(Gr).center,qr=Zn;function Et(t,e){let r,n;if(e===void 0)for(let o of t)o!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)));else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)))}return[r,n]}var ee=class extends Map{constructor(e,r=Qa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(let[n,o]of e)this.set(n,o)}get(e){return super.get(Wn(this,e))}has(e){return super.has(Wn(this,e))}set(e,r){return super.set(Ka(this,e),r)}delete(e){return super.delete(ja(this,e))}};function Wn({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):r}function Ka({_intern:t,_key:e},r){let n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function ja({_intern:t,_key:e},r){let n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Qa(t){return t!==null&&typeof t=="object"?t.valueOf():t}var Ja=Math.sqrt(50),ts=Math.sqrt(10),es=Math.sqrt(2);function Ke(t,e,r){let n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),i=n/Math.pow(10,o),a=i>=Ja?10:i>=ts?5:i>=es?2:1,s,u,l;return o<0?(l=Math.pow(10,-o)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,o)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=r&&r<2?Ke(t,e,r*2):[s,u,l]}function je(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];let n=e<t,[o,i,a]=n?Ke(e,t,r):Ke(t,e,r);if(!(i>=o))return[];let s=i-o+1,u=new Array(s);if(n)if(a<0)for(let l=0;l<s;++l)u[l]=(i-l)/-a;else for(let l=0;l<s;++l)u[l]=(i-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(o+l)/-a;else for(let l=0;l<s;++l)u[l]=(o+l)*a;return u}function ge(t,e,r){return e=+e,t=+t,r=+r,Ke(t,e,r)[2]}function Vr(t,e,r){e=+e,t=+t,r=+r;let n=e<t,o=n?ge(e,t,r):ge(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Qe(t,e){let r;if(e===void 0)for(let n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of t)(o=e(o,++n,t))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function $t(t,e,r){t=+t,e=+e,r=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(o);++n<o;)i[n]=t+n*r;return i}var rs={value:()=>{}};function Un(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Je(r)}function Je(t){this._=t}function ns(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Je.prototype=Un.prototype={constructor:Je,on:function(t,e){var r=this._,n=ns(t+"",r),o,i=-1,a=n.length;if(arguments.length<2){for(;++i<a;)if((o=(t=n[i]).type)&&(o=os(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<a;)if(o=(t=n[i]).type)r[o]=Xn(r[o],t.name,e);else if(e==null)for(o in r)r[o]=Xn(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Je(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,i;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],n=0,o=i.length;n<o;++n)i[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};function os(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function Xn(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=rs,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var Lt=Un;var tr="http://www.w3.org/1999/xhtml",Hr={svg:"http://www.w3.org/2000/svg",xhtml:tr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _t(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Hr.hasOwnProperty(e)?{space:Hr[e],local:t}:t}function is(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===tr&&e.documentElement.namespaceURI===tr?e.createElement(t):e.createElementNS(r,t)}}function as(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function er(t){var e=_t(t);return(e.local?as:is)(e)}function ss(){}function Ft(t){return t==null?ss:function(){return this.querySelector(t)}}function Kn(t){typeof t!="function"&&(t=Ft(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,s=n[o]=new Array(a),u,l,f=0;f<a;++f)(u=i[f])&&(l=t.call(u,u.__data__,f,i))&&("__data__"in u&&(l.__data__=u.__data__),s[f]=l);return new H(n,this._parents)}function xe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function us(){return[]}function ye(t){return t==null?us:function(){return this.querySelectorAll(t)}}function ls(t){return function(){return xe(t.apply(this,arguments))}}function jn(t){typeof t=="function"?t=ls(t):t=ye(t);for(var e=this._groups,r=e.length,n=[],o=[],i=0;i<r;++i)for(var a=e[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&(n.push(t.call(u,u.__data__,l,a)),o.push(u));return new H(n,o)}function ve(t){return function(){return this.matches(t)}}function rr(t){return function(e){return e.matches(t)}}var fs=Array.prototype.find;function cs(t){return function(){return fs.call(this.children,t)}}function ps(){return this.firstElementChild}function Qn(t){return this.select(t==null?ps:cs(typeof t=="function"?t:rr(t)))}var ds=Array.prototype.filter;function hs(){return Array.from(this.children)}function ms(t){return function(){return ds.call(this.children,t)}}function Jn(t){return this.selectAll(t==null?hs:ms(typeof t=="function"?t:rr(t)))}function to(t){typeof t!="function"&&(t=ve(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,s=n[o]=[],u,l=0;l<a;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new H(n,this._parents)}function nr(t){return new Array(t.length)}function eo(){return new H(this._enter||this._groups.map(nr),this._parents)}function we(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}we.prototype={constructor:we,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ro(t){return function(){return t}}function gs(t,e,r,n,o,i){for(var a=0,s,u=e.length,l=i.length;a<l;++a)(s=e[a])?(s.__data__=i[a],n[a]=s):r[a]=new we(t,i[a]);for(;a<u;++a)(s=e[a])&&(o[a]=s)}function xs(t,e,r,n,o,i,a){var s,u,l=new Map,f=e.length,d=i.length,h=new Array(f),g;for(s=0;s<f;++s)(u=e[s])&&(h[s]=g=a.call(u,u.__data__,s,e)+"",l.has(g)?o[s]=u:l.set(g,u));for(s=0;s<d;++s)g=a.call(t,i[s],s,i)+"",(u=l.get(g))?(n[s]=u,u.__data__=i[s],l.delete(g)):r[s]=new we(t,i[s]);for(s=0;s<f;++s)(u=e[s])&&l.get(h[s])===u&&(o[s]=u)}function ys(t){return t.__data__}function no(t,e){if(!arguments.length)return Array.from(this,ys);var r=e?xs:gs,n=this._parents,o=this._groups;typeof t!="function"&&(t=ro(t));for(var i=o.length,a=new Array(i),s=new Array(i),u=new Array(i),l=0;l<i;++l){var f=n[l],d=o[l],h=d.length,g=vs(t.call(f,f&&f.__data__,l,n)),v=g.length,N=s[l]=new Array(v),w=a[l]=new Array(v),A=u[l]=new Array(h);r(f,d,N,w,A,g,e);for(var M=0,S=0,x,y;M<v;++M)if(x=N[M]){for(M>=S&&(S=M+1);!(y=w[S])&&++S<v;);x._next=y||null}}return a=new H(a,n),a._enter=s,a._exit=u,a}function vs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oo(){return new H(this._exit||this._groups.map(nr),this._parents)}function io(t,e,r){var n=this.enter(),o=this,i=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function ao(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,i=n.length,a=Math.min(o,i),s=new Array(o),u=0;u<a;++u)for(var l=r[u],f=n[u],d=l.length,h=s[u]=new Array(d),g,v=0;v<d;++v)(g=l[v]||f[v])&&(h[v]=g);for(;u<o;++u)s[u]=r[u];return new H(s,this._parents)}function so(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function uo(t){t||(t=ws);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],s=a.length,u=o[i]=new Array(s),l,f=0;f<s;++f)(l=a[f])&&(u[f]=l);u.sort(e)}return new H(o,this._parents).order()}function ws(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function fo(){return Array.from(this)}function co(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function po(){let t=0;for(let e of this)++t;return t}function ho(){return!this.node()}function mo(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],i=0,a=o.length,s;i<a;++i)(s=o[i])&&t.call(s,s.__data__,i,o);return this}function bs(t){return function(){this.removeAttribute(t)}}function _s(t){return function(){this.removeAttributeNS(t.space,t.local)}}function As(t,e){return function(){this.setAttribute(t,e)}}function Ss(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ms(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Is(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function go(t,e){var r=_t(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?_s:bs:typeof e=="function"?r.local?Is:Ms:r.local?Ss:As)(r,e))}function or(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ns(t){return function(){this.style.removeProperty(t)}}function Es(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Cs(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function xo(t,e,r){return arguments.length>1?this.each((e==null?Ns:typeof e=="function"?Cs:Es)(t,e,r??"")):Ct(this.node(),t)}function Ct(t,e){return t.style.getPropertyValue(e)||or(t).getComputedStyle(t,null).getPropertyValue(e)}function ks(t){return function(){delete this[t]}}function Ds(t,e){return function(){this[t]=e}}function Os(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function yo(t,e){return arguments.length>1?this.each((e==null?ks:typeof e=="function"?Os:Ds)(t,e)):this.node()[t]}function vo(t){return t.trim().split(/^|\s+/)}function Yr(t){return t.classList||new wo(t)}function wo(t){this._node=t,this._names=vo(t.getAttribute("class")||"")}wo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function bo(t,e){for(var r=Yr(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function _o(t,e){for(var r=Yr(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function Ts(t){return function(){bo(this,t)}}function Ps(t){return function(){_o(this,t)}}function Rs(t,e){return function(){(e.apply(this,arguments)?bo:_o)(this,t)}}function Ao(t,e){var r=vo(t+"");if(arguments.length<2){for(var n=Yr(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?Rs:e?Ts:Ps)(r,e))}function zs(){this.textContent=""}function Bs(t){return function(){this.textContent=t}}function $s(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function So(t){return arguments.length?this.each(t==null?zs:(typeof t=="function"?$s:Bs)(t)):this.node().textContent}function Ls(){this.innerHTML=""}function Fs(t){return function(){this.innerHTML=t}}function Gs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Mo(t){return arguments.length?this.each(t==null?Ls:(typeof t=="function"?Gs:Fs)(t)):this.node().innerHTML}function qs(){this.nextSibling&&this.parentNode.appendChild(this)}function Io(){return this.each(qs)}function Vs(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function No(){return this.each(Vs)}function Eo(t){var e=typeof t=="function"?t:er(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Hs(){return null}function Co(t,e){var r=typeof t=="function"?t:er(t),n=e==null?Hs:typeof e=="function"?e:Ft(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Ys(){var t=this.parentNode;t&&t.removeChild(this)}function ko(){return this.each(Ys)}function Zs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ws(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Do(t){return this.select(t?Ws:Zs)}function Oo(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xs(t){return function(e){t.call(this,e,this.__data__)}}function Us(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Ks(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,o=e.length,i;r<o;++r)i=e[r],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++n]=i;++n?e.length=n:delete this.__on}}}function js(t,e,r){return function(){var n=this.__on,o,i=Xs(e);if(n){for(var a=0,s=n.length;a<s;++a)if((o=n[a]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=e;return}}this.addEventListener(t.type,i,r),o={type:t.type,name:t.name,value:e,listener:i,options:r},n?n.push(o):this.__on=[o]}}function To(t,e,r){var n=Us(t+""),o,i=n.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,f;u<l;++u)for(o=0,f=s[u];o<i;++o)if((a=n[o]).type===f.type&&a.name===f.name)return f.value}return}for(s=e?js:Ks,o=0;o<i;++o)this.each(s(n[o],e,r));return this}function Po(t,e,r){var n=or(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Qs(t,e){return function(){return Po(this,t,e)}}function Js(t,e){return function(){return Po(this,t,e.apply(this,arguments))}}function Ro(t,e){return this.each((typeof e=="function"?Js:Qs)(t,e))}function*zo(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var be=[null];function H(t,e){this._groups=t,this._parents=e}function Bo(){return new H([[document.documentElement]],be)}function tu(){return this}H.prototype=Bo.prototype={constructor:H,select:Kn,selectAll:jn,selectChild:Qn,selectChildren:Jn,filter:to,data:no,enter:eo,exit:oo,join:io,merge:ao,selection:tu,order:so,sort:uo,call:lo,nodes:fo,node:co,size:po,empty:ho,each:mo,attr:go,style:xo,property:yo,classed:Ao,text:So,html:Mo,raise:Io,lower:No,append:Eo,insert:Co,remove:ko,clone:Do,datum:Oo,on:To,dispatch:Ro,[Symbol.iterator]:zo};var At=Bo;function G(t){return typeof t=="string"?new H([[document.querySelector(t)]],[document.documentElement]):new H([[t]],be)}function $o(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ft(t,e){if(t=$o(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}function Gt(t){return typeof t=="string"?new H([document.querySelectorAll(t)],[document.documentElement]):new H([xe(t)],be)}var Lo={passive:!1},qt={capture:!0,passive:!1};function ir(t){t.stopImmediatePropagation()}function kt(t){t.preventDefault(),t.stopImmediatePropagation()}function _e(t){var e=t.document.documentElement,r=G(t).on("dragstart.drag",kt,qt);"onselectstart"in e?r.on("selectstart.drag",kt,qt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ae(t,e){var r=t.document.documentElement,n=G(t).on("dragstart.drag",null);e&&(n.on("click.drag",kt,qt),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Se=t=>()=>t;function Me(t,{sourceEvent:e,subject:r,target:n,identifier:o,active:i,x:a,y:s,dx:u,dy:l,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:f}})}Me.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function eu(t){return!t.ctrlKey&&!t.button}function ru(){return this.parentNode}function nu(t,e){return e??{x:t.x,y:t.y}}function ou(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zr(){var t=eu,e=ru,r=nu,n=ou,o={},i=Lt("start","drag","end"),a=0,s,u,l,f,d=0;function h(x){x.on("mousedown.drag",g).filter(n).on("touchstart.drag",w).on("touchmove.drag",A,Lo).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(x,y){if(!(f||!t.call(this,x,y))){var T=S(this,e.call(this,x,y),x,y,"mouse");T&&(G(x.view).on("mousemove.drag",v,qt).on("mouseup.drag",N,qt),_e(x.view),ir(x),l=!1,s=x.clientX,u=x.clientY,T("start",x))}}function v(x){if(kt(x),!l){var y=x.clientX-s,T=x.clientY-u;l=y*y+T*T>d}o.mouse("drag",x)}function N(x){G(x.view).on("mousemove.drag mouseup.drag",null),Ae(x.view,l),kt(x),o.mouse("end",x)}function w(x,y){if(t.call(this,x,y)){var T=x.changedTouches,k=e.call(this,x,y),D=T.length,z,P;for(z=0;z<D;++z)(P=S(this,k,x,y,T[z].identifier,T[z]))&&(ir(x),P("start",x,T[z]))}}function A(x){var y=x.changedTouches,T=y.length,k,D;for(k=0;k<T;++k)(D=o[y[k].identifier])&&(kt(x),D("drag",x,y[k]))}function M(x){var y=x.changedTouches,T=y.length,k,D;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),k=0;k<T;++k)(D=o[y[k].identifier])&&(ir(x),D("end",x,y[k]))}function S(x,y,T,k,D,z){var P=i.copy(),E=ft(z||T,y),Y,R,$;if(($=r.call(x,new Me("beforestart",{sourceEvent:T,target:h,identifier:D,active:a,x:E[0],y:E[1],dx:0,dy:0,dispatch:P}),k))!=null)return Y=$.x-E[0]||0,R=$.y-E[1]||0,function et(V,F,K){var L=E,q;switch(V){case"start":o[D]=et,q=a++;break;case"end":delete o[D],--a;case"drag":E=ft(K||F,y),q=a;break}P.call(V,x,new Me(V,{sourceEvent:F,subject:$,target:h,identifier:D,active:q,x:E[0]+Y,y:E[1]+R,dx:E[0]-L[0],dy:E[1]-L[1],dispatch:P}),k)}}return h.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Se(!!x),h):t},h.container=function(x){return arguments.length?(e=typeof x=="function"?x:Se(x),h):e},h.subject=function(x){return arguments.length?(r=typeof x=="function"?x:Se(x),h):r},h.touchable=function(x){return arguments.length?(n=typeof x=="function"?x:Se(!!x),h):n},h.on=function(){var x=i.on.apply(i,arguments);return x===i?h:x},h.clickDistance=function(x){return arguments.length?(d=(x=+x)*x,h):Math.sqrt(d)},h}function ar(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Wr(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ee(){}var Ie=.7,lr=1/Ie,re="\\s*([+-]?\\d+)\\s*",Ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iu=/^#([0-9a-f]{3,8})$/,au=new RegExp(`^rgb\\(${re},${re},${re}\\)$`),su=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),uu=new RegExp(`^rgba\\(${re},${re},${re},${Ne}\\)$`),lu=new RegExp(`^rgba\\(${yt},${yt},${yt},${Ne}\\)$`),fu=new RegExp(`^hsl\\(${Ne},${yt},${yt}\\)$`),cu=new RegExp(`^hsla\\(${Ne},${yt},${yt},${Ne}\\)$`),Fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ar(Ee,mt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Go,formatHex:Go,formatHex8:pu,formatHsl:du,formatRgb:qo,toString:qo});function Go(){return this.rgb().formatHex()}function pu(){return this.rgb().formatHex8()}function du(){return Xo(this).formatHsl()}function qo(){return this.rgb().formatRgb()}function mt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=iu.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Vo(e):r===3?new ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?sr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?sr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=au.exec(t))?new ut(e[1],e[2],e[3],1):(e=su.exec(t))?new ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=uu.exec(t))?sr(e[1],e[2],e[3],e[4]):(e=lu.exec(t))?sr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fu.exec(t))?Zo(e[1],e[2]/100,e[3]/100,1):(e=cu.exec(t))?Zo(e[1],e[2]/100,e[3]/100,e[4]):Fo.hasOwnProperty(t)?Vo(Fo[t]):t==="transparent"?new ut(NaN,NaN,NaN,0):null}function Vo(t){return new ut(t>>16&255,t>>8&255,t&255,1)}function sr(t,e,r,n){return n<=0&&(t=e=r=NaN),new ut(t,e,r,n)}function hu(t){return t instanceof Ee||(t=mt(t)),t?(t=t.rgb(),new ut(t.r,t.g,t.b,t.opacity)):new ut}function ne(t,e,r,n){return arguments.length===1?hu(t):new ut(t,e,r,n??1)}function ut(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}ar(ut,ne,Wr(Ee,{brighter(t){return t=t==null?lr:Math.pow(lr,t),new ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ie:Math.pow(Ie,t),new ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ut(Ht(this.r),Ht(this.g),Ht(this.b),fr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ho,formatHex:Ho,formatHex8:mu,formatRgb:Yo,toString:Yo}));function Ho(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}`}function mu(){return`#${Vt(this.r)}${Vt(this.g)}${Vt(this.b)}${Vt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yo(){let t=fr(this.opacity);return`${t===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${t===1?")":`, ${t})`}`}function fr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ht(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Vt(t){return t=Ht(t),(t<16?"0":"")+t.toString(16)}function Zo(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ht(t,e,r,n)}function Xo(t){if(t instanceof ht)return new ht(t.h,t.s,t.l,t.opacity);if(t instanceof Ee||(t=mt(t)),!t)return new ht;if(t instanceof ht)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),i=Math.max(e,r,n),a=NaN,s=i-o,u=(i+o)/2;return s?(e===i?a=(r-n)/s+(r<n)*6:r===i?a=(n-e)/s+2:a=(e-r)/s+4,s/=u<.5?i+o:2-i-o,a*=60):s=u>0&&u<1?0:a,new ht(a,s,u,t.opacity)}function Uo(t,e,r,n){return arguments.length===1?Xo(t):new ht(t,e,r,n??1)}function ht(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}ar(ht,Uo,Wr(Ee,{brighter(t){return t=t==null?lr:Math.pow(lr,t),new ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ie:Math.pow(Ie,t),new ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new ut(Xr(t>=240?t-240:t+120,o,n),Xr(t,o,n),Xr(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new ht(Wo(this.h),ur(this.s),ur(this.l),fr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=fr(this.opacity);return`${t===1?"hsl(":"hsla("}${Wo(this.h)}, ${ur(this.s)*100}%, ${ur(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Wo(t){return t=(t||0)%360,t<0?t+360:t}function ur(t){return Math.max(0,Math.min(1,t||0))}function Xr(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function Ur(t,e,r,n,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*e+(4-6*i+3*a)*r+(1+3*t+3*i-3*a)*n+a*o)/6}function Ko(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[n],i=t[n+1],a=n>0?t[n-1]:2*o-i,s=n<e-1?t[n+2]:2*i-o;return Ur((r-n/e)*e,a,o,i,s)}}function jo(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),o=t[(n+e-1)%e],i=t[n%e],a=t[(n+1)%e],s=t[(n+2)%e];return Ur((r-n/e)*e,o,i,a,s)}}var Ce=t=>()=>t;function gu(t,e){return function(r){return t+r*e}}function xu(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Qo(t){return(t=+t)==1?cr:function(e,r){return r-e?xu(e,r,t):Ce(isNaN(e)?r:e)}}function cr(t,e){var r=e-t;return r?gu(t,r):Ce(isNaN(t)?e:t)}var Yt=function t(e){var r=Qo(e);function n(o,i){var a=r((o=ne(o)).r,(i=ne(i)).r),s=r(o.g,i.g),u=r(o.b,i.b),l=cr(o.opacity,i.opacity);return function(f){return o.r=a(f),o.g=s(f),o.b=u(f),o.opacity=l(f),o+""}}return n.gamma=t,n}(1);function Jo(t){return function(e){var r=e.length,n=new Array(r),o=new Array(r),i=new Array(r),a,s;for(a=0;a<r;++a)s=ne(e[a]),n[a]=s.r||0,o[a]=s.g||0,i[a]=s.b||0;return n=t(n),o=t(o),i=t(i),s.opacity=1,function(u){return s.r=n(u),s.g=o(u),s.b=i(u),s+""}}}var Kr=Jo(Ko),yu=Jo(jo);function ti(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(i){for(o=0;o<r;++o)n[o]=t[o]*(1-i)+e[o]*i;return n}}function ei(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ri(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),i=new Array(r),a;for(a=0;a<n;++a)o[a]=St(t[a],e[a]);for(;a<r;++a)i[a]=e[a];return function(s){for(a=0;a<n;++a)i[a]=o[a](s);return i}}function ni(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function it(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function oi(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=St(t[o],e[o]):n[o]=e[o];return function(i){for(o in r)n[o]=r[o](i);return n}}var Qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(Qr.source,"g");function vu(t){return function(){return t}}function wu(t){return function(e){return t(e)+""}}function ke(t,e){var r=Qr.lastIndex=jr.lastIndex=0,n,o,i,a=-1,s=[],u=[];for(t=t+"",e=e+"";(n=Qr.exec(t))&&(o=jr.exec(e));)(i=o.index)>r&&(i=e.slice(r,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(o=o[0])?s[a]?s[a]+=o:s[++a]=o:(s[++a]=null,u.push({i:a,x:it(n,o)})),r=jr.lastIndex;return r<e.length&&(i=e.slice(r),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?wu(u[0].x):vu(e):(e=u.length,function(l){for(var f=0,d;f<e;++f)s[(d=u[f]).i]=d.x(l);return s.join("")})}function St(t,e){var r=typeof e,n;return e==null||r==="boolean"?Ce(e):(r==="number"?it:r==="string"?(n=mt(e))?(e=n,Yt):ke:e instanceof mt?Yt:e instanceof Date?ni:ei(e)?ti:Array.isArray(e)?ri:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?oi:it)(t,e)}function Jr(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var ii=180/Math.PI,pr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tn(t,e,r,n,o,i){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*r+e*n)&&(r-=t*u,n-=e*u),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,u/=s),t*n<e*r&&(t=-t,e=-e,u=-u,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(e,t)*ii,skewX:Math.atan(u)*ii,scaleX:a,scaleY:s}}var dr;function ai(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?pr:tn(e.a,e.b,e.c,e.d,e.e,e.f)}function si(t){return t==null?pr:(dr||(dr=document.createElementNS("http://www.w3.org/2000/svg","g")),dr.setAttribute("transform",t),(t=dr.transform.baseVal.consolidate())?(t=t.matrix,tn(t.a,t.b,t.c,t.d,t.e,t.f)):pr)}function ui(t,e,r,n){function o(l){return l.length?l.pop()+" ":""}function i(l,f,d,h,g,v){if(l!==d||f!==h){var N=g.push("translate(",null,e,null,r);v.push({i:N-4,x:it(l,d)},{i:N-2,x:it(f,h)})}else(d||h)&&g.push("translate("+d+e+h+r)}function a(l,f,d,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:d.push(o(d)+"rotate(",null,n)-2,x:it(l,f)})):f&&d.push(o(d)+"rotate("+f+n)}function s(l,f,d,h){l!==f?h.push({i:d.push(o(d)+"skewX(",null,n)-2,x:it(l,f)}):f&&d.push(o(d)+"skewX("+f+n)}function u(l,f,d,h,g,v){if(l!==d||f!==h){var N=g.push(o(g)+"scale(",null,",",null,")");v.push({i:N-4,x:it(l,d)},{i:N-2,x:it(f,h)})}else(d!==1||h!==1)&&g.push(o(g)+"scale("+d+","+h+")")}return function(l,f){var d=[],h=[];return l=t(l),f=t(f),i(l.translateX,l.translateY,f.translateX,f.translateY,d,h),a(l.rotate,f.rotate,d,h),s(l.skewX,f.skewX,d,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,d,h),l=f=null,function(g){for(var v=-1,N=h.length,w;++v<N;)d[(w=h[v]).i]=w.x(g);return d.join("")}}}var en=ui(ai,"px, ","px)","deg)"),rn=ui(si,", ",")",")");var oe=0,Oe=0,De=0,fi=1e3,hr,Te,mr=0,Zt=0,gr=0,Pe=typeof performance=="object"&&performance.now?performance:Date,ci=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ze(){return Zt||(ci(bu),Zt=Pe.now()+gr)}function bu(){Zt=0}function Re(){this._call=this._time=this._next=null}Re.prototype=xr.prototype={constructor:Re,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?ze():+r)+(e==null?0:+e),!this._next&&Te!==this&&(Te?Te._next=this:hr=this,Te=this),this._call=t,this._time=r,nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,nn())}};function xr(t,e,r){var n=new Re;return n.restart(t,e,r),n}function pi(){ze(),++oe;for(var t=hr,e;t;)(e=Zt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--oe}function li(){Zt=(mr=Pe.now())+gr,oe=Oe=0;try{pi()}finally{oe=0,Au(),Zt=0}}function _u(){var t=Pe.now(),e=t-mr;e>fi&&(gr-=e,mr=t)}function Au(){for(var t,e=hr,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:hr=r);Te=t,nn(n)}function nn(t){if(!oe){Oe&&(Oe=clearTimeout(Oe));var e=t-Zt;e>24?(t<1/0&&(Oe=setTimeout(li,t-Pe.now()-gr)),De&&(De=clearInterval(De))):(De||(mr=Pe.now(),De=setInterval(_u,fi)),oe=1,ci(li))}}function yr(t,e,r){var n=new Re;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var Su=Lt("start","end","cancel","interrupt"),Mu=[],mi=0,di=1,wr=2,vr=3,hi=4,br=5,Be=6;function Dt(t,e,r,n,o,i){var a=t.__transition;if(!a)t.__transition={};else if(r in a)return;Iu(t,r,{name:e,index:n,group:o,on:Su,tween:Mu,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:mi})}function $e(t,e){var r=Q(t,e);if(r.state>mi)throw new Error("too late; already scheduled");return r}function tt(t,e){var r=Q(t,e);if(r.state>vr)throw new Error("too late; already running");return r}function Q(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Iu(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=xr(i,0,r.time);function i(l){r.state=di,r.timer.restart(a,r.delay,r.time),r.delay<=l&&a(l-r.delay)}function a(l){var f,d,h,g;if(r.state!==di)return u();for(f in n)if(g=n[f],g.name===r.name){if(g.state===vr)return yr(a);g.state===hi?(g.state=Be,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[f]):+f<e&&(g.state=Be,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[f])}if(yr(function(){r.state===vr&&(r.state=hi,r.timer.restart(s,r.delay,r.time),s(l))}),r.state=wr,r.on.call("start",t,t.__data__,r.index,r.group),r.state===wr){for(r.state=vr,o=new Array(h=r.tween.length),f=0,d=-1;f<h;++f)(g=r.tween[f].value.call(t,t.__data__,r.index,r.group))&&(o[++d]=g);o.length=d+1}}function s(l){for(var f=l<r.duration?r.ease.call(null,l/r.duration):(r.timer.restart(u),r.state=br,1),d=-1,h=o.length;++d<h;)o[d].call(t,f);r.state===br&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=Be,r.timer.stop(),delete n[e];for(var l in n)return;delete t.__transition}}function Wt(t,e){var r=t.__transition,n,o,i=!0,a;if(r){e=e==null?null:e+"";for(a in r){if((n=r[a]).name!==e){i=!1;continue}o=n.state>wr&&n.state<br,n.state=Be,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[a]}i&&delete t.__transition}}function gi(t){return this.each(function(){Wt(this,t)})}function Nu(t,e){var r,n;return function(){var o=tt(this,t),i=o.tween;if(i!==r){n=r=i;for(var a=0,s=n.length;a<s;++a)if(n[a].name===e){n=n.slice(),n.splice(a,1);break}}o.tween=n}}function Eu(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var i=tt(this,t),a=i.tween;if(a!==n){o=(n=a).slice();for(var s={name:e,value:r},u=0,l=o.length;u<l;++u)if(o[u].name===e){o[u]=s;break}u===l&&o.push(s)}i.tween=o}}function xi(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=Q(this.node(),r).tween,o=0,i=n.length,a;o<i;++o)if((a=n[o]).name===t)return a.value;return null}return this.each((e==null?Nu:Eu)(r,t,e))}function ie(t,e,r){var n=t._id;return t.each(function(){var o=tt(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return Q(o,n).value[e]}}function _r(t,e){var r;return(typeof e=="number"?it:e instanceof mt?Yt:(r=mt(e))?(e=r,Yt):ke)(t,e)}function Cu(t){return function(){this.removeAttribute(t)}}function ku(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Du(t,e,r){var n,o=r+"",i;return function(){var a=this.getAttribute(t);return a===o?null:a===n?i:i=e(n=a,r)}}function Ou(t,e,r){var n,o=r+"",i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===n?i:i=e(n=a,r)}}function Tu(t,e,r){var n,o,i;return function(){var a,s=r(this),u;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=s+"",a===u?null:a===n&&u===o?i:(o=u,i=e(n=a,s)))}}function Pu(t,e,r){var n,o,i;return function(){var a,s=r(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=s+"",a===u?null:a===n&&u===o?i:(o=u,i=e(n=a,s)))}}function yi(t,e){var r=_t(t),n=r==="transform"?rn:_r;return this.attrTween(t,typeof e=="function"?(r.local?Pu:Tu)(r,n,ie(this,"attr."+t,e)):e==null?(r.local?ku:Cu)(r):(r.local?Ou:Du)(r,n,e))}function Ru(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function zu(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Bu(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&zu(t,i)),r}return o._value=e,o}function $u(t,e){var r,n;function o(){var i=e.apply(this,arguments);return i!==n&&(r=(n=i)&&Ru(t,i)),r}return o._value=e,o}function vi(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=_t(t);return this.tween(r,(n.local?Bu:$u)(n,e))}function Lu(t,e){return function(){$e(this,t).delay=+e.apply(this,arguments)}}function Fu(t,e){return e=+e,function(){$e(this,t).delay=e}}function wi(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Lu:Fu)(e,t)):Q(this.node(),e).delay}function Gu(t,e){return function(){tt(this,t).duration=+e.apply(this,arguments)}}function qu(t,e){return e=+e,function(){tt(this,t).duration=e}}function bi(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Gu:qu)(e,t)):Q(this.node(),e).duration}function Vu(t,e){if(typeof e!="function")throw new Error;return function(){tt(this,t).ease=e}}function _i(t){var e=this._id;return arguments.length?this.each(Vu(e,t)):Q(this.node(),e).ease}function Hu(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;tt(this,t).ease=r}}function Ai(t){if(typeof t!="function")throw new Error;return this.each(Hu(this._id,t))}function Si(t){typeof t!="function"&&(t=ve(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var i=e[o],a=i.length,s=n[o]=[],u,l=0;l<a;++l)(u=i[l])&&t.call(u,u.__data__,l,i)&&s.push(u);return new at(n,this._parents,this._name,this._id)}function Mi(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,i=Math.min(n,o),a=new Array(n),s=0;s<i;++s)for(var u=e[s],l=r[s],f=u.length,d=a[s]=new Array(f),h,g=0;g<f;++g)(h=u[g]||l[g])&&(d[g]=h);for(;s<n;++s)a[s]=e[s];return new at(a,this._parents,this._name,this._id)}function Yu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Zu(t,e,r){var n,o,i=Yu(e)?$e:tt;return function(){var a=i(this,t),s=a.on;s!==n&&(o=(n=s).copy()).on(e,r),a.on=o}}function Ii(t,e){var r=this._id;return arguments.length<2?Q(this.node(),r).on.on(t):this.each(Zu(r,t,e))}function Wu(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Ni(){return this.on("end.remove",Wu(this._id))}function Ei(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ft(t));for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a)for(var s=n[a],u=s.length,l=i[a]=new Array(u),f,d,h=0;h<u;++h)(f=s[h])&&(d=t.call(f,f.__data__,h,s))&&("__data__"in f&&(d.__data__=f.__data__),l[h]=d,Dt(l[h],e,r,h,l,Q(f,r)));return new at(i,this._parents,e,r)}function Ci(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ye(t));for(var n=this._groups,o=n.length,i=[],a=[],s=0;s<o;++s)for(var u=n[s],l=u.length,f,d=0;d<l;++d)if(f=u[d]){for(var h=t.call(f,f.__data__,d,u),g,v=Q(f,r),N=0,w=h.length;N<w;++N)(g=h[N])&&Dt(g,e,r,N,h,v);i.push(h),a.push(f)}return new at(i,a,e,r)}var Xu=At.prototype.constructor;function ki(){return new Xu(this._groups,this._parents)}function Uu(t,e){var r,n,o;return function(){var i=Ct(this,t),a=(this.style.removeProperty(t),Ct(this,t));return i===a?null:i===r&&a===n?o:o=e(r=i,n=a)}}function Di(t){return function(){this.style.removeProperty(t)}}function Ku(t,e,r){var n,o=r+"",i;return function(){var a=Ct(this,t);return a===o?null:a===n?i:i=e(n=a,r)}}function ju(t,e,r){var n,o,i;return function(){var a=Ct(this,t),s=r(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),Ct(this,t))),a===u?null:a===n&&u===o?i:(o=u,i=e(n=a,s))}}function Qu(t,e){var r,n,o,i="style."+e,a="end."+i,s;return function(){var u=tt(this,t),l=u.on,f=u.value[i]==null?s||(s=Di(e)):void 0;(l!==r||o!==f)&&(n=(r=l).copy()).on(a,o=f),u.on=n}}function Oi(t,e,r){var n=(t+="")=="transform"?en:_r;return e==null?this.styleTween(t,Uu(t,n)).on("end.style."+t,Di(t)):typeof e=="function"?this.styleTween(t,ju(t,n,ie(this,"style."+t,e))).each(Qu(this._id,t)):this.styleTween(t,Ku(t,n,e),r).on("end.style."+t,null)}function Ju(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function tl(t,e,r){var n,o;function i(){var a=e.apply(this,arguments);return a!==o&&(n=(o=a)&&Ju(t,a,r)),n}return i._value=e,i}function Ti(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,tl(t,e,r??""))}function el(t){return function(){this.textContent=t}}function rl(t){return function(){var e=t(this);this.textContent=e??""}}function Pi(t){return this.tween("text",typeof t=="function"?rl(ie(this,"text",t)):el(t==null?"":t+""))}function nl(t){return function(e){this.textContent=t.call(this,e)}}function ol(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&nl(o)),e}return n._value=t,n}function Ri(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ol(t))}function zi(){for(var t=this._name,e=this._id,r=Ar(),n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],s=a.length,u,l=0;l<s;++l)if(u=a[l]){var f=Q(u,e);Dt(u,t,r,l,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new at(n,this._parents,t,r)}function Bi(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(i,a){var s={value:a},u={value:function(){--o===0&&i()}};r.each(function(){var l=tt(this,n),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),o===0&&i()})}var il=0;function at(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function $i(t){return At().transition(t)}function Ar(){return++il}var Mt=At.prototype;at.prototype=$i.prototype={constructor:at,select:Ei,selectAll:Ci,selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:Si,merge:Mi,selection:ki,transition:zi,call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:Ii,attr:yi,attrTween:vi,style:Oi,styleTween:Ti,text:Pi,textTween:Ri,remove:Ni,tween:xi,delay:wi,duration:bi,ease:_i,easeVarying:Ai,end:Bi,[Symbol.iterator]:Mt[Symbol.iterator]};function Sr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var al={time:null,delay:0,duration:250,ease:Sr};function sl(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Li(t){var e,r;t instanceof at?(e=t._id,t=t._name):(e=Ar(),(r=al).time=ze(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,i=0;i<o;++i)for(var a=n[i],s=a.length,u,l=0;l<s;++l)(u=a[l])&&Dt(u,t,e,l,a,r||sl(u,e));return new at(n,this._parents,t,e)}At.prototype.interrupt=gi;At.prototype.transition=Li;var Mr=t=>()=>t;function on(t,{sourceEvent:e,target:r,selection:n,mode:o,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Fi(t){t.stopImmediatePropagation()}function Ir(t){t.preventDefault(),t.stopImmediatePropagation()}var Gi={name:"drag"},an={name:"space"},ae={name:"handle"},se={name:"center"},{abs:qi,max:nt,min:ot}=Math;function Vi(t){return[+t[0],+t[1]]}function ln(t){return[Vi(t[0]),Vi(t[1])]}var sn={name:"x",handles:["w","e"].map(Le),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Nr={name:"y",handles:["n","s"].map(Le),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},bg={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Le),input:function(t){return t==null?null:ln(t)},output:function(t){return t}},It={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Yi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ul={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ll={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Le(t){return{type:t}}function fl(t){return!t.ctrlKey&&!t.button}function cl(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function pl(){return navigator.maxTouchPoints||"ontouchstart"in this}function un(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function dl(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function fn(){return hl(Nr)}function hl(t){var e=cl,r=fl,n=pl,o=!0,i=Lt("start","brush","end"),a=6,s;function u(w){var A=w.property("__brush",N).selectAll(".overlay").data([Le("overlay")]);A.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",It.overlay).merge(A).each(function(){var S=un(this).extent;G(this).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1])}),w.selectAll(".selection").data([Le("selection")]).enter().append("rect").attr("class","selection").attr("cursor",It.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var M=w.selectAll(".handle").data(t.handles,function(S){return S.type});M.exit().remove(),M.enter().append("rect").attr("class",function(S){return"handle handle--"+S.type}).attr("cursor",function(S){return It[S.type]}),w.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(n).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(w,A,M){w.tween?w.on("start.brush",function(S){f(this,arguments).beforestart().start(S)}).on("interrupt.brush end.brush",function(S){f(this,arguments).end(S)}).tween("brush",function(){var S=this,x=S.__brush,y=f(S,arguments),T=x.selection,k=t.input(typeof A=="function"?A.apply(this,arguments):A,x.extent),D=St(T,k);function z(P){x.selection=P===1&&k===null?null:D(P),l.call(S),y.brush()}return T!==null&&k!==null?z:z(1)}):w.each(function(){var S=this,x=arguments,y=S.__brush,T=t.input(typeof A=="function"?A.apply(S,x):A,y.extent),k=f(S,x).beforestart();Wt(S),y.selection=T===null?null:T,l.call(S),k.start(M).brush(M).end(M)})},u.clear=function(w,A){u.move(w,null,A)};function l(){var w=G(this),A=un(this).selection;A?(w.selectAll(".selection").style("display",null).attr("x",A[0][0]).attr("y",A[0][1]).attr("width",A[1][0]-A[0][0]).attr("height",A[1][1]-A[0][1]),w.selectAll(".handle").style("display",null).attr("x",function(M){return M.type[M.type.length-1]==="e"?A[1][0]-a/2:A[0][0]-a/2}).attr("y",function(M){return M.type[0]==="s"?A[1][1]-a/2:A[0][1]-a/2}).attr("width",function(M){return M.type==="n"||M.type==="s"?A[1][0]-A[0][0]+a:a}).attr("height",function(M){return M.type==="e"||M.type==="w"?A[1][1]-A[0][1]+a:a})):w.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(w,A,M){var S=w.__brush.emitter;return S&&(!M||!S.clean)?S:new d(w,A,M)}function d(w,A,M){this.that=w,this.args=A,this.state=w.__brush,this.active=0,this.clean=M}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(w,A){return this.starting?(this.starting=!1,this.emit("start",w,A)):this.emit("brush",w),this},brush:function(w,A){return this.emit("brush",w,A),this},end:function(w,A){return--this.active===0&&(delete this.state.emitter,this.emit("end",w,A)),this},emit:function(w,A,M){var S=G(this.that).datum();i.call(w,this.that,new on(w,{sourceEvent:A,target:u,selection:t.output(this.state.selection),mode:M,dispatch:i}),S)}};function h(w){if(s&&!w.touches||!r.apply(this,arguments))return;var A=this,M=w.target.__data__.type,S=(o&&w.metaKey?M="overlay":M)==="selection"?Gi:o&&w.altKey?se:ae,x=t===Nr?null:ul[M],y=t===sn?null:ll[M],T=un(A),k=T.extent,D=T.selection,z=k[0][0],P,E,Y=k[0][1],R,$,et=k[1][0],V,F,K=k[1][1],L,q,Z=0,X=0,W,rt=x&&y&&o&&w.shiftKey,Qt,Jt,J=Array.from(w.touches||[w],O=>{let U=O.identifier;return O=ft(O,A),O.point0=O.slice(),O.identifier=U,O});Wt(A);var Nt=f(A,arguments,!0).beforestart();if(M==="overlay"){D&&(W=!0);let O=[J[0],J[1]||J[0]];T.selection=D=[[P=t===Nr?z:ot(O[0][0],O[1][0]),R=t===sn?Y:ot(O[0][1],O[1][1])],[V=t===Nr?et:nt(O[0][0],O[1][0]),L=t===sn?K:nt(O[0][1],O[1][1])]],J.length>1&&dt(w)}else P=D[0][0],R=D[0][1],V=D[1][0],L=D[1][1];E=P,$=R,F=V,q=L;var he=G(A).attr("pointer-events","none"),bt=he.selectAll(".overlay").attr("cursor",It[M]);if(w.touches)Nt.moved=Ze,Nt.ended=me;else{var Ye=G(w.view).on("mousemove.brush",Ze,!0).on("mouseup.brush",me,!0);o&&Ye.on("keydown.brush",We,!0).on("keyup.brush",$r,!0),_e(w.view)}l.call(A),Nt.start(w,S.name);function Ze(O){for(let U of O.changedTouches||[O])for(let zt of J)zt.identifier===U.identifier&&(zt.cur=ft(U,A));if(rt&&!Qt&&!Jt&&J.length===1){let U=J[0];qi(U.cur[0]-U[0])>qi(U.cur[1]-U[1])?Jt=!0:Qt=!0}for(let U of J)U.cur&&(U[0]=U.cur[0],U[1]=U.cur[1]);W=!0,Ir(O),dt(O)}function dt(O){let U=J[0],zt=U.point0;var xt;switch(Z=U[0]-zt[0],X=U[1]-zt[1],S){case an:case Gi:{x&&(Z=nt(z-P,ot(et-V,Z)),E=P+Z,F=V+Z),y&&(X=nt(Y-R,ot(K-L,X)),$=R+X,q=L+X);break}case ae:{J[1]?(x&&(E=nt(z,ot(et,J[0][0])),F=nt(z,ot(et,J[1][0])),x=1),y&&($=nt(Y,ot(K,J[0][1])),q=nt(Y,ot(K,J[1][1])),y=1)):(x<0?(Z=nt(z-P,ot(et-P,Z)),E=P+Z,F=V):x>0&&(Z=nt(z-V,ot(et-V,Z)),E=P,F=V+Z),y<0?(X=nt(Y-R,ot(K-R,X)),$=R+X,q=L):y>0&&(X=nt(Y-L,ot(K-L,X)),$=R,q=L+X));break}case se:{x&&(E=nt(z,ot(et,P-Z*x)),F=nt(z,ot(et,V+Z*x))),y&&($=nt(Y,ot(K,R-X*y)),q=nt(Y,ot(K,L+X*y)));break}}F<E&&(x*=-1,xt=P,P=V,V=xt,xt=E,E=F,F=xt,M in Hi&&bt.attr("cursor",It[M=Hi[M]])),q<$&&(y*=-1,xt=R,R=L,L=xt,xt=$,$=q,q=xt,M in Yi&&bt.attr("cursor",It[M=Yi[M]])),T.selection&&(D=T.selection),Qt&&(E=D[0][0],F=D[1][0]),Jt&&($=D[0][1],q=D[1][1]),(D[0][0]!==E||D[0][1]!==$||D[1][0]!==F||D[1][1]!==q)&&(T.selection=[[E,$],[F,q]],l.call(A),Nt.brush(O,S.name))}function me(O){if(Fi(O),O.touches){if(O.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Ae(O.view,W),Ye.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),bt.attr("cursor",It.overlay),T.selection&&(D=T.selection),dl(D)&&(T.selection=null,l.call(A)),Nt.end(O,S.name)}function We(O){switch(O.keyCode){case 16:{rt=x&&y;break}case 18:{S===ae&&(x&&(V=F-Z*x,P=E+Z*x),y&&(L=q-X*y,R=$+X*y),S=se,dt(O));break}case 32:{(S===ae||S===se)&&(x<0?V=F-Z:x>0&&(P=E-Z),y<0?L=q-X:y>0&&(R=$-X),S=an,bt.attr("cursor",It.selection),dt(O));break}default:return}Ir(O)}function $r(O){switch(O.keyCode){case 16:{rt&&(Qt=Jt=rt=!1,dt(O));break}case 18:{S===se&&(x<0?V=F:x>0&&(P=E),y<0?L=q:y>0&&(R=$),S=ae,dt(O));break}case 32:{S===an&&(O.altKey?(x&&(V=F-Z*x,P=E+Z*x),y&&(L=q-X*y,R=$+X*y),S=se):(x<0?V=F:x>0&&(P=E),y<0?L=q:y>0&&(R=$),S=ae),bt.attr("cursor",It[M]),dt(O));break}default:return}Ir(O)}}function g(w){f(this,arguments).moved(w)}function v(w){f(this,arguments).ended(w)}function N(){var w=this.__brush||{selection:null};return w.extent=ln(e.apply(this,arguments)),w.dim=t,w}return u.extent=function(w){return arguments.length?(e=typeof w=="function"?w:Mr(ln(w)),u):e},u.filter=function(w){return arguments.length?(r=typeof w=="function"?w:Mr(!!w),u):r},u.touchable=function(w){return arguments.length?(n=typeof w=="function"?w:Mr(!!w),u):n},u.handleSize=function(w){return arguments.length?(a=+w,u):a},u.keyModifiers=function(w){return arguments.length?(o=!!w,u):o},u.on=function(){var w=i.on.apply(i,arguments);return w===i?u:w},u}var cn=Math.PI,pn=2*cn,Xt=1e-6,ml=pn-Xt;function Zi(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function gl(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Zi;let r=10**e;return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var Fe=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Zi:gl(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,o){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(e,r,n,o,i,a){this._append`C${+e},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(e,r,n,o,i){if(e=+e,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,s=this._y1,u=n-e,l=o-r,f=a-e,d=s-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>Xt)if(!(Math.abs(d*u-l*f)>Xt)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-a,v=o-s,N=u*u+l*l,w=g*g+v*v,A=Math.sqrt(N),M=Math.sqrt(h),S=i*Math.tan((cn-Math.acos((N+h-w)/(2*A*M)))/2),x=S/M,y=S/A;Math.abs(x-1)>Xt&&this._append`L${e+x*f},${r+x*d}`,this._append`A${i},${i},0,0,${+(d*g>f*v)},${this._x1=e+y*u},${this._y1=r+y*l}`}}arc(e,r,n,o,i,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(o),u=n*Math.sin(o),l=e+s,f=r+u,d=1^a,h=a?o-i:i-o;this._x1===null?this._append`M${l},${f}`:(Math.abs(this._x1-l)>Xt||Math.abs(this._y1-f)>Xt)&&this._append`L${l},${f}`,n&&(h<0&&(h=h%pn+pn),h>ml?this._append`A${n},${n},0,1,${d},${e-s},${r-u}A${n},${n},0,1,${d},${this._x1=l},${this._y1=f}`:h>Xt&&this._append`A${n},${n},0,${+(h>=cn)},${d},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function Er(){return new Fe}Er.prototype=Fe.prototype;function Wi(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ut(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function vt(t){return t=Ut(Math.abs(t)),t?t[1]:NaN}function Xi(t,e){return function(r,n){for(var o=r.length,i=[],a=0,s=t[0],u=0;o>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),i.push(r.substring(o-=s,o+s)),!((u+=s+1)>n));)s=t[a=(a+1)%t.length];return i.reverse().join(e)}}function Ui(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var xl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ot(t){if(!(e=xl.exec(t)))throw new Error("invalid format: "+t);var e;return new Cr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ot.prototype=Cr.prototype;function Cr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Cr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ki(t){t:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break t;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var dn;function ji(t,e){var r=Ut(t,e);if(!r)return t+"";var n=r[0],o=r[1],i=o-(dn=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,a=n.length;return i===a?n:i>a?n+new Array(i-a+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ut(t,Math.max(0,e+i-1))[0]}function hn(t,e){var r=Ut(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var mn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Wi,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hn(t*100,e),r:hn,s:ji,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gn(t){return t}var Qi=Array.prototype.map,Ji=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function ta(t){var e=t.grouping===void 0||t.thousands===void 0?gn:Xi(Qi.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?gn:Ui(Qi.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(d){d=Ot(d);var h=d.fill,g=d.align,v=d.sign,N=d.symbol,w=d.zero,A=d.width,M=d.comma,S=d.precision,x=d.trim,y=d.type;y==="n"?(M=!0,y="g"):mn[y]||(S===void 0&&(S=12),x=!0,y="g"),(w||h==="0"&&g==="=")&&(w=!0,h="0",g="=");var T=N==="$"?r:N==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",k=N==="$"?n:/[%p]/.test(y)?a:"",D=mn[y],z=/[defgprs%]/.test(y);S=S===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function P(E){var Y=T,R=k,$,et,V;if(y==="c")R=D(E)+R,E="";else{E=+E;var F=E<0||1/E<0;if(E=isNaN(E)?u:D(Math.abs(E),S),x&&(E=Ki(E)),F&&+E==0&&v!=="+"&&(F=!1),Y=(F?v==="("?v:s:v==="-"||v==="("?"":v)+Y,R=(y==="s"?Ji[8+dn/3]:"")+R+(F&&v==="("?")":""),z){for($=-1,et=E.length;++$<et;)if(V=E.charCodeAt($),48>V||V>57){R=(V===46?o+E.slice($+1):E.slice($))+R,E=E.slice(0,$);break}}}M&&!w&&(E=e(E,1/0));var K=Y.length+E.length+R.length,L=K<A?new Array(A-K+1).join(h):"";switch(M&&w&&(E=e(L+E,L.length?A-R.length:1/0),L=""),g){case"<":E=Y+E+R+L;break;case"=":E=Y+L+E+R;break;case"^":E=L.slice(0,K=L.length>>1)+Y+E+R+L.slice(K);break;default:E=L+Y+E+R;break}return i(E)}return P.toString=function(){return d+""},P}function f(d,h){var g=l((d=Ot(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(vt(h)/3)))*3,N=Math.pow(10,-v),w=Ji[8+v/3];return function(A){return g(N*A)+w}}return{format:l,formatPrefix:f}}var kr,ue,Dr;xn({thousands:",",grouping:[3],currency:["$",""]});function xn(t){return kr=ta(t),ue=kr.format,Dr=kr.formatPrefix,kr}function yn(t){return Math.max(0,-vt(Math.abs(t)))}function vn(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vt(e)/3)))*3-vt(Math.abs(t)))}function wn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vt(e)-vt(t))+1}function le(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ea(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}var bn=Symbol("implicit");function gt(){var t=new ee,e=[],r=[],n=bn;function o(i){let a=t.get(i);if(a===void 0){if(n!==bn)return n;t.set(i,a=e.push(i)-1)}return r[a%r.length]}return o.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new ee;for(let a of i)t.has(a)||t.set(a,e.push(a)-1);return o},o.range=function(i){return arguments.length?(r=Array.from(i),o):r.slice()},o.unknown=function(i){return arguments.length?(n=i,o):n},o.copy=function(){return gt(e,r).unknown(n)},le.apply(o,arguments),o}function Kt(){var t=gt().unknown(void 0),e=t.domain,r=t.range,n=0,o=1,i,a,s=!1,u=0,l=0,f=.5;delete t.unknown;function d(){var h=e().length,g=o<n,v=g?o:n,N=g?n:o;i=(N-v)/Math.max(1,h-u+l*2),s&&(i=Math.floor(i)),v+=(N-v-i*(h-u))*f,a=i*(1-u),s&&(v=Math.round(v),a=Math.round(a));var w=$t(h).map(function(A){return v+i*A});return r(g?w.reverse():w)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([n,o]=h,n=+n,o=+o,d()):[n,o]},t.rangeRound=function(h){return[n,o]=h,n=+n,o=+o,s=!0,d()},t.bandwidth=function(){return a},t.step=function(){return i},t.round=function(h){return arguments.length?(s=!!h,d()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),d()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),d()):u},t.paddingOuter=function(h){return arguments.length?(l=+h,d()):l},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},t.copy=function(){return Kt(e(),[n,o]).round(s).paddingInner(u).paddingOuter(l).align(f)},le.apply(d(),arguments)}function _n(t){return t}function An(t,e,r,n){var o=Vr(t,e,r),i;switch(n=Ot(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=vn(o,a))&&(n.precision=i),Dr(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=wn(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=yn(o))&&(n.precision=i-(n.type==="%")*2);break}}return ue(n)}function Or(t){var e=t.domain;return t.ticks=function(r){var n=e();return je(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return An(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,i=n.length-1,a=n[o],s=n[i],u,l,f=10;for(s<a&&(l=a,a=s,s=l,l=o,o=i,i=l);f-- >0;){if(l=ge(a,s,r),l===u)return n[o]=a,n[i]=s,e(n);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function Ge(){var t=0,e=1,r=1,n=[.5],o=[0,1],i;function a(u){return u!=null&&u<=u?o[qr(n,u,0,r)]:i}function s(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},a.range=function(u){return arguments.length?(r=(o=Array.from(u)).length-1,s()):o.slice()},a.invertExtent=function(u){var l=o.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,n[0]]:l>=r?[n[r-1],e]:[n[l-1],n[l]]},a.unknown=function(u){return arguments.length&&(i=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return Ge().domain([t,e]).range(o).unknown(i)},le.apply(Or(a),arguments)}function yl(){var t=0,e=1,r,n,o,i,a=_n,s=!1,u;function l(d){return d==null||isNaN(d=+d)?u:a(o===0?.5:(d=(i(d)-r)*o,s?Math.max(0,Math.min(1,d)):d))}l.domain=function(d){return arguments.length?([t,e]=d,r=i(t=+t),n=i(e=+e),o=r===n?0:1/(n-r),l):[t,e]},l.clamp=function(d){return arguments.length?(s=!!d,l):s},l.interpolator=function(d){return arguments.length?(a=d,l):a};function f(d){return function(h){var g,v;return arguments.length?([g,v]=h,a=d(g,v),l):[a(0),a(1)]}}return l.range=f(St),l.rangeRound=f(Jr),l.unknown=function(d){return arguments.length?(u=d,l):u},function(d){return i=d,r=d(t),n=d(e),o=r===n?0:1/(n-r),l}}function vl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Tt(){var t=Or(yl()(_n));return t.copy=function(){return vl(t,Tt())},ea.apply(t,arguments)}function ct(t){for(var e=t.length/6|0,r=new Array(e),n=0;n<e;)r[n]="#"+t.slice(n*6,++n*6);return r}var Tr=ct("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var wt=t=>Kr(t[t.length-1]);var ra=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ct),Sn=wt(ra);var na=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ct),Mn=wt(na);var oa=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ct),In=wt(oa);var ia=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ct),Nn=wt(ia);var aa=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ct),En=wt(aa);function Pt(t,e,r){this.k=t,this.x=e,this.y=r}Pt.prototype={constructor:Pt,scale:function(t){return t===1?this:new Pt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Pt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cn=new Pt(1,0,0);kn.prototype=Pt.prototype;function kn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Cn;return t.__zoom}var qe=typeof window<"u"&&typeof document<"u"&&typeof navigator<"u",wl=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(qe&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();function bl(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}function _l(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},wl))}}var Al=qe&&window.Promise,Sl=Al?bl:_l;function da(t){var e={};return t&&e.toString.call(t)==="[object Function]"}function jt(t,e){if(t.nodeType!==1)return[];var r=t.ownerDocument.defaultView,n=r.getComputedStyle(t,null);return e?n[e]:n}function zn(t){return t.nodeName==="HTML"?t:t.parentNode||t.host}function Ve(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=jt(t),r=e.overflow,n=e.overflowX,o=e.overflowY;return/(auto|scroll|overlay)/.test(r+o+n)?t:Ve(zn(t))}function ha(t){return t&&t.referenceNode?t.referenceNode:t}var ua=qe&&!!(window.MSInputMethodContext&&document.documentMode),la=qe&&/MSIE 10/.test(navigator.userAgent);function de(t){return t===11?ua:t===10?la:ua||la}function fe(t){if(!t)return document.documentElement;for(var e=de(10)?document.body:null,r=t.offsetParent||null;r===e&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var n=r&&r.nodeName;return!n||n==="BODY"||n==="HTML"?t?t.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(r.nodeName)!==-1&&jt(r,"position")==="static"?fe(r):r}function Ml(t){var e=t.nodeName;return e==="BODY"?!1:e==="HTML"||fe(t.firstElementChild)===t}function Tn(t){return t.parentNode!==null?Tn(t.parentNode):t}function Pr(t,e){if(!t||!t.nodeType||!e||!e.nodeType)return document.documentElement;var r=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,n=r?t:e,o=r?e:t,i=document.createRange();i.setStart(n,0),i.setEnd(o,0);var a=i.commonAncestorContainer;if(t!==a&&e!==a||n.contains(o))return Ml(a)?a:fe(a);var s=Tn(t);return s.host?Pr(s.host,e):Pr(t,Tn(e).host)}function ce(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top",r=e==="top"?"scrollTop":"scrollLeft",n=t.nodeName;if(n==="BODY"||n==="HTML"){var o=t.ownerDocument.documentElement,i=t.ownerDocument.scrollingElement||o;return i[r]}return t[r]}function Il(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=ce(e,"top"),o=ce(e,"left"),i=r?-1:1;return t.top+=n*i,t.bottom+=n*i,t.left+=o*i,t.right+=o*i,t}function fa(t,e){var r=e==="x"?"Left":"Top",n=r==="Left"?"Right":"Bottom";return parseFloat(t["border"+r+"Width"])+parseFloat(t["border"+n+"Width"])}function ca(t,e,r,n){return Math.max(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],de(10)?parseInt(r["offset"+t])+parseInt(n["margin"+(t==="Height"?"Top":"Left")])+parseInt(n["margin"+(t==="Height"?"Bottom":"Right")]):0)}function ma(t){var e=t.body,r=t.documentElement,n=de(10)&&getComputedStyle(r);return{height:ca("Height",e,r,n),width:ca("Width",e,r,n)}}var Nl=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},El=function(){function t(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),pe=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function Rt(t){return pt({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Pn(t){var e={};try{if(de(10)){e=t.getBoundingClientRect();var r=ce(t,"top"),n=ce(t,"left");e.top+=r,e.left+=n,e.bottom+=r,e.right+=n}else e=t.getBoundingClientRect()}catch{}var o={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i=t.nodeName==="HTML"?ma(t.ownerDocument):{},a=i.width||t.clientWidth||o.width,s=i.height||t.clientHeight||o.height,u=t.offsetWidth-a,l=t.offsetHeight-s;if(u||l){var f=jt(t);u-=fa(f,"x"),l-=fa(f,"y"),o.width-=u,o.height-=l}return Rt(o)}function Bn(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=de(10),o=e.nodeName==="HTML",i=Pn(t),a=Pn(e),s=Ve(t),u=jt(e),l=parseFloat(u.borderTopWidth),f=parseFloat(u.borderLeftWidth);r&&o&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var d=Rt({top:i.top-a.top-l,left:i.left-a.left-f,width:i.width,height:i.height});if(d.marginTop=0,d.marginLeft=0,!n&&o){var h=parseFloat(u.marginTop),g=parseFloat(u.marginLeft);d.top-=l-h,d.bottom-=l-h,d.left-=f-g,d.right-=f-g,d.marginTop=h,d.marginLeft=g}return(n&&!r?e.contains(s):e===s&&s.nodeName!=="BODY")&&(d=Il(d,e)),d}function Cl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=t.ownerDocument.documentElement,n=Bn(t,r),o=Math.max(r.clientWidth,window.innerWidth||0),i=Math.max(r.clientHeight,window.innerHeight||0),a=e?0:ce(r),s=e?0:ce(r,"left"),u={top:a-n.top+n.marginTop,left:s-n.left+n.marginLeft,width:o,height:i};return Rt(u)}function ga(t){var e=t.nodeName;if(e==="BODY"||e==="HTML")return!1;if(jt(t,"position")==="fixed")return!0;var r=zn(t);return r?ga(r):!1}function xa(t){if(!t||!t.parentElement||de())return document.documentElement;for(var e=t.parentElement;e&&jt(e,"transform")==="none";)e=e.parentElement;return e||document.documentElement}function $n(t,e,r,n){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,i={top:0,left:0},a=o?xa(t):Pr(t,ha(e));if(n==="viewport")i=Cl(a,o);else{var s=void 0;n==="scrollParent"?(s=Ve(zn(e)),s.nodeName==="BODY"&&(s=t.ownerDocument.documentElement)):n==="window"?s=t.ownerDocument.documentElement:s=n;var u=Bn(s,a,o);if(s.nodeName==="HTML"&&!ga(a)){var l=ma(t.ownerDocument),f=l.height,d=l.width;i.top+=u.top-u.marginTop,i.bottom=f+u.top,i.left+=u.left-u.marginLeft,i.right=d+u.left}else i=u}r=r||0;var h=typeof r=="number";return i.left+=h?r:r.left||0,i.top+=h?r:r.top||0,i.right-=h?r:r.right||0,i.bottom-=h?r:r.bottom||0,i}function kl(t){var e=t.width,r=t.height;return e*r}function ya(t,e,r,n,o){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var a=$n(r,n,i,o),s={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},u=Object.keys(s).map(function(h){return pt({key:h},s[h],{area:kl(s[h])})}).sort(function(h,g){return g.area-h.area}),l=u.filter(function(h){var g=h.width,v=h.height;return g>=r.clientWidth&&v>=r.clientHeight}),f=l.length>0?l[0].key:u[0].key,d=t.split("-")[1];return f+(d?"-"+d:"")}function va(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=n?xa(e):Pr(e,ha(r));return Bn(r,o,n)}function wa(t){var e=t.ownerDocument.defaultView,r=e.getComputedStyle(t),n=parseFloat(r.marginTop||0)+parseFloat(r.marginBottom||0),o=parseFloat(r.marginLeft||0)+parseFloat(r.marginRight||0),i={width:t.offsetWidth+o,height:t.offsetHeight+n};return i}function Rr(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(r){return e[r]})}function ba(t,e,r){r=r.split("-")[0];var n=wa(t),o={width:n.width,height:n.height},i=["right","left"].indexOf(r)!==-1,a=i?"top":"left",s=i?"left":"top",u=i?"height":"width",l=i?"width":"height";return o[a]=e[a]+e[u]/2-n[u]/2,r===s?o[s]=e[s]-n[l]:o[s]=e[Rr(s)],o}function He(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Dl(t,e,r){if(Array.prototype.findIndex)return t.findIndex(function(o){return o[e]===r});var n=He(t,function(o){return o[e]===r});return t.indexOf(n)}function _a(t,e,r){var n=r===void 0?t:t.slice(0,Dl(t,"name",r));return n.forEach(function(o){o.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=o.function||o.fn;o.enabled&&da(i)&&(e.offsets.popper=Rt(e.offsets.popper),e.offsets.reference=Rt(e.offsets.reference),e=i(e,o))}),e}function Ol(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=va(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=ya(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=ba(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=_a(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function Aa(t,e){return t.some(function(r){var n=r.name,o=r.enabled;return o&&n===e})}function Ln(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<e.length;n++){var o=e[n],i=o?""+o+r:t;if(typeof document.body.style[i]<"u")return i}return null}function Tl(){return this.state.isDestroyed=!0,Aa(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Ln("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function Sa(t){var e=t.ownerDocument;return e?e.defaultView:window}function Ma(t,e,r,n){var o=t.nodeName==="BODY",i=o?t.ownerDocument.defaultView:t;i.addEventListener(e,r,{passive:!0}),o||Ma(Ve(i.parentNode),e,r,n),n.push(i)}function Pl(t,e,r,n){r.updateBound=n,Sa(t).addEventListener("resize",r.updateBound,{passive:!0});var o=Ve(t);return Ma(o,"scroll",r.updateBound,r.scrollParents),r.scrollElement=o,r.eventsEnabled=!0,r}function Rl(){this.state.eventsEnabled||(this.state=Pl(this.reference,this.options,this.state,this.scheduleUpdate))}function zl(t,e){return Sa(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(r){r.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function Bl(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=zl(this.reference,this.state))}function Fn(t){return t!==""&&!isNaN(parseFloat(t))&&isFinite(t)}function Rn(t,e){Object.keys(e).forEach(function(r){var n="";["width","height","top","right","bottom","left"].indexOf(r)!==-1&&Fn(e[r])&&(n="px"),t.style[r]=e[r]+n})}function $l(t,e){Object.keys(e).forEach(function(r){var n=e[r];n!==!1?t.setAttribute(r,e[r]):t.removeAttribute(r)})}function Ll(t){return Rn(t.instance.popper,t.styles),$l(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&Rn(t.arrowElement,t.arrowStyles),t}function Fl(t,e,r,n,o){var i=va(o,e,t,r.positionFixed),a=ya(r.placement,i,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",a),Rn(e,{position:r.positionFixed?"fixed":"absolute"}),r}function Gl(t,e){var r=t.offsets,n=r.popper,o=r.reference,i=Math.round,a=Math.floor,s=function(A){return A},u=i(o.width),l=i(n.width),f=["left","right"].indexOf(t.placement)!==-1,d=t.placement.indexOf("-")!==-1,h=u%2===l%2,g=u%2===1&&l%2===1,v=e?f||d||h?i:a:s,N=e?i:s;return{left:v(g&&!d&&e?n.left-1:n.left),top:N(n.top),bottom:N(n.bottom),right:v(n.right)}}var ql=qe&&/Firefox/i.test(navigator.userAgent);function Vl(t,e){var r=e.x,n=e.y,o=t.offsets.popper,i=He(t.instance.modifiers,function(S){return S.name==="applyStyle"}).gpuAcceleration;i!==void 0&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var a=i!==void 0?i:e.gpuAcceleration,s=fe(t.instance.popper),u=Pn(s),l={position:o.position},f=Gl(t,window.devicePixelRatio<2||!ql),d=r==="bottom"?"top":"bottom",h=n==="right"?"left":"right",g=Ln("transform"),v=void 0,N=void 0;if(d==="bottom"?s.nodeName==="HTML"?N=-s.clientHeight+f.bottom:N=-u.height+f.bottom:N=f.top,h==="right"?s.nodeName==="HTML"?v=-s.clientWidth+f.right:v=-u.width+f.right:v=f.left,a&&g)l[g]="translate3d("+v+"px, "+N+"px, 0)",l[d]=0,l[h]=0,l.willChange="transform";else{var w=d==="bottom"?-1:1,A=h==="right"?-1:1;l[d]=N*w,l[h]=v*A,l.willChange=d+", "+h}var M={"x-placement":t.placement};return t.attributes=pt({},M,t.attributes),t.styles=pt({},l,t.styles),t.arrowStyles=pt({},t.offsets.arrow,t.arrowStyles),t}function Ia(t,e,r){var n=He(t,function(s){var u=s.name;return u===e}),o=!!n&&t.some(function(s){return s.name===r&&s.enabled&&s.order<n.order});if(!o){var i="`"+e+"`",a="`"+r+"`";console.warn(a+" modifier is required by "+i+" modifier in order to work, be sure to include it before "+i+"!")}return o}function Hl(t,e){var r;if(!Ia(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if(typeof n=="string"){if(n=t.instance.popper.querySelector(n),!n)return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var o=t.placement.split("-")[0],i=t.offsets,a=i.popper,s=i.reference,u=["left","right"].indexOf(o)!==-1,l=u?"height":"width",f=u?"Top":"Left",d=f.toLowerCase(),h=u?"left":"top",g=u?"bottom":"right",v=wa(n)[l];s[g]-v<a[d]&&(t.offsets.popper[d]-=a[d]-(s[g]-v)),s[d]+v>a[g]&&(t.offsets.popper[d]+=s[d]+v-a[g]),t.offsets.popper=Rt(t.offsets.popper);var N=s[d]+s[l]/2-v/2,w=jt(t.instance.popper),A=parseFloat(w["margin"+f]),M=parseFloat(w["border"+f+"Width"]),S=N-t.offsets.popper[d]-A-M;return S=Math.max(Math.min(a[l]-v,S),0),t.arrowElement=n,t.offsets.arrow=(r={},pe(r,d,Math.round(S)),pe(r,h,""),r),t}function Yl(t){return t==="end"?"start":t==="start"?"end":t}var Na=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Dn=Na.slice(3);function pa(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=Dn.indexOf(t),n=Dn.slice(r+1).concat(Dn.slice(0,r));return e?n.reverse():n}var On={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function Zl(t,e){if(Aa(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var r=$n(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),n=t.placement.split("-")[0],o=Rr(n),i=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case On.FLIP:a=[n,o];break;case On.CLOCKWISE:a=pa(n);break;case On.COUNTERCLOCKWISE:a=pa(n,!0);break;default:a=e.behavior}return a.forEach(function(s,u){if(n!==s||a.length===u+1)return t;n=t.placement.split("-")[0],o=Rr(n);var l=t.offsets.popper,f=t.offsets.reference,d=Math.floor,h=n==="left"&&d(l.right)>d(f.left)||n==="right"&&d(l.left)<d(f.right)||n==="top"&&d(l.bottom)>d(f.top)||n==="bottom"&&d(l.top)<d(f.bottom),g=d(l.left)<d(r.left),v=d(l.right)>d(r.right),N=d(l.top)<d(r.top),w=d(l.bottom)>d(r.bottom),A=n==="left"&&g||n==="right"&&v||n==="top"&&N||n==="bottom"&&w,M=["top","bottom"].indexOf(n)!==-1,S=!!e.flipVariations&&(M&&i==="start"&&g||M&&i==="end"&&v||!M&&i==="start"&&N||!M&&i==="end"&&w),x=!!e.flipVariationsByContent&&(M&&i==="start"&&v||M&&i==="end"&&g||!M&&i==="start"&&w||!M&&i==="end"&&N),y=S||x;(h||A||y)&&(t.flipped=!0,(h||A)&&(n=a[u+1]),y&&(i=Yl(i)),t.placement=n+(i?"-"+i:""),t.offsets.popper=pt({},t.offsets.popper,ba(t.instance.popper,t.offsets.reference,t.placement)),t=_a(t.instance.modifiers,t,"flip"))}),t}function Wl(t){var e=t.offsets,r=e.popper,n=e.reference,o=t.placement.split("-")[0],i=Math.floor,a=["top","bottom"].indexOf(o)!==-1,s=a?"right":"bottom",u=a?"left":"top",l=a?"width":"height";return r[s]<i(n[u])&&(t.offsets.popper[u]=i(n[u])-r[l]),r[u]>i(n[s])&&(t.offsets.popper[u]=i(n[s])),t}function Xl(t,e,r,n){var o=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),i=+o[1],a=o[2];if(!i)return t;if(a.indexOf("%")===0){var s=void 0;switch(a){case"%p":s=r;break;case"%":case"%r":default:s=n}var u=Rt(s);return u[e]/100*i}else if(a==="vh"||a==="vw"){var l=void 0;return a==="vh"?l=Math.max(document.documentElement.clientHeight,window.innerHeight||0):l=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l/100*i}else return i}function Ul(t,e,r,n){var o=[0,0],i=["right","left"].indexOf(n)!==-1,a=t.split(/(\+|\-)/).map(function(f){return f.trim()}),s=a.indexOf(He(a,function(f){return f.search(/,|\s/)!==-1}));a[s]&&a[s].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,l=s!==-1?[a.slice(0,s).concat([a[s].split(u)[0]]),[a[s].split(u)[1]].concat(a.slice(s+1))]:[a];return l=l.map(function(f,d){var h=(d===1?!i:i)?"height":"width",g=!1;return f.reduce(function(v,N){return v[v.length-1]===""&&["+","-"].indexOf(N)!==-1?(v[v.length-1]=N,g=!0,v):g?(v[v.length-1]+=N,g=!1,v):v.concat(N)},[]).map(function(v){return Xl(v,h,e,r)})}),l.forEach(function(f,d){f.forEach(function(h,g){Fn(h)&&(o[d]+=h*(f[g-1]==="-"?-1:1))})}),o}function Kl(t,e){var r=e.offset,n=t.placement,o=t.offsets,i=o.popper,a=o.reference,s=n.split("-")[0],u=void 0;return Fn(+r)?u=[+r,0]:u=Ul(r,i,a,s),s==="left"?(i.top+=u[0],i.left-=u[1]):s==="right"?(i.top+=u[0],i.left+=u[1]):s==="top"?(i.left+=u[0],i.top-=u[1]):s==="bottom"&&(i.left+=u[0],i.top+=u[1]),t.popper=i,t}function jl(t,e){var r=e.boundariesElement||fe(t.instance.popper);t.instance.reference===r&&(r=fe(r));var n=Ln("transform"),o=t.instance.popper.style,i=o.top,a=o.left,s=o[n];o.top="",o.left="",o[n]="";var u=$n(t.instance.popper,t.instance.reference,e.padding,r,t.positionFixed);o.top=i,o.left=a,o[n]=s,e.boundaries=u;var l=e.priority,f=t.offsets.popper,d={primary:function(g){var v=f[g];return f[g]<u[g]&&!e.escapeWithReference&&(v=Math.max(f[g],u[g])),pe({},g,v)},secondary:function(g){var v=g==="right"?"left":"top",N=f[v];return f[g]>u[g]&&!e.escapeWithReference&&(N=Math.min(f[v],u[g]-(g==="right"?f.width:f.height))),pe({},v,N)}};return l.forEach(function(h){var g=["left","top"].indexOf(h)!==-1?"primary":"secondary";f=pt({},f,d[g](h))}),t.offsets.popper=f,t}function Ql(t){var e=t.placement,r=e.split("-")[0],n=e.split("-")[1];if(n){var o=t.offsets,i=o.reference,a=o.popper,s=["bottom","top"].indexOf(r)!==-1,u=s?"left":"top",l=s?"width":"height",f={start:pe({},u,i[u]),end:pe({},u,i[u]+i[l]-a[l])};t.offsets.popper=pt({},a,f[n])}return t}function Jl(t){if(!Ia(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,r=He(t.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(t.hide===!0)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(t.hide===!1)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}function tf(t){var e=t.placement,r=e.split("-")[0],n=t.offsets,o=n.popper,i=n.reference,a=["left","right"].indexOf(r)!==-1,s=["top","left"].indexOf(r)===-1;return o[a?"left":"top"]=i[r]-(s?o[a?"width":"height"]:0),t.placement=Rr(e),t.offsets.popper=Rt(o),t}var ef={shift:{order:100,enabled:!0,fn:Ql},offset:{order:200,enabled:!0,fn:Kl,offset:0},preventOverflow:{order:300,enabled:!0,fn:jl,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:Wl},arrow:{order:500,enabled:!0,fn:Hl,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:Zl,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:tf},hide:{order:800,enabled:!0,fn:Jl},computeStyle:{order:850,enabled:!0,fn:Vl,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:Ll,onLoad:Fl,gpuAcceleration:void 0}},rf={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:ef},zr=function(){function t(e,r){var n=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Nl(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=Sl(this.update.bind(this)),this.options=pt({},t.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(pt({},t.Defaults.modifiers,o.modifiers)).forEach(function(a){n.options.modifiers[a]=pt({},t.Defaults.modifiers[a]||{},o.modifiers?o.modifiers[a]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(a){return pt({name:a},n.options.modifiers[a])}).sort(function(a,s){return a.order-s.order}),this.modifiers.forEach(function(a){a.enabled&&da(a.onLoad)&&a.onLoad(n.reference,n.popper,n.options,a,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}return El(t,[{key:"update",value:function(){return Ol.call(this)}},{key:"destroy",value:function(){return Tl.call(this)}},{key:"enableEventListeners",value:function(){return Rl.call(this)}},{key:"disableEventListeners",value:function(){return Bl.call(this)}}]),t}();zr.Utils=(typeof window<"u"?window:global).PopperUtils;zr.placements=Na;zr.Defaults=rf;var Ea=zr;function nf(t){let e=t.first,r=t.last,n=t.level,o=t.itemAttr,i=t.getAttrib||(l=>l[o]),a=t.getAttribName||(l=>typeof l=="function"?l.name:l);function s(l){return l.__i[n]>=e.__i[n]&&l.__i[n]<=r.__i[n]}function u(){let l=`${i(e,o)}`,f=`${i(r,o)}`;return l=typeof l=="string"?l.slice(0,5):l,f=typeof f=="string"?f.slice(0,5):f,`${a(o)} range including ${l} to ${f}`}return{filter:s,toStr:u,type:"range"}}function of(t){let e=t.itemAttr,r=t.sel,n=t.getAttrib||(s=>s[e]),o=t.getAttribName||(s=>typeof s=="function"?s.name:s);function i(s){return n(s,e)===n(r,e)}function a(){return`${o(e)} == ${n(r,e)}`}return{filter:i,toStr:a,type:"value"}}function af(t){let e=t.itemAttr,r=t.sel,n=t.getAttrib||(s=>s[e]),o=t.getAttribName||(s=>typeof s=="function"?s.name:s);function i(s){return n(s,e)!==n(r,e)}function a(){return`${o(e)} != ${n(r,e)}`}return{filter:i,toStr:a,type:"negativeValue"}}function sf(t){let e=t.first,r=t.last,n=t.level,o=t.itemAttr,i=t.getAttrib||(l=>l[o]),a=t.getAttribName||(l=>typeof l=="function"?l.name:l);function s(l){return l.__i[n]<e.__i[n]||l.__i[n]>r.__i[n]}function u(){let l=`${i(e,o)}`,f=`${i(r,o)}`;return l=typeof l=="string"?l.slice(0,5):l,f=typeof f=="string"?f.slice(0,5):f,`${a(o)} range excluding ${l} to ${f}`}return{filter:s,toStr:u,type:"negativeRange"}}function Ca(t,e){return e==null?t==null?0:1:t==null?-1:(typeof t!=typeof e&&(t=""+t,e=""+e),t<e?-1:t>e?1:t>=e?0:NaN)}function uf(t,e){return e==null?t==null?0:-1:t==null?1:(typeof t!=typeof e&&(t=""+t,e=""+e),t<e?1:t>e?-1:t>=e?0:NaN)}function lf(t,e=1,r){let n=Tt(r),o=new Map,i=new Map;function a(u){typeof u!="string"&&(u=u+"");let l=i.get(u.slice(0,e));return l===void 0&&(console.log(`scaleText Couldn't find index for ${u} did you call domain? Using ascii of first letter`),l=u.charCodeAt(0)),n(l)||t}function s(u,l=!0){o=new Map;for(let d of u)o.has(d)||o.set(d,0),o.set(d,o.get(d)+1);let f={counts:o};if(l){i=new Map;let d=0;for(let h of Array.from(o.keys()).sort())i.set(h,d++);f.indexes=i}return f}return a.digits=function(u){return arguments.length?(e=u,a):e},a.scale=function(u){return arguments.length?(n=u,a):n},a.domain=function(u){return arguments.length?(s(u.map(l=>(""+l).slice(0,e))),n.domain([0,Array.from(o.keys()).length]),a):n.domain()},a.computeRepresentatives=s,a.__type="text",a}function ff(t,e){let r=gt();function n(i){return i==null?t:r(i)}function o(i){let a=[],s=null;for(let u of i.sort((l,f)=>Ca(l,f)))s!==u&&(a.push(u),s=u);return a}return n.domain=function(i){if(arguments.length){let a=o(i);return r.domain(a).range(a.map((s,u)=>e(u/a.length))),n}else return r.domain()},n.computeRepresentatives=o,n.__type="ordered",n}var ka=function(t,e=1/0){function r(n,o){var i,a=[];for(i in n)n.hasOwnProperty(i)&&i!=="__i"&&i!=="__seqId"&&i!=="selected"&&(o<e&&!Array.isArray(n[i])&&n[i]!==null&&n[i]!==void 0&&!(n[i]instanceof Date)&&typeof n[i]==typeof{}?a=a.concat(r(n[i],o+1).map(s=>[i].concat(s))):a.push([i]));return a}return r(t,0)};function cf(t){typeof t=="string"&&(t=t.split("."));let e=t.join("_"),r=t.map(o=>`["${o}"]`).join(""),n=`return function ${e}(d) { try { return d${r} } catch (e) { return undefined }; };`;try{return new Function(n)()}catch{return e=e.replace(/[^a-zA-Z0-9_-]/g,""),n=`return function ${e}(d) { try { return d${r} } catch (e) { return undefined }; };`,new Function(n)()}}function Da(t,e=1/0){return ka(t,e).map(n=>n.length>1?cf(n):n)}function Br(t,e){let r=this||{},n=[],o=[],i=[],a=[],s=new Map,u=[],l=new Map,f=[],d=[],h=[],g=[],v,N,w=e!==void 0?e:600,A=new Map,M,S,x,y,T,k,D={x:-50,y:-50},z="__seqId",P=function(){},E="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzJweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jdXJzb3JTdWJzdHJhY3Q8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iY3Vyc29yU3Vic3RyYWN0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNOSwwLjUgTDcsMC41IEw3LDcgTDAuNSw3IEwwLjUsOSBMNyw5IEw3LDE1LjUgTDksMTUuNSBMOSw5IEwxNS41LDkgTDE1LjUsNyBMOSw3IEw5LDAuNSBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIHN0cm9rZT0iI0ZGRkZGRiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUiIGZpbGw9IiMwMDAwMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1LjAwMDAwMCwgMTUuMDAwMDAwKSByb3RhdGUoLTI3MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTUuMDAwMDAwLCAtMTUuMDAwMDAwKSAiIHg9IjE0IiB5PSIxMSIgd2lkdGg9IjIiIGhlaWdodD0iOCI+PC9yZWN0PgogICAgPC9nPgo8L3N2Zz4=",Y="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzJweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jdXJzb3JBZGQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iY3Vyc29yQWRkIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNOSwwLjUgTDcsMC41IEw3LDcgTDAuNSw3IEwwLjUsOSBMNyw5IEw3LDE1LjUgTDksMTUuNSBMOSw5IEwxNS41LDkgTDE1LjUsNyBMOSw3IEw5LDAuNSBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIHN0cm9rZT0iI0ZGRkZGRiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgICAgIDxwYXRoIGQ9Ik0xNiwxNCBMMTksMTQgTDE5LDE2IEwxNiwxNiBMMTYsMTkgTDE0LDE5IEwxNCwxNiBMMTEsMTYgTDExLDE0IEwxNCwxNCBMMTQsMTEgTDE2LDExIEwxNiwxNCBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD4KICAgIDwvZz4KPC9zdmc+",R="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzJweCIgaGVpZ2h0PSIzMnB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5jdXJzb3I8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iY3Vyc29yIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8cGF0aCBkPSJNOSwwLjUgTDcsMC41IEw3LDcgTDAuNSw3IEwwLjUsOSBMNyw5IEw3LDE1LjUgTDksMTUuNSBMOSw5IEwxNS41LDkgTDE1LjUsNyBMOSw3IEw5LDAuNSBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIHN0cm9rZT0iI0ZGRkZGRiIgZmlsbD0iIzAwMDAwMCI+PC9wYXRoPgogICAgPC9nPgo8L3N2Zz4=";r.x0=0,r.y0=100,r.maxNumDistictForCategorical=10,r.maxNumDistictForOrdered=90,r.howManyItemsShouldSearchForNotNull=100,r.margin=10,r.levelsSeparation=40,r.divisionsColor="white",r.nullColor="#ffedfd",r.levelConnectionsColor="rgba(205, 220, 163, 0.5)",r.divisionsThreshold=4,r.fmtCounts=ue(",.0d"),r.legendFont="14px sans-serif",r.linkColor="#ccc",r.nestedFilters=!0,r.showAttribTitles=!0,r.attribWidth=15,r.attribRotation=-45,r.attribFontSize=13,r.attribFontSizeSelected=32,r.filterFontSize=8,r.tooltipFontSize=12,r.tooltipBgColor="#b2ddf1",r.tooltipMargin=50,r.tooltipArrowSize=10,r.addAllAttribsRecursionLevel=1/0,r.addAllAttribsIncludeObjects=!1,r.addAllAttribsIncludeArrays=!1,r.digitsForText=2,r.defaultColorInterpolator=Mn,r.defaultColorInterpolatorDate=Nn,r.defaultColorInterpolatorDiverging=Sn,r.defaultColorInterpolatorOrdered=En,r.defaultColorInterpolatorText=In,r.defaultColorRangeBoolean=["#a1d76a","#e9a3c9","white"],r.defaultColorRangeSelected=["white","#b5cf6b"],r.defaultColorCategorical=Tr,r.showSelectedAttrib=!0,r.showSequenceIDAttrib=!0;function $(){k&&k.remove(),Gt("._nv_popover").remove(),k=G("body").append("div").attr("class","_nv_popover").style("pointer-events","none").style("font-family","sans-serif").style("font-size",r.tooltipFontSize).style("text-align","center").style("background",r.tooltipBgColor).style("position","relative").style("color","black").style("z-index",4).style("border-radius","4px").style("box-shadow","0 0 2px rgba(0,0,0,0.5)").style("padding","10px").style("text-align","center").style("display","none"),k.append("style").attr("scoped","").text(`
        [x-arrow] {
          width: 0;
          height: 0;
          border-style: solid;
          position: absolute;
          margin: ${r.tooltipArrowSize}px;
          border-color: ${r.tooltipBgColor}
        }

        ._nv_popover[x-placement="left"] {
            margin-right: ${r.tooltipArrowSize+r.tooltipMargin}px;
        }

        ._nv_popover[x-placement="left"] [x-arrow] {
          border-width: ${r.tooltipArrowSize}px 0 ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px;
          border-top-color: transparent;
          border-right-color: transparent;
          border-bottom-color: transparent;
          right: -${r.tooltipArrowSize}px;
          top: calc(50% - ${r.tooltipArrowSize}px);
          margin-left: 0;
          margin-right: 0;
        }

        ._nv_popover[x-placement="right"] {
            margin-left: ${r.tooltipArrowSize+r.tooltipMargin}px;
        }

        ._nv_popover[x-placement="right"] [x-arrow] {
          border-width: ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px 0;
          border-left-color: transparent;
          border-top-color: transparent;
          border-bottom-color: transparent;
          left: -${r.tooltipArrowSize}px;
          top: calc(50% - ${r.tooltipArrowSize}px);
          margin-left: 0;
          margin-right: 0;
        }

        ._nv_popover[x-placement="bottom"] {
            margin-top: ${r.tooltipArrowSize+r.tooltipMargin}px;
        }

        ._nv_popover[x-placement="bottom"] [x-arrow] {
          border-width: 0 ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px;
          border-left-color: transparent;
          border-right-color: transparent;
          border-top-color: transparent;
          top: -${r.tooltipArrowSize}px;
          left: calc(50% - ${r.tooltipArrowSize}px);
          margin-top: 0;
          margin-bottom: 0;
        }

        ._nv_popover[x-placement="top"] {
            margin-bottom: ${r.tooltipArrowSize+r.tooltipMargin}px;
        }

        ._nv_popover[x-placement="top"] [x-arrow] {
          border-width: ${r.tooltipArrowSize}px ${r.tooltipArrowSize}px 0 ${r.tooltipArrowSize}px;
          border-left-color: transparent;
          border-right-color: transparent;
          border-bottom-color: transparent;
          bottom: -${r.tooltipArrowSize}px;
          left: calc(50% - ${r.tooltipArrowSize}px);
          margin-top: 0;
          margin-bottom: 0;
        }


      `),k.append("div").attr("class","tool_id"),k.append("div").attr("class","tool_value_name").style("font-weight","bold").style("font-size","120%"),k.append("div").attr("class","tool_value_val").style("max-width","400px").style("max-height","5.5em").style("text-align","left").style("overflow","hidden").style("font-size","90%"),k.append("div").style("font-size","70%").style("margin-top","10px").style("text-align","left").style("color","#777").html(`<div>Click to filter a value (<strong>alt</strong> for negative filter).<br>
        Drag for filtering a range.<br> <strong>shift</strong> click for appending to the filters</div>`),k.append("div").attr("x-arrow","");let c={getBoundingClientRect:()=>{let p=S.node().getBoundingClientRect();return{top:D.y+p.top,right:D.x+p.left,bottom:D.y+p.top,left:D.x+p.left,width:0,height:0}},clientWidth:0,clientHeight:0};T=new Ea(c,k.node(),{placement:"right"})}function et(c){c.key==="Alt"?Gt(".overlay").attr("cursor",`url(${E}) 8 8, zoom-out`).style("cursor",`url(${E}) 8 8, zoom-out`):c.key==="Shift"?Gt(".overlay").attr("cursor",`url(${Y}) 8 8, zoom-in`).style("cursor",`url(${Y}) 8 8, zoom-in`):Gt(".overlay").style("cursor",`url(${R}) 8 8, crosshair`),c.type==="keyup"&&Gt(".overlay").style("cursor",`url(${R}) 8 8, crosshair`)}function V(){t=typeof t=="string"?G(t):t,t=t.selectAll===void 0?G(t):t,t.selectAll("*").remove();let c=t.style("height",w+"px").attr("class","navio").append("div").style("overflow-x","auto").style("position","relative");c.append("canvas"),S=c.append("svg").style("overflow","visible").style("position","absolute").style("z-index",3).style("top",0).style("left",0),c.append("div").attr("class","explanations").style("overflow","visible").style("position","absolute").style("z-index",5).style("top",r.margin+"px").style("left",r.margin+"px"),G("body").on("keydown",et).on("keyup",et),S.append("g").attr("class","attribs"),$(),S.append("g").attr("id","closeButton").style("fill","white").style("stroke","black").style("display","none").append("path").call(function(b){let _=7,I=Er();I.moveTo(0,0),I.lineTo(_,_),I.moveTo(_,0),I.lineTo(0,_),I.moveTo(_*1.2+_/2,_/2),I.arc(_/2,_/2,_*1.2,0,Math.PI*2),b.attr("d",I.toString())}).on("click pointerup",()=>qn()),v=Kt().range([0,r.attribWidth]).round(!0).paddingInner(.1).paddingOuter(0),M=Kt().round(!0),A=new Map,N=function(b,_){return M(_)+v(b)},x=t.select("canvas").node();let p=M.range()[1]+r.margin+r.x0;x.style.top=x.offsetTop+"px",x.style.left=x.offsetLeft+"px",x.style.width=p+"px",x.style.height=w+"px";let m=window.devicePixelRatio;x.width=p*m,x.height=w*m,y=x.getContext("2d"),y.scale(m,m),y.imageSmoothingEnabled=y.mozImageSmoothingEnabled=y.webkitImageSmoothingEnabled=!1,y.globalCompositeOperation="source-over"}function F(c){G(c).style("cursor","progress"),S.style("cursor","progress")}function K(c){G(c).style("cursor",null),S.style("cursor",null)}function L(c){return function(p,m,b,_){F(this),requestAnimationFrame(()=>{c(p,m,b,_),K(this)})}}function q(c,p){let m=c.domain(),b=c.range();return Ge().domain(b).range(m)(p)}function Z(c,p){if(!f.hasOwnProperty(c))return;p=p!==void 0?p:o,performance.now();let m=f[c];p[c].sort(function(b,_){return m.desc?uf(W(n[b],m.attrib),W(n[_],m.attrib)):Ca(W(n[b],m.attrib),W(n[_],m.attrib))}),he(p[c],c),performance.now()}function X(c,p){c&&c.defaultPrevented||(f[p.level]={attrib:p.attrib,desc:f[p.level]!==void 0&&f[p.level].attrib===p.attrib?!f[p.level].desc:!1},bt(p.level+1),Z(p.level),J(p.level),r.updateData(o,A,{levelsToUpdate:[p.level]}),P(r.getVisible()))}function W(c,p){if(typeof p=="function")try{return p(c)}catch{return}else return c[p]}function rt(c){return typeof c=="function"&&c.name?c.name:c}function Qt(c,p){let m,b,_;for(y.save(),b=0;b<u.length;b++){m=u[b];let I=W(c,m),B=rt(m);if(_=Math.round(g[p](c[z])+g[p].bandwidth()/2),y.beginPath(),y.moveTo(Math.round(N(B,p)),_),y.lineTo(Math.round(N(B,p)+v.bandwidth()),_),y.lineWidth=Math.ceil(g[p].bandwidth()),y.strokeStyle=I==null||I===""||I==="none"?r.nullColor:A.get(m)(I),y.stroke(),g[p].bandwidth()>r.divisionsThreshold*2){let C=Math.round(g[p](c[z]));y.beginPath(),y.moveTo(N(B,p),C),y.lineTo(N(B,p)+v.bandwidth(),C),y.lineWidth=1,y.strokeStyle=r.divisionsColor,y.stroke()}}y.restore()}function Jt(c){y.save(),y.beginPath(),y.rect(M(c),g[c].range()[0]-1,v.range()[1]+1,g[c].range()[1]+2-g[c].range()[0]),y.strokeStyle="black",y.lineWidth=1,y.stroke(),y.restore()}function J(c){c<0||G("#level"+c).selectAll(".brush").call(d[c].move,null)}function Nt(c){for(let p=0;p<o.length;p+=1)p!==c&&J(p)}function he(c,p){for(let m=0;m<c.length;m++)n[c[m]].__i[p]=m}function bt(c){for(let p=c;p<h.length;p++)h[p]=h[p].filter(m=>m.type==="value"||m.type==="negativeValue")}function Ye(c,p){p=p!==void 0?p:o,performance.now();let m=h[c].filter(I=>I.type==="negativeValue"||I.type==="negativeRange"),b=h[c].filter(I=>I.type!=="negativeValue"||I.type!=="negativeRange"),_=p[c].filter(I=>n[I].selected=b.reduce((B,C)=>B||C.filter(n[I]),!1)&&m.reduce((B,C)=>B&&C.filter(n[I]),!0));return performance.now(),_}function Ze(){let c=0;for(let p=0;p<h.length&&(c=p,!(!h[p]||!h[p].length));p++);return c}function dt(c){let p=Ze(),m=o;for(let b=c;b<=p;b++){if(!h.hasOwnProperty(b)||!h[b].length){m=qn(b+1,m,{shouldUpdate:!1});break}let _=Ye(b,m);he(_,b+1),_.length,r.nestedFilters&&(m[b+1]=_),Z(b+1)}r.updateData(m,A,{shouldDrawBrushes:!0,levelsToUpdate:$t(c,m.length)}),P(r.getVisible())}function me(c,p){d[p]=fn().extent([[N(v.domain()[0],p),g[p].range()[0]],[N(v.domain()[v.domain().length-1],p)+v.bandwidth()*1.1,g[p].range()[1]]]).on("brush",b).on("end",_);let m=G(this).selectAll(".brush").data([{data:c.map(C=>n[C]),level:p}]);m.enter().merge(m).append("g").call(d[p]).on("mousemove",$r).on("click",I).on("mouseout",O).attr("class","brush").selectAll("rect").attr("width",N(v.domain()[v.domain().length-1],p)+v.bandwidth()*1.1),m.exit().remove();function b(C){if(!C.selection||!C.sourceEvent)return;let j=C.sourceEvent.clientX,st=C.sourceEvent.clientY,te=C.sourceEvent.offsetX,lt=C.sourceEvent.offsetY;We(te,lt,j,st,p)}function _(C){if(!C.sourceEvent||!C.selection)return;F(this),Nt(p),performance.now();let j=C.selection,st=s.get(q(g[p],j[0])),te=s.get(q(g[p],j[1])),lt;C.sourceEvent.altKey?lt=new sf({first:st,last:te,level:p,itemAttr:f[p]?f[p].attrib:"__seqId",getAttrib:W,getAttribName:rt}):lt=new nf({first:st,last:te,level:p,itemAttr:f[p]?f[p].attrib:"__seqId",getAttrib:W,getAttribName:rt}),C.sourceEvent.shiftKey?(p in h||(h[p]=[]),h[p].push(lt)):h[p]=[lt],bt(p+1),dt(p),performance.now(),K(this)}function I(C){if(C.defaultPrevented)return;F(this);let j=ft(C)[1],st=ft(C)[0];B(C,st,j),K(this)}function B(C,j,st){Nt(-1),performance.now();let te=q(g[p],st);performance.now();let lt=q(v,j-M(p));if(lt===void 0){console.log(`navio.selectByValue: error, couldn't find attr in coords ${st}`);return}lt=l.get(lt);let Hn=s.get(te),Xe;C.altKey?Xe=new af({sel:Hn,itemAttr:lt,getAttrib:W,getAttribName:rt}):Xe=new of({sel:Hn,itemAttr:lt,getAttrib:W,getAttribName:rt}),C.shiftKey?(h.hasOwnProperty(p)||(h[p]=[]),h[p].push(Xe)):h[p]=[Xe],bt(p+1),dt(p)}}function We(c,p,m,b,_){let I;try{I=q(g[_],p)}catch{return}let B=q(v,c-M(_)),C=s.get(I);if(B=l.get(B),!C||C===void 0){console.log("Couldn't find datum for tooltip y",p,C);return}D.x=c,D.y=p,k.select(".tool_id").text(I),k.select(".tool_value_name").text(rt(B)),k.select(".tool_value_val").text(W(C,B)),k.style("display","initial"),T.scheduleUpdate()}function $r(c,p){let m=ft(c)[0],b=ft(c)[1],_=c.clientX,I=c.clientY;!p.data||p.data.length===0||We(m,b,_,I,p.level)}function O(){D.x=-200,D.y=-200,k.style("display","none"),T.scheduleUpdate()}function U(c,p){p.append("text").merge(c.select("text.numNodesLabel")).attr("class","numNodesLabel").style("font-family","sans-serif").style("pointer-events","none").attr("y",function(m,b){return g[b].range()[1]+15}).attr("x",function(m,b){return M(b)}).text(function(m){return r.fmtCounts(m.length)})}function zt(c,p){let m=v.domain()[v.domain().length-1],b=C=>N(m,C)+v.bandwidth()+2,_=t.select("div.explanations").selectAll("div.filterExplanation").data(o),B=_.enter().append("div").attr("class","filterExplanation").merge(_).style("position","absolute").style("top","0").style("left","0").style("min-width","200px").style("transform",(C,j)=>`translate(${b(j)}px, ${g[j].range()[1]+r.filterFontSize*1.2}px)`).merge(_.select(".filterExplanation")).style("font-size",r.filterFontSize+"pt").selectAll("div").data((C,j)=>h[j]?h[j].map(st=>(st.level=j,st)):[]);B.enter().append("div").merge(B).style("cursor","not-allowed").text(C=>"\u24CD "+C.toStr()).on("click pointerup",(C,j,st)=>{h[j.level].splice(st,1),dt(j.level)}),B.exit().remove(),_.exit().remove()}function xt(c,p){r.showAttribTitles&&p.append("text").merge(c.select("text")).style("cursor","point").style("-webkit-user-select","none").style("-moz-user-select","none").style("-ms-user-select","none").style("user-select","none").text(function(m){return m.attrib==="__seqId"?"sequential Index":m.name+(f[m.level]!==void 0&&f[m.level].attrib===m.attrib?f[m.level].desc?" \u2193":" \u2191":"")}).attr("x",v.bandwidth()/2).attr("y",0).style("font-weight",function(m){return f[m.level]!==void 0&&f[m.level].attrib===m.attrib?"bolder":"normal"}).style("font-family","sans-serif").style("font-size",function(){return Math.min(r.attribFontSize,r.attribWidth)+"px"}).call(Zr().container(p.merge(c).node()).on("start",Pa).on("drag",Ra).on("end",za)).on("click",L(X)).on("mousemove",function(){let m=G(this);m=m.transition!==void 0?m.transition().duration(150):m,m.style("font-size",r.attribFontSizeSelected+"px")}).on("mouseout",function(){let m=G(this);m=m.transition!==void 0?m.transition().duration(150):m,m.style("font-size",Math.min(r.attribFontSize,r.attribWidth)+"px")}).attr("transform",`rotate(${r.attribRotation})`)}function Oa(c,p){let m=u,b=p.merge(c).selectAll(".attribOverlay").data(function(I,B){return m.map(function(C){return{attrib:C,name:rt(C),level:B}})}),_=b.enter().append("g").attr("class","attribOverlay").style("cursor","pointer");_.merge(b).attr("transform",I=>`translate(${N(I.name,I.level)}, ${g[I.level].range()[0]})`),_.append("rect").merge(b.select("rect")).attr("fill","none").attr("x",0).attr("y",0).attr("width",function(){return v.bandwidth()*1.1}).attr("height",function(I){return g[I.level].range()[1]-g[I.level].range()[0]}),xt(b,_),b.exit().remove()}function Ta(c){let p=S.select(".attribs").selectAll(".levelOverlay").data(o),m=p.enter().append("g");m.attr("class","levelOverlay").attr("id",function(b,_){return"level"+_}),c?m.merge(p).each(me):m.each(me),Oa(p,m),U(p,m),zt(),p.exit().remove()}function Pa(c,p){c.sourceEvent.shiftKey&&G(this.parentNode).attr("transform",function(m){return"translate("+(c.x+r.attribFontSize/2)+","+g[m.level].range()[0]+")"})}function Ra(c){c.sourceEvent.shiftKey&&G(this.parentNode).attr("transform",function(p){return"translate("+(c.x+r.attribFontSize/2)+","+g[p.level].range()[0]+")"})}function za(c,p){if(!c.sourceEvent.shiftKey)return;let m=q(v,c.x+r.attribFontSize/2-M(p.level));m=l.get(m);let b;G(this.parentNode).attr("transform",function(_){return"translate("+N(_.name,_.level)+","+g[_.level].range()[0]+")"}),m!==p.attrib&&(b=u.indexOf(m),Lr(p.attrib,b),r.updateData(o))}function Ba(){let c=o.length-1;S.select("#closeButton").style("display",o.length===1?"none":"block").attr("transform","translate("+(M(c)+M.bandwidth()-r.levelsSeparation+15)+","+g[c].range()[0]+")")}function $a(c){let p=v.domain()[v.domain().length-1],m=N(p,o.length-1)+v.bandwidth()+2,b=g[o.length-1](c.source[z])+g[o.length-1].bandwidth()/2,_=g[o.length-1](c.target[z])+g[o.length-1].bandwidth()/2,I=Math.min(b,_),B=Math.max(b,_),C=B-I;y.moveTo(m,I),y.quadraticCurveTo(m+C/6,I+C/2,m,B)}function La(){if(i.length){y.save(),y.beginPath(),y.strokeStyle=r.linkColor,y.globalAlpha=Math.min(1,Math.max(.1,1e3/i[i.length-1].length));for(let c of a)$a(c);y.stroke(),y.restore()}}function Gn(c,p,m,b){y.beginPath();for(let _=0;_<c.length;_++){let I=c[_];_===0?y.moveTo(I.x,I.y):y.lineTo(I.x,I.y)}y.lineWidth=p,b?(y.fillStyle=m,y.closePath(),y.fill()):(y.strokeStyle=m,y.stroke())}function Fa(c){if(!(c<=0))for(let p of o[c].representatives){let m=s.get(n[p][z]).__i[c-1],b=Math.floor(m-m%o[c-1].itemsPerpixel),_={x:M(c-1)+v.range()[1],y:g[c-1](n[o[c-1][b]][z])},I={x:M(c),y:g[c](n[p][z])},B=[_,{x:_.x+r.levelsSeparation*.3,y:_.y},{x:I.x-r.levelsSeparation*.3,y:I.y},I,{x:I.x,y:I.y+g[c].bandwidth()},{x:I.x-r.levelsSeparation*.3,y:I.y+g[c].bandwidth()},{x:_.x+r.levelsSeparation*.3,y:_.y+g[c-1].bandwidth()},{x:_.x,y:_.y+g[c-1].bandwidth()},_];Gn(B,1,r.levelConnectionsColor),Gn(B,1,r.levelConnectionsColor,!0)}}function Ga(c){let p=[];if(o[c].length>w){let m=Math.max(Math.floor(o[c].length/(w*2)),1);o[c].itemsPerpixel=m;for(let b=0;b<o[c].length;b+=m)p.push(o[c][b])}else o[c].itemsPerpixel=1,p=o[c];return o[c].representatives=p,p}function qa(){for(let c of u){if(c==="selected")continue;let p=A.get(c);if(p.__type==="seq"||p.__type==="date")p.domain(Et(o[0].map(function(m){return W(n[m],c)})));else if(p.__type==="div"){let[m,b]=Et(o[0].map(function(I){return W(n[I],c)})),_=Math.max(-m,b);p.domain([-_,_])}else(p.__type==="text"||p.__type==="ordered")&&p.domain(o[0].map(m=>W(n[m],c)));A.set(rt(c),p)}}function Va(c){let{levelsToUpdate:p,shouldUpdateColorDomains:m}=c||{};performance.now();let b=o.length-1;p=p!==void 0?p:[b],m=m!==void 0?m:!1,g.splice(b+1,g.length);for(let _ of p){g[_]=Kt().range([r.y0,w-r.margin-30]).paddingInner(0).paddingOuter(0);let I=Ga(_);g[_].domain(I.map(function(B){return n[B][z]}))}v.domain(u.map(_=>rt(_))).range([0,r.attribWidth*Array.from(l.keys()).length]).paddingInner(.1).paddingOuter(0),M.domain(o.map(function(_,I){return I})).range([r.x0+r.margin,(v.range()[1]+r.levelsSeparation)*o.length+r.x0]).paddingInner(0).paddingOuter(0),m&&qa(),performance.now()}function qn(c,p,m){if(o.length<=1)return;let{shouldUpdate:b}=m||{},_=c!==void 0?c:o.length-1;if(p=p!==void 0?p:o,b=b!==void 0?b:!0,!p.hasOwnProperty(_))return p;if(F(this),_>0){J(_-1);for(let I of p[_-1])n[I].selected=!0;if(h.hasOwnProperty(_-1)&&h[_-1].length)for(let I=0;I<h[_-1].length;I++)delete h[_-1][I];h[_-1]=[]}return p.splice(_),b&&(r.updateData(p,A),P(r.getVisible())),K(this),p}function Lr(c,p){let m=u.indexOf(c);if(m===-1){console.log("moveAttrToPos attr not found",c);return}if(p>u.length||p<0){console.log("moveAttrToPos pos out of bounds",p,u.length);return}u.splice(m,1),u.splice(p,0,c)}function Ha(c,p){let m,b;for(m=0;m<r.howManyItemsShouldSearchForNotNull&&m<c.length;m++)if(b=typeof p=="function"?p(c[m]):c[m][p],b!=null&&b!=="")return b;return b}function Vn(){i.length>0&&(a=i.filter(function(c){return c.source.selected&&c.target.selected}))}function Ya(c,p){Jt(p);for(let m of c.representatives)Qt(n[m],p);Fa(p)}function Za(){let c=M.range()[1]+r.margin+r.x0,p=window.devicePixelRatio||1;G(x).attr("width",c*p).attr("height",w*p).style("width",c).style("height",w+"px"),x.style.width=c+"px",x.style.height=w+"px",y.scale(p,p),S.attr("width",c).attr("height",w)}return r.initData=function(c,p){performance.now(),A=p,s=new Map;for(let m=0;m<n.length;m++){let b=n[m];b.__seqId=m,s.set(b[z],b),b.__i=[],b.__i[0]=m}h=[],h[0]=[],performance.now()},r.updateData=function(c,p,m){let{levelsToUpdate:b,shouldUpdateColorDomains:_,shouldDrawBrushes:I,recomputeBrushes:B}=m||{};if(performance.now(),typeof c!=typeof[]){console.log("navio updateData didn't receive an array");return}A=p!==void 0?p:A,o=c,h.splice(c.length),h[c.length]=[],Vn(),d.splice(c.length),Va({levelsToUpdate:b,shouldUpdateColorDomains:_}),Za(),r.update({levelsToUpdate:b,shouldDrawBrushes:I,recomputeBrushes:B}),performance.now()},r.update=function(c){let{recomputeBrushes:p,shouldDrawBrushes:m}=c||{};if(!o.length)return r;p=p!==void 0?p:!1,m=m!==void 0?m:!0,performance.now();let b=M.range()[1]+r.margin+r.x0;y.clearRect(0,0,b+1,w+1),La();for(let _=0;_<o.length;_++)Ya(o[_],_);return m&&(Ta(p),Ba()),performance.now(),r},r.addAttrib=function(c,p){if(p===void 0&&(p=gt(Tr)),l.has(rt(c))){console.log(`navio.addAttrib attribute ${c} already added`);return}return u.push(c),l.set(rt(c),c),A.set(c,p),r},r.addSequentialAttrib=function(c,p){let m=n!==void 0&&n.length>0?Et(n,function(_){return W(_,c)}):[0,1],b=p||Tt(r.defaultColorInterpolator).domain(m);return b.__type="seq",r.addAttrib(c,b),r},r.addDateAttrib=function(c,p){let m=n!==void 0&&n.length>0?Et(n,function(_){return W(_,c)}):[0,1],b=p||Tt(r.defaultColorInterpolatorDate).domain(m);return r.addAttrib(c,b),b.__type="date",r},r.addDivergingAttrib=function(c,p){let m=n!==void 0&&n.length>0?Et(n,function(_){return W(_,c)}):[-1,1],b=p||Tt(r.defaultColorInterpolatorDiverging).domain([m[0],m[1]]);return b.__type="div",r.addAttrib(c,b),r},r.addCategoricalAttrib=function(c,p){let m=p||gt(r.defaultColorCategorical);return m.__type="cat",r.addAttrib(c,m),r},r.addTextAttrib=function(c,p){let m=p||lf(r.nullColor,r.digitsForText,r.defaultColorInterpolatorText);return r.addAttrib(c,m),r},r.addOrderedAttrib=function(c,p){let m=p||ff(r.nullColor,r.defaultColorInterpolatorOrdered);return r.addAttrib(c,m),r},r.addBooleanAttrib=function(c,p){let m=p||gt().domain([!0,!1,null]).range(r.defaultColorRangeBoolean);return m.__type="bool",r.addAttrib(c,m),r},r.addAllAttribs=function(c){if(!n||!n.length)throw Error("addAllAttribs called without data to guess the attribs. Make sure to call it after setting the data");let p=c!==void 0?c:Da(n[0],r.addAllAttribsRecursionLevel);for(let m of p){if(m==="__seqId"||m==="__i"||m==="selected")continue;let b=typeof m=="function"?m.name:m,_=Ha(n,m);if(_==null||typeof _=="string"){let I=new Set(n.slice(0,r.howManyItemsShouldSearchForNotNull).map(B=>W(B,m))).size;I<r.maxNumDistictForCategorical?(console.log(`Navio: Adding attr ${b} as categorical with ${I} categories`),r.addCategoricalAttrib(m)):I<r.maxNumDistictForOrdered?(r.addOrderedAttrib(m),console.log(`Navio: Attr ${b} has more than ${r.maxNumDistictForCategorical} distinct values (${I}) using orderedAttrib`)):(console.log(`Navio: Attr ${b} has more than ${r.maxNumDistictForOrdered} distinct values (${I}) using textAttrib`),r.addTextAttrib(m))}else typeof _=="number"?Qe(n,I=>W(I,m))<0?(console.log(`Navio: Adding attr ${b} as diverging`),r.addDivergingAttrib(m)):(console.log(`Navio: Adding attr ${b} as sequential`),r.addSequentialAttrib(m)):_ instanceof Date?(console.log(`Navio: Adding attr ${b} as date`),r.addDateAttrib(m)):typeof _=="boolean"?(console.log(`Navio: Adding attr ${b} as boolean`),r.addBooleanAttrib(m)):Array.isArray(_)?r.addAllAttribsIncludeArrays?(console.log(`Navio: Adding ${b} adding as categorical (type=array)`),r.addCategoricalAttrib(m)):console.log(`Navio: AddAllAttribs detected array ${b}, but ignoring it. To include it set nv.addAllAttribsIncludeArrays=true`):r.addAllAttribsIncludeObjects?(console.log(`Navio: Adding object ${b} adding as categorical (type=object)`),r.addCategoricalAttrib(m)):console.log(`Navio: AddAllAttribs detected object ${b}, but ignoring it. To include it set nv.addAllAttribsIncludeObjects=true`)}return r.data(n),r},r.data=function(c){if($(),r.showSelectedAttrib&&!A.has("selected")&&(r.addAttrib("selected",gt().domain([!1,!0]).range(r.defaultColorRangeSelected)),Lr("selected",0)),r.showSequenceIDAttrib&&!A.has("__seqId")&&(r.addSequentialAttrib("__seqId"),Lr("__seqId",1)),arguments.length){n=c.slice(0);for(let p of n)p.selected=!0;return o=[n.map(function(p,m){return m})],r.initData(o,A),u.length>(r.showSelectedAttrib?1:0)+(r.showSequenceIDAttrib?1:0)&&r.updateData(o,A,{shouldUpdateColorDomains:!0}),r}else return n},r.getSelected=function(){return o[o.length-1].filter(function(c){return n[c].selected}).map(function(c){return n[c]})},r.getVisible=r.getSelected,r.sortBy=function(c,p=!1,m=void 0){let b=Math.max(0,m!==void 0&&m<o.length?m:o.length-1);return c!==void 0?(f[b]={attrib:c,desc:p},r.update()):f[b]},r.updateCallback=function(c){return arguments.length?(P=c,r):P},r.selectedColorRange=function(c){return arguments.length?(r.defaultColorRangeSelected=c,r):r.defaultColorRangeSelected},r.id=function(c){return arguments.length?(z=c,r):z},r.links=function(c){return arguments.length?(i=c,Vn(),r):i},r.getColorScale=function(c){return A.get(c)},r.getAttribs=function(){return u},r.hardUpdate=function(c={}){let p=c.shouldDrawBrushes!==void 0?c.shouldDrawBrushes:!0,m=c.shouldUpdateColorDomains!==void 0?c.shouldUpdateColorDomains:!0,b=c.recomputeBrushes!==void 0?c.recomputeBrushes:!0,_=c.levelsToUpdate!==void 0?c.levelsToUpdate:$t(o.length);r.updateData(o,A,{shouldDrawBrushes:p,shouldUpdateColorDomains:m,recomputeBrushes:b,levelsToUpdate:_})},V(),r}Br.getAttribsFromObjectRecursive=ka;Br.getAttribsFromObjectAsFn=Da;function pf({model:t,el:e}){console.log("rendering navio widget",t.get("data"),t.get("height"));let r=Br(G(e),t.get("height"));function n(){let o=t.get("opts");console.log("Navio changed opts",o);for(let i in o)r[i]=o[i];r.update()}n(),t.get("data").length>0&&(r.data(t.get("data"),t.get("height")),r.addAllAttribs(),t.set("selected",t.get("data")),t.save_changes()),t.on("change:data",()=>{console.log("data changing to ",t.get("data")),r.data(t.get("data")),r.addAllAttribs()}),r.updateCallback(o=>{t.set("selected",o),t.save_changes()}),t.on("change:opts",n)}var Ay={render:pf};export{Ay as default};
/*! Bundled license information:

popper.js/dist/esm/popper.js:
  (**!
   * @fileOverview Kickass library to create and place poppers near their reference elements.
   * @version 1.16.1
   * @license
   * Copyright (c) 2016 Federico Zivolo and contributors
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   *)
*/
