import{_ as e,u as t,L as a,i as n,c as s,o as l,a as i,b as o,t as r,T as u,U as d,q as c,e as p,w as m,g as v,f,V as h,m as g,A as y,D as b,C as x,W as _,F as $,N as w,K as j,r as S,X as k}from"./index-BwvvGA3s.js";import{_ as C}from"./SLLoading-DSAGk2rM.js";const L={class:"text-xl font-semibold"},V={class:"relative pt-4"},W={class:"font-semibold pb-3"},z=["placeholder"],A={class:"tip text-negative-default"},E={class:"relative"},I={class:"font-semibold pt-5 pb-3"},U=["placeholder"],q={class:"tip text-negative-default"},D={class:"flex justify-end pt-10"},Z=100,B=255,N=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:x}){const _=t(),$=a(),w=e,j=x,S=n({name:"project"===w.type?_.name:$.name,description:"project"===w.type?_.description:$.description}),k=n({name:"",description:""}),N=s((()=>{const e=S.value.name;if(e.length>Z)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),T=s((()=>{const e=S.value.name;return!(e.length>Z)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),F=s((()=>{var e;return!S.value.description||!((null==(e=S.value.description)?void 0:e.length)>B)})),K=n(!1),X=async()=>{if(k.value={name:"",description:""},"project"===w.type&&!N.value)return g.warning("invalid project name"),k.value.name="too long or invalid characters";if(!T.value)return g.warning("invalid experiment name"),k.value.name="too long or invalid characters";if(!F.value)return g.warning("invalid description"),k.value.description="invalid description";if(S.value.name===_.name&&S.value.description===_.description)return k.value.name="nothing changed in project config";if(S.value.name===$.name&&S.value.description===$.description)return k.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&_.experiments.forEach((t=>{S.value.name===t.name&&S.value.name!==$.name&&(e=!0,k.value.name="The experiment name is duplicated")})),e||(K.value=!0,j("confirm",S.value,(()=>{K.value=!1,g.success(y("common.config-editor.save.success"))})))};return(t,a)=>{var n;const s=b;return l(),i("form",{class:"w-full",onSubmit:h(X,["prevent"])},[o("h1",L,r(t.$t(`common.config-editor.title.${e.type}`)),1),o("div",V,[o("h2",W,r(t.$t(`common.config-editor.sub-title.${e.type}.name`)),1),u(o("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>S.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:Z,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,z),[[d,S.value.name]]),o("p",{class:c(["absolute bottom-[-20px] text-xs right-0",0===S.value.name.length||S.value.name.length===Z?"text-negative-default":""])},r(`${S.value.name.length} / 100`),3),o("span",A,r(k.value.name),1)]),o("div",E,[o("h2",I,r(t.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),u(o("textarea",{class:"input",rows:"10","onUpdate:modelValue":a[1]||(a[1]=e=>S.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:B},null,8,U),[[d,S.value.description]]),o("p",{class:c(["absolute bottom-[-20px] text-xs right-0",(null==(n=S.value.description)?void 0:n.length)===B?"text-negative-default":""])},r(`${S.value.description?S.value.description.length:0} / 255`),3),o("span",q,r(k.value.description),1)]),o("div",D,[p(s,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:K.value},{default:m((()=>[K.value?(l(),v(C,{key:0,size:"4"})):f("",!0),o("span",null,r(t.$t("common.config-editor.save."+(K.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-8d27093d"]]),T={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:t}){const a=n(!1),s=t,o=async(e,t)=>{s("modify",e,(()=>{a.value=!1,t()}))};return(t,n)=>{const s=b;return l(),i($,null,[p(s,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":t.$t("common.config-editor.not-allowed"),onClick:n[0]||(n[0]=e=>a.value=!0)},{default:m((()=>[p(x,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),p(_,{class:"px-10 py-6","max-w":"550",modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e)},{default:m((()=>[p(N,{type:e.type,onConfirm:o},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},F={class:"text-sm flex items-center gap-2"},K={class:"md:block hidden"},X=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:t}){const a=e,n=t,s=()=>{w(y(`common.delete.title.${a.type}`),y(`common.delete.content.${a.type}`),{}).then((()=>{n("confirm")}))};return(e,t)=>(l(),v(b,{onClick:s,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:m((()=>[o("div",F,[p(x,{icon:"trash",class:"w-4 h-4"}),o("span",K,r(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-ab76981e"]]),G=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},url:{type:String,default:""}},setup(e){const t=j(),a=e,n=s((()=>{let e,t;switch(a.status){case 0:e="running",t="circle-fill";break;case 1:e="finished",t="success";break;case-1:e="crashed",t="error"}if(!e)throw new Error("Invalid status:"+a.status+"in StatusLabel.vue");return{class:e,icon:t}})),i=s((()=>a.url?"a":"div")),o=()=>{a.url&&t.push(a.url)};return(t,a)=>{const s=x;return l(),v(k(i.value),{class:c(["sl-status-label",n.value.class]),href:e.url,onClick:h(o,["prevent"])},{default:m((()=>[p(s,{icon:n.value.icon},null,8,["icon"]),S(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","href"])}}},[["__scopeId","data-v-b6e5701f"]]);export{X as D,T as _,G as a};
