var d=Object.defineProperty;var _=(n,e,t)=>e in n?d(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>(_(n,typeof e!="symbol"?e+"":e,t),t);import{X as g,F as p,a6 as u,Z as o,i as a,s as x}from"./index-6ae5dc18.js";class c extends g{constructor(t,h){super(t!=null&&t.isModel?t.initial:{...t,name:(t==null?void 0:t.name)??"",path:(t==null?void 0:t.path)??""});s(this,"_path");s(this,"_name");s(this,"parent");s(this,"remove",!1);this._path=(t==null?void 0:t.path)??this.initial.path,this._name=(t==null?void 0:t.name)??this.initial.name,this.parent=h}get id(){return p(this.path)?this.initial.id:this.path}get name(){return this._name}get path(){return this.toPath(this.name,this._path)}get isUntitled(){return this.name===""}get isLocal(){return this.path===""}get isRemote(){return this.path!==""}get withParent(){var t;return!!((t=this.parent)!=null&&t.isModel)}copyName(){return`Copy of ${this.name}__${u()}`}rename(t){this.isRemote&&(this._path=this.toPath(t,this._path.replace(this.name,t))),this._name=t}toPath(t,h=""){var m;return c.toPath(this.withParent?`${((m=this.parent)==null?void 0:m.path)??""}${o}${t}`:h)}static toPath(...t){return t.flatMap(h=>h.split(o).filter(Boolean)).join(o)}}const r={SQL:".sql",PY:".py",CSV:".csv",YAML:".yaml",YML:".yml",None:""};class P extends c{constructor(t,h){super(t!=null&&t.isModel?t.initial:{...t,extension:(t==null?void 0:t.extension)??r.SQL,content:(t==null?void 0:t.content)??""},h);s(this,"_content","");s(this,"content");s(this,"extension");s(this,"isFormatted");this.extension=(t==null?void 0:t.extension)??this.initial.extension??"",this._content=this.content=(t==null?void 0:t.content)??this.initial.content??"",this.isFormatted=t==null?void 0:t.isFormatted}get basename(){return this.name.replace(this.extension,"")}get isSynced(){return a(p(this._content))}get isEmpty(){return p(this.content)}get isChanged(){return this.content!==this._content}get isSQL(){return this.extension===r.SQL}get fingerprint(){return this._content+this.name+this.path}removeChanges(){this.content=this._content}copyName(){return`Copy of ${this.name.split(this.extension)[0]??""}__${u()}${this.extension}`}updateContent(t=""){(this.isSynced||a(this.isChanged))&&(this.content=t),this._content=t}update(t){x(t)?this.updateContent(""):(this.extension=t.extension??r.None,this.updateContent(t.content??""))}}export{r as E,P as M,c as a};
