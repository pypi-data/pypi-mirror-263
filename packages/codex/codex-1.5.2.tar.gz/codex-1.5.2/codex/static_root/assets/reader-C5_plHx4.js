function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/pdf-doc-Ba9ow1e-.js","assets/admin-drawer-panel-DUIS97I8.js","assets/admin-drawer-panel-CsBUDBLE.css","assets/main-CWVbF8zM.js","assets/main-CacfwsKA.css","assets/VToolbar-_0Wvb2vs.js","assets/index-DUjeNg4x.js","assets/confirm-footer-DK40GINK.js","assets/confirm-footer-VFepxcJs.css","assets/change-password-dialog-F3sfkpZ6.js","assets/VSlideGroup-D201p9z_.js","assets/VSelectionControl-Dv_nBx-5.js","assets/VSelectionControl-BFq--28I.css","assets/VSlideGroup-Z7BhHtYB.css","assets/change-password-dialog-BRmvkNir.css","assets/VToolbar-C5QbEltS.css","assets/pdf-doc-CMzaSV_K.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{u as d,c as j,d as et,S as tt,V as ot,a as st,e as nt,h as at,i as rt,_ as _e}from"./VToolbar-_0Wvb2vs.js";import{_ as H,a as fe,b as be,P as it,c as ve,V as ne}from"./metadata-dialog-DKGh0MEn.js";import{ax as S,M as w,N as v,_ as k,R as u,O as g,P as c,aa as p,ae as f,L as i,ad as P,aB as C,bj as lt,bf as ct,be as x,ay as b,aK as dt,b7 as z,bk as we,Q as L,ab as A,bl as ut,bm as ht,aD as r,am as J,aC as oe,bn as Pe,aA as Se,az as W,al as E,a9 as se,bc as pt,bo as gt,bp as mt,bq as kt,br as _t,ag as q,bs as ft,k as N,ak as Z,bt,bu as vt,af as ae,a$ as wt,bv as Pt,bw as St,bx as yt,by as Ct,bz as Rt,bA as Tt,aH as Bt,aI as Dt,aT as re,m as ie,bB as Lt,bh as le,bC as It}from"./admin-drawer-panel-DUIS97I8.js";import{_ as $t,a as ye,u as Vt,C as Et}from"./main-CWVbF8zM.js";import{V as Ce,a as Re}from"./VWindowItem-D5GjOCct.js";import{b as Ot,V as xt}from"./VSelect-CZufOuDi.js";import{V as F,a as Y}from"./VRadioGroup-Bozw2p_1.js";import{V as X}from"./VCheckbox-CIImgJ1M.js";import{V as Nt,a as At,b as Ft,c as Ut}from"./VExpansionPanel-BULgocde.js";import{V as Mt}from"./VMain-BhPxl6Q7.js";import"./index-DUjeNg4x.js";import"./confirm-footer-DK40GINK.js";import"./change-password-dialog-F3sfkpZ6.js";import"./VSlideGroup-D201p9z_.js";import"./VSelectionControl-Dv_nBx-5.js";import"./to-case-kUm8NPpW.js";import"./VCheckboxBtn-ByXBODq8.js";const zt={name:"ReaderNavButton",components:{PaginationNavButton:H},props:{value:{type:Number,required:!0},twoPages:{type:Boolean,default:!1}},computed:{...S(d,["isVertical"]),...w(d,{storePage:e=>e.page,toRoute(e){if(!this.isVertical)return{params:{pk:e.books.current.pk,page:this.value}}}}),title(){return"to page "+this.value},disabled(){return this.value===this.storePage||this.twoPages&&!!(this.value%2)&&this.value-1===this.storePage}},methods:{...v(d,["setActivePage"]),onClick(){this.isVertical&&this.setActivePage(this.value,!0)}}};function Wt(e,t,s,n,l,o){const a=H;return u(),g(a,{key:e.isVertical,disabled:o.disabled,title:o.title,to:e.toRoute,onClick:o.onClick},{default:c(()=>[p(f(s.value),1)]),_:1},8,["disabled","title","to","onClick"])}const Te=k(zt,[["render",Wt]]),qt={name:"ReaderBookChangeNavButton",components:{PaginationNavButton:H},props:{direction:{type:String,required:!0}},computed:{...S(d,["isBTT"]),...w(d,{toRoute(e){var s;const t=(s=e==null?void 0:e.routes)==null?void 0:s.books[this.direction];return t?{params:{...t}}:""}}),title(){return(this.direction==="prev"?"Previous":"Next")+" Book"},icon(){return this.bookChangeIcon(this.direction)},disabled(){return!this.toRoute}},methods:{...v(d,["bookChangeIcon"])}};function Ht(e,t,s,n,l,o){const a=H;return u(),g(a,{icon:"",variant:"plain",disabled:o.disabled,title:o.title,to:e.toRoute},{default:c(()=>[i(P,null,{default:c(()=>[p(f(o.icon),1)]),_:1})]),_:1},8,["disabled","title","to"])}const Be=k(qt,[["render",Ht]]),U="prev",M="next",Gt={name:"ReaderNavToolbar",components:{PaginationSlider:fe,ReaderNavButton:Te,PaginationToolbar:be,ReaderBookChangeNavButton:Be},computed:{...S(d,["activeSettings","isReadInReverse","isVertical"]),...w(d,{storePage:e=>e.page,key(e){var t,s;return`${(s=(t=e.books)==null?void 0:t.current)==null?void 0:s.pk}:${this.step}:${this.isReadInReverse}`},maxPage:e=>{var t,s;return((s=(t=e.books)==null?void 0:t.current)==null?void 0:s.maxPage)||0}}),twoPages(){return this.activeSettings.twoPages},step(){return this.activeSettings.twoPages?2:1},trackColor(){return this.twoPages&&+this.storePage>=this.maxPage-1?this.$vuetify.theme.current.colors.primary:""},min(){return this.isReadInReverse?this.maxPage:0},max(){return this.isReadInReverse?0:this.maxPage},bookPrev(){return this.isReadInReverse?"next":"prev"},bookNext(){return this.isReadInReverse?"prev":"next"}},mounted(){document.addEventListener("keyup",this._keyListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyListener)},methods:{...v(d,["routeToBook","routeToDirection","routeToDirectionOne","routeToPage","setActivePage"]),onSliderUpdate(e){this.isVertical?this.setActivePage(e,!0):this.routeToPage(e)},_keyListener(e){switch(e.stopPropagation(),e.key){case" ":!e.shiftKey&&window.innerHeight+window.scrollY+1>=document.body.scrollHeight?this.routeToDirection(M):e.shiftKey&&window.scrollY===0&&this.routeToDirection(U);break;case"j":case"ArrowRight":this.routeToDirection(M);break;case"k":case"ArrowLeft":this.routeToDirection(U);break;case",":this.routeToDirectionOne(U);break;case".":this.routeToDirectionOne(M);break;case"n":this.routeToBook(M);break;case"p":this.routeToBook(U);break}}}};function Kt(e,t,s,n,l,o){const a=Be,h=Te,m=fe,T=be;return e.maxPage?(u(),g(T,{key:0},{default:c(()=>[i(a,{direction:o.bookPrev},null,8,["direction"]),i(h,{value:o.min,"two-pages":o.twoPages},null,8,["value","two-pages"]),(u(),g(m,{key:e.key,"model-value":e.storePage,min:0,max:e.maxPage,step:o.step,"track-color":o.trackColor,reverse:e.isReadInReverse,"onUpdate:modelValue":t[0]||(t[0]=$=>o.onSliderUpdate($))},null,8,["model-value","max","step","track-color","reverse"])),i(h,{value:o.max,"two-pages":o.twoPages},null,8,["value","two-pages"]),i(a,{direction:o.bookNext},null,8,["direction"])]),_:1})):C("",!0)}const De=k(Gt,[["render",Kt]]),y={addEventListeners(e,t,s){for(let n=0,l=t.length;n<l;n++)e.addEventListener(t[n],s,{passive:!1})},removeEventListeners(e,t,s){for(let n=0,l=t.length;n<l;n++)e.removeEventListener(t[n],s,{passive:!1})},emitEvent:function(e,t,s){if(e.componentInstance)e.componentInstance.$emit(t,s);else{let n=new window.CustomEvent(t,{detail:s});e.el.dispatchEvent(n)}}},Q=["mousedown","touchstart"],ee=["mousemove","touchmove"],te=["mouseup","touchend"],ce=function(e,t,s){let n=e,l=!0,o=window;typeof t.value=="boolean"?l=t.value:typeof t.value=="object"?(typeof t.value.target=="string"?(n=e.querySelector(t.value.target),n||console.error("There is no element with the current target value.")):typeof t.value.target<"u"&&console.error(`The parameter "target" should be either 'undefined' or 'string'.`),typeof t.value.container=="string"?(o=document.querySelector(t.value.container),o||console.error("There is no element with the current container value.")):typeof t.value.container<"u"&&console.error(`The parameter "container" should be be either 'undefined' or 'string'.`),typeof t.value.active=="boolean"?l=t.value.active:typeof t.value.active<"u"&&console.error(`The parameter "active" value should be either 'undefined', 'true' or 'false'.`)):typeof t.value<"u"&&console.error("The passed value should be either 'undefined', 'true' or 'false' or 'object'.");const a=function(m,T){o===window?window.scrollBy(m,T):(o.scrollLeft+=m,o.scrollTop+=T)},h=function(){let m,T,$,O=!1;n.md=function(_){const V=_ instanceof window.MouseEvent,B=V?_.pageX:_.touches[0].pageX,D=V?_.pageY:_.touches[0].pageY,I=document.elementFromPoint(B-window.pageXOffset,D-window.pageYOffset),K=t.arg==="nochilddrag",He=t.modifiers.noleft,Ge=t.modifiers.noright,Ke=t.modifiers.nomiddle,je=t.modifiers.noback,Ye=t.modifiers.noforward,Xe=t.arg==="firstchilddrag",Je=I===n,Ze=I===n.firstChild,Qe=K?typeof(I==null?void 0:I.dataset.dragscroll)<"u":typeof(I==null?void 0:I.dataset.noDragscroll)>"u";if(!(!Je&&(!Qe||Xe&&!Ze))&&!(_.button===0&&He)){if(_.button===1&&Ke||_.button===2&&Ge||_.button===3&&je||_.button===4&&Ye)return;$=1,m=V?_.clientX:_.touches[0].clientX,T=V?_.clientY:_.touches[0].clientY}},n.mu=function(_){$=0,O&&y.emitEvent(s,"dragscrollend"),O=!1},n.mm=function(_){const V=_ instanceof window.MouseEvent;let B,D;if($){_.preventDefault(),O||y.emitEvent(s,"dragscrollstart"),O=!0;const I=n.scrollLeft+n.clientWidth>=n.scrollWidth||n.scrollLeft===0,K=n.scrollTop+n.clientHeight>=n.scrollHeight||n.scrollTop===0;B=-m+(m=V?_.clientX:_.touches[0].clientX),D=-T+(T=V?_.clientY:_.touches[0].clientY),t.modifiers.pass?(n.scrollLeft-=t.modifiers.y?-0:B,n.scrollTop-=t.modifiers.x?-0:D,n===document.body&&(n.scrollLeft-=t.modifiers.y?-0:B,n.scrollTop-=t.modifiers.x?-0:D),(I||t.modifiers.y)&&a(-B,0),(K||t.modifiers.x)&&a(0,-D)):(t.modifiers.x&&(D=-0),t.modifiers.y&&(B=-0),n.scrollLeft-=B,n.scrollTop-=D,n===document.body&&(n.scrollLeft-=B,n.scrollTop-=D)),y.emitEvent(s,"dragscrollmove",{deltaX:-B,deltaY:-D})}},y.addEventListeners(n,Q,n.md),y.addEventListeners(window,te,n.mu),y.addEventListeners(window,ee,n.mm)};l?document.readyState==="complete"?h():window.addEventListener("load",h):(y.removeEventListeners(n,Q,n.md),y.removeEventListeners(window,te,n.mu),y.removeEventListeners(window,ee,n.mm))},jt=e=>{const t=e;y.removeEventListeners(t,Q,t.md),y.removeEventListeners(window,te,t.mu),y.removeEventListeners(window,ee,t.mm)},Le={mounted:(e,t,s)=>ce(e,t,s),updated:(e,t,s)=>{JSON.stringify(t.value)!==JSON.stringify(t.oldValue)&&ce(e,t,s)},unmounted:e=>jt(e)};typeof window<"u"&&window.Vue&&(window.VueDragscroll=Le);const Yt=.5,Xt={name:"ScaleForScroll",directives:{dragscroll:Le},emits:["click"],data(){return{mdiMagnifyMinusOutline:lt}},computed:{...w(d,{scale:e=>e.clientSettings.scale}),showReset(){return this.scale!=j},style(){return{cursor:this.scale==j?"zoom-in":"all-scroll"}}},methods:{...v(d,["setSettingsClient"]),clearSelection(){window.getSelection&&window.getSelection().removeAllRanges()},onDoubleClick(){this.clearSelection();const e=this.scale+Yt;this.setSettingsClient({scale:e})},scaleReset(){this.setSettingsClient({scale:j})}}};function Jt(e,t,s,n,l,o){const a=ct("dragscroll");return x((u(),b("div",{class:"scaleForScroll",style:we(o.style),onDblclick:t[0]||(t[0]=(...h)=>o.onDoubleClick&&o.onDoubleClick(...h))},[dt(e.$slots,"default",{},void 0,!0),o.showReset?(u(),g(P,{key:0,class:"resetIcon",onClick:z(o.scaleReset,["stop"])},{default:c(()=>[p(f(l.mdiMagnifyMinusOutline),1)]),_:1},8,["onClick"])):C("",!0)],36)),[[a]])}const G=k(Xt,[["render",Jt],["__scopeId","data-v-c50b9a51"]]),Zt={name:"LoadingPage",components:{Placeholder:it},props:{twoPages:{type:Boolean,required:!0}}};function Qt(e,t,s,n,l,o){const a=L("Placeholder");return u(),b("div",{class:A(["pageLoading",{twoPages:s.twoPages}])},[i(a,{class:"pagePlaceholder"})],2)}const eo=k(Zt,[["render",Qt],["__scopeId","data-v-04027168"]]),de="unauthorized",to={name:"ErrorPage",props:{twoPages:{type:Boolean,required:!0},type:{type:String,required:!0}},computed:{text(){return this.type===de?"Protected page":"Failed to load page"},icon(){return this.type===de?ut:ht}}},oo={class:"pageErrorContainer"},so={class:"pageErrorText"};function no(e,t,s,n,l,o){return u(),b("div",{class:A(["pageError",{twoPages:s.twoPages}])},[r("div",oo,[r("div",so,f(o.text),1),i(P,{class:"pageErrorIcon"},{default:c(()=>[p(f(o.icon),1)]),_:1})])],2)}const ao=k(to,[["render",no],["__scopeId","data-v-cea0843d"]]),ro={name:"ImgPage",props:{book:{type:Object,required:!0},src:{type:String,required:!0}},emits:["load","error"],computed:{...w(d,{scale:e=>e.clientSettings.scale}),style(){const e={};if(this.scale==1)return e;const t=this.$el;if(!(t!=null&&t.naturalWidth))return e;const s=t.naturalWidth/2;return e.transformOrigin=`${s}px top`,e.transform=`scale(${this.scale})`,e},classes(){return this.fitToClass(this.book)}},methods:{...v(d,["fitToClass"])}},io=["src"];function lo(e,t,s,n,l,o){return u(),b("img",J({class:[o.classes,"img"],src:s.src,style:o.style},e.$attrs,{onError:t[0]||(t[0]=a=>e.$emit("error",a)),onLoad:t[1]||(t[1]=a=>e.$emit("load",a))}),null,16,io)}const ue=k(ro,[["render",lo],["__scopeId","data-v-4d80e33e"]]),he=oe(Pe(()=>$t(()=>import("./pdf-doc-Ba9ow1e-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])))),co=333,uo={name:"BookPage",components:{ErrorPage:ao,LoadingPage:eo,PDFDoc:he,ImgPage:ue},props:{book:{type:Object,required:!0},page:{type:Number,required:!0}},data(){return{showProgress:!1,loaded:!1,error:!1}},computed:{...S(d,["isVertical"]),...w(d,{scale:e=>e.clientSettings.scale}),style(){var s;const e={};if(this.book.fileType==="PDF"||this.scale==1)return e;const t=(s=this.$refs.pageComponent)==null?void 0:s.$el;return t!=null&&t.naturalHeight&&(e.height=t.naturalHeight*this.scale+"px",e.width=t.naturalWidth*this.scale+"px"),e},src(){const e={pk:this.book.pk,page:this.page,mtime:this.book.mtime};return et(e)},component(){return this.book.fileType==="PDF"?he:ue},settings(){return this.getSettings(this.book)}},mounted(){setTimeout(function(){this.loaded||(this.loading=!0)},co)},methods:{...v(d,["getSettings"]),onLoad(){this.showProgress=!1,this.loaded=!0,this.error=!1},onError(){this.error="load",this.showProgress=!1},onUnauthorized(){this.error="unauthorized",this.showProgress=!1}}},ho=["id","data-page"];function po(e,t,s,n,l,o){const a=L("ErrorPage"),h=L("LoadingPage");return u(),b("div",{id:`page${s.page}`,"data-page":s.page,class:"page",style:we(o.style)},[l.error?(u(),g(a,{key:0,"two-pages":o.settings.twoPages,type:l.error},null,8,["two-pages","type"])):l.showProgress&&!l.loaded?(u(),g(h,{key:1,"two-pages":o.settings.twoPages},null,8,["two-pages"])):(u(),g(Se(o.component),{key:2,ref:"pageComponent",book:s.book,page:1,src:o.src,onError:o.onError,onLoad:o.onLoad,onUnauthorized:o.onUnauthorized},null,40,["book","src","onError","onLoad","onUnauthorized"]))],12,ho)}const Ie=k(uo,[["render",po],["__scopeId","data-v-87996fa1"]]),go={name:"HorizontalPages",components:{BookPage:Ie,ScaleForScroll:G},props:{book:{type:Object,required:!0},page:{type:Number,required:!0}},emits:["click"],computed:{...S(d,["isCoverPage","isReadInReverse"]),showSecondPage(){return this.getSettings(this.book).twoPages&&this.page<this.book.maxPage&&!this.isCoverPage(this.book,this.page)},showPageOne(){return!this.isReadInReverse||this.showSecondPage},showPageTwo(){return this.isReadInReverse||this.showSecondPage},pageOne(){return this.isReadInReverse?this.page+1:this.page},pageTwo(){return this.isReadInReverse?this.page:this.page+1}},methods:{...v(d,["getSettings"])}};function mo(e,t,s,n,l,o){const a=L("BookPage"),h=G;return u(),g(h,{class:"noWrap"},{default:c(()=>[o.showPageOne?(u(),g(a,{key:0,ref:"pageOne",book:s.book,page:o.pageOne,class:"horizontalPage"},null,8,["book","page"])):C("",!0),o.showPageTwo?(u(),g(a,{key:1,book:s.book,page:o.pageTwo,class:"horizontalPage"},null,8,["book","page"])):C("",!0)]),_:1})}const $e=k(go,[["render",mo],["__scopeId","data-v-9a560964"]]),ko={name:"PageChangeLink",props:{direction:{type:String,required:!0}},head(){return this.prefetchLinks(this.params,this.computedDirection)},computed:{...S(d,["isVertical","isFirstPage","isLastPage"]),...w(d,{params(e){return e.routes[this.computedDirection]}}),computedDirection(){return this.normalizeDirection(this.direction)},show(){return this.computedDirection==="prev"?!this.isFirstPage:!this.isLastPage},pageChangeClass(){let e="pageChange";return e+=this.isVertical?"Row":"Column",e},directionClass(){let e=this.direction;return this.isVertical&&(e+="Vertical"),e},route(){return this.toRoute(this.params)},label(){return this.linkLabel(this.computedDirection,"Page")}},methods:{...v(d,["getSettings","linkLabel","normalizeDirection","prefetchLinks","toRoute"])}};function _o(e,t,s,n,l,o){const a=L("router-link");return o.show?(u(),g(a,{key:0,to:o.route,"aria-label":o.label,class:A({[o.pageChangeClass]:!0,[o.directionClass]:!0}),onClick:t[0]||(t[0]=h=>h.stopImmediatePropagation())},null,8,["to","aria-label","class"])):C("",!0)}const Ve=k(ko,[["render",_o],["__scopeId","data-v-9ade7d96"]]),fo=48,bo=48,vo={name:"PagerHorizontal",components:{HorizontalPages:$e,PageChangeLink:Ve},props:{book:{type:Object,required:!0}},data(){return{activePage:0,pages:[]}},computed:{...S(d,["isReadInReverse"]),...w(d,{prevBook:e=>{var t;return(t=e.routes.books)==null?void 0:t.prev},nextBook:e=>{var t;return(t=e.routes.books)==null?void 0:t.next},storePage:e=>e.page,storePk:e=>e.books.current.pk}),twoPages(){return this.getSettings(this.book).twoPages},windowIndex(){const e=this.activePage-this.pages[0];return Math.min(Math.max(0,e),this.book.maxPage)}},watch:{twoPages(){this.setActivePage(this.storePage,!0)},storePage(e){if(this.book.pk===this.storePk){this.activePage=e;const t=this.pages.at(0),s=this.pages.at(-1);(e<t||e>s)&&this.setPages()}},prevBook(e){this.book.pk===e.pk&&(this.activePage=this.book.maxPage)},nextBook(e){this.book.pk===e.pk&&(this.activePage=0)}},created(){this.book.pk===this.storePk?this.activePage=+this.$route.params.page:this.book.pk===this.prevBook.pk?this.activePage=this.book.maxPage:this.activePage=0,this.setPages()},methods:{...v(d,["getSettings","setBookChangeFlag","setActivePage"]),setPages(){const e=Math.max(this.activePage-fo,0),t=Math.min(this.activePage+bo,this.book.maxPage),s=ye.range(e,t+1);this.pages=s}}};function wo(e,t,s,n,l,o){const a=Ve,h=$e;return u(),g(Re,{"show-arrows":"",continuous:"","model-value":o.windowIndex,reverse:e.isReadInReverse},{prev:c(()=>[i(a,{direction:"prev"})]),next:c(()=>[i(a,{direction:"next"})]),default:c(()=>[(u(!0),b(E,null,W(l.pages,m=>(u(),g(Ce,{key:`c/${s.book.pk}/${m}`,class:"windowItem",disabled:"",eager:m>=e.storePage-1&&m<=e.storePage+2,"model-value":m,transition:!0},{default:c(()=>[i(h,{book:s.book,page:m},null,8,["book","page"])]),_:2},1032,["eager","model-value"]))),128))]),_:1},8,["model-value","reverse"])}const pe=k(vo,[["render",wo],["__scopeId","data-v-e04bbc00"]]);function Ee(e,t){const{self:s=!1}=t.modifiers??{},n=t.value,l=typeof n=="object"&&n.options||{passive:!0},o=typeof n=="function"||"handleEvent"in n?n:n.handler,a=s?e:t.arg?document.querySelector(t.arg):window;a&&(a.addEventListener("scroll",o,l),e._onScroll=Object(e._onScroll),e._onScroll[t.instance.$.uid]={handler:o,options:l,target:s?void 0:a})}function Oe(e,t){var o;if(!((o=e._onScroll)!=null&&o[t.instance.$.uid]))return;const{handler:s,options:n,target:l=e}=e._onScroll[t.instance.$.uid];l.removeEventListener("scroll",s,n),delete e._onScroll[t.instance.$.uid]}function Po(e,t){t.value!==t.oldValue&&(Oe(e,t),Ee(e,t))}const So={mounted:Ee,unmounted:Oe,updated:Po},yo=12,ge=250,Co={name:"PagerVertical",components:{BookPage:Ie,ScaleForScroll:G},props:{book:{type:Object,required:!0}},data(){return{innerHeight:window.innerHeight,innerWidth:window.innerWidth,intersectorOn:!1,programmaticScroll:!1}},computed:{...w(d,{storePage:e=>e.page}),...se(d,["reactWithScroll"]),settings(){return this.getSettings(this.book)},readInReverse(){return this.settings.readInReverse},items(){var s;const e=((s=this.book)==null?void 0:s.maxPage)+1,t=ye.range(0,e);return this.readInReverse&&t.reverse(),t},visibleItems(){var e;return Math.min(((e=this.book)==null?void 0:e.maxPage)??0,yo)}},watch:{storePage(e){this.reactWithScroll&&this.scrollToPage(e)}},mounted(){window.addEventListener("resize",this.onResize),setTimeout(()=>{this.scrollToPage(this.storePage)},ge)},beforeUnmount(){window.removeEventListener("resize",this.onResize)},methods:{...v(d,["setActivePage","setBookChangeFlag","getSettings"]),onIntersect(e,t){if(e&&this.intersectorOn){const n=+t[0].target.dataset.page;this.setActivePage(n,!1)}},onScroll(){if(this.programmaticScroll)return;this.intersectorOn=!0;const e=this.$refs.verticalScroll.$el,t=e.scrollTop;if(this.storePage===0&&t===0)this.setBookChangeFlag("prev");else if(this.storePage===this.book.maxPage){const s=e.scrollTopMax||e.scrollHeight-e.clientTop;window.innerHeight+t+1>=s&&this.setBookChangeFlag("next")}},scrollToPage(e){this.intersectorOn=!1,this.programmaticScroll=!0;const t=this.$refs.verticalScroll;t?t.scrollToIndex(e):console.debug("Can't find verticalScroll component."),setTimeout(()=>{this.programmaticScroll=!1},ge)},onResize(){this.innerHeight=window.innerHeight,this.innerWidth=window.innerWidth}}},Ro=["data-page"];function To(e,t,s,n,l,o){const a=L("BookPage"),h=G;return u(),g(h,null,{default:c(()=>[x((u(),g(Ot,{id:"verticalScroll",key:o.readInReverse,ref:"verticalScroll",items:o.items,height:l.innerHeight,width:l.innerWidth},{default:c(({item:m})=>[i(a,{book:s.book,page:m,class:"verticalPage"},null,8,["book","page"]),x(r("div",{class:"pageTracker","data-page":m},null,8,Ro),[[pt,{handler:o.onIntersect,options:{threshold:[.75]}},void 0,{quiet:!0}]])]),_:1},8,["items","height","width"])),[[So,o.onScroll,"#verticalScroll"]])]),_:1})}const me=k(Co,[["render",To],["__scopeId","data-v-0836627c"]]),ke=oe(Pe(()=>"@/components/reader/pager/pager-full-pdf.vue")),Bo={name:"PagerSelector",components:{PagerHorizontal:pe,PagerPDF:ke,PagerVertical:me},props:{book:{type:Object,required:!0}},emits:["click"],head(){return this.prefetchBook(this.book)},computed:{...S(d,["isVertical","cacheBook"]),...w(d,{storePk:e=>{var t,s;return((s=(t=e.books)==null?void 0:t.current)==null?void 0:s.pk)||0}}),readFullPdf(){return this.book.fileType=="PDF"&&this.cacheBook},component(){return this.readFullPdf?ke:this.isVertical?me:pe}},watch:{$route(e){+e.params.pk===this.book.pk&&this.setActivePage(+e.params.page,!0)}},created(){this.book.pk===this.storePk&&this.setActivePage(+this.$route.params.page,!0)},methods:{...v(d,["getSettings","setActivePage","prefetchBook"])}};function Do(e,t,s,n,l,o){return u(),g(Se(o.component),{book:s.book},null,8,["book"])}const xe=k(Bo,[["render",Do]]),Lo={name:"BookChangeActivator",props:{direction:{type:String,required:!0}},computed:{computedDirection(){return this.normalizeDirection(this.direction)},positionClass(){return this.bookChangeLocation(this.direction)+"Pos"},cursorClass(){return this.bookChangeCursorClass(this.direction)},show(){return this.bookChangeShow(this.computedDirection)}},methods:{...v(d,["setBookChangeFlag","normalizeDirection","bookChangeLocation","bookChangeCursorClass","bookChangeShow"])}};function Io(e,t,s,n,l,o){return o.show?(u(),b("div",{key:0,class:A(["bookChangeColumn",{[o.positionClass]:!0,[o.cursorClass]:!0}]),onClick:t[0]||(t[0]=z(a=>e.setBookChangeFlag(s.direction),["stop"]))},null,2)):C("",!0)}const Ne=k(Lo,[["render",Io],["__scopeId","data-v-2b81f2ae"]]),$o={name:"BooksWindow",components:{BookChangeActivator:Ne,Pager:xe},emits:["click"],computed:{...S(d,["isBTT"]),...w(d,{books:e=>[e.books.prev,e.books.current,e.books.next].filter(Boolean),bookChange:e=>e.bookChange,currentBookPk:e=>{var t,s;return((s=(t=e.books)==null?void 0:t.current)==null?void 0:s.pk)||0},bookRoutes:e=>e.routes.books})},watch:{$route(e,t){(!t||!t.params||+e.params.pk!=+t.params.pk)&&this.loadBooks(e.params)}},beforeMount(){this.setBookChangeFlag(),this.loadBooks(this.$route.params)},methods:{...v(d,["setBookChangeFlag","loadBooks"]),click(){this.setBookChangeFlag(),this.$emit("click")},eager(e){return this.bookChange&&this.bookRoutes[this.bookChange]&&this.bookRoutes[this.bookChange].pk===e}}};function Vo(e,t,s,n,l,o){const a=Ne,h=xe;return u(),g(Re,{id:"booksWindow",direction:"vertical","model-value":e.currentBookPk,reverse:e.isBTT,"show-arrows":"",onClick:o.click},{prev:c(()=>[i(a,{direction:"prev"})]),next:c(()=>[i(a,{direction:"next"})]),default:c(()=>[(u(!0),b(E,null,W(e.books,m=>(u(),g(Ce,{key:`c/${m.pk}`,class:"windowItem",disabled:"",eager:o.eager(m.pk),value:m.pk,transition:!0},{default:c(()=>[i(h,{book:m,onClick:o.click},null,8,["book","onClick"])]),_:2},1032,["eager","value"]))),128))]),_:1},8,["model-value","reverse","onClick"])}const Ae=k($o,[["render",Vo],["__scopeId","data-v-2a90783e"]]),Eo={a:mt,f:kt,s:_t},Oo={a:"Story Arc",f:"Folder",s:"Series"},xo={name:"ReaderArcSelect",computed:{...w(d,{arcGroup:e=>{var t;return((t=e.arc)==null?void 0:t.group)||"s"},arcName:e=>{for(const t of e.arcs)if(e.arc.group===t.group&&e.arc.pk===t.pk)return t.name;return"Unknown"},arcKey:e=>`${e.arc.group}:${e.arc.pk}`,arcItems:e=>{const t=[];for(const s of e.arcs){const n={value:`${s.group}:${s.pk}`,title:s.name,group:s.group};t.push(n)}return t},arcPosition:function(e){const t=e.arc;return t&&t.index&&t.count?`${t.index}/${t.count}`:""}}),arc:{get(){return this.arcKey},set(e){const t=this.$route.params;if(!t)return;const[s,n]=e.split(":"),l={...t,arcGroup:s,arcPk:n};this.loadBooks(l)}}},methods:{...v(d,["loadBooks"]),arcIcon(e){return Eo[e]},arcLabel(e){return Oo[e]},checkIcon(e){return e===this.arc?gt:""}}},No={key:2,id:"arcPosition"};function Ao(e,t,s,n,l,o){return u(),b(E,null,[e.arcItems.length>1?(u(),g(xt,{key:0,modelValue:o.arc,"onUpdate:modelValue":t[0]||(t[0]=a=>o.arc=a),class:"arcSelect",density:"compact","hide-details":"auto",label:"Order",variant:"plain",items:e.arcItems},{item:c(({item:a,props:h})=>[i(q,J(h,{density:"compact",variant:"plain","prepend-icon":o.arcIcon(a.raw.group),subtitle:o.arcLabel(a.raw.group),"append-icon":o.checkIcon(h.value)}),null,16,["prepend-icon","subtitle","append-icon"])]),selection:c(({item:a,props:h})=>[i(q,J(h,{density:"compact",variant:"plain"}),{default:c(()=>[i(P,null,{default:c(()=>[p(f(o.arcIcon(a.raw.group)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])):(u(),g(P,{key:1,id:"onlyArc",title:e.arcName},{default:c(()=>[p(f(o.arcIcon(e.arcGroup)),1)]),_:1},8,["title"])),e.arcPosition?(u(),b("span",No,f(e.arcPosition),1)):C("",!0)],64)}const Fe=k(xo,[["render",Ao],["__scopeId","data-v-90090a3c"]]),Fo={name:"ReaderTitleToolbar",components:{MetadataDialog:ve,ReaderArcSelect:Fe,SettingsDrawerButton:tt},data(){return{mdiClose:ft,routeChanged:!1}},head(){return{meta:[{hid:"description",name:"description",content:`reader ${this.activeTitle} page ${this.storePage}`}]}},computed:{...S(d,["activeTitle"]),...w(d,{currentBook:e=>{var t;return((t=e.books)==null?void 0:t.current)||{}}}),...w(Vt,{lastRoute:e=>e.page.routes.last}),...se(N,["isSettingsDrawerOpen"]),closeBookRoute:function(){var t;const e={name:"browser",params:this.lastRoute};return e.params?e.hash=`#card-${(t=this.currentBook)==null?void 0:t.pk}`:e.params=window.CODEX.LAST_ROUTE||Et.browser.route,e}},watch:{$route(e,t){t&&(this.routeChanged=!0)}},mounted(){document.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyUpListener)},methods:{...v(N,["setTimestamp"]),...v(d,["routeToDirection","routeToDirectionOne","routeToBook","setBookChangeFlag"]),openMetadata(){this.$refs.metadataDialog.dialog=!0},onCloseBook(){this.routeChanged&&this.setTimestamp()},_keyUpListener(e){switch(e.stopPropagation(),e.key){case"Escape":this.$refs.closeBook.$el.click();break;case"m":this.openMetadata();break}}}},Uo={key:0};function Mo(e,t,s,n,l,o){const a=Fe,h=ve,m=L("SettingsDrawerButton");return u(),g(st,{id:"readerTopToolbar",class:"codexToolbar",density:"compact"},{default:c(()=>[i(ne,null,{default:c(()=>[i(Z,{id:"closeBook",ref:"closeBook",to:o.closeBookRoute,size:"large",onClick:o.onCloseBook},{default:c(()=>[e.$vuetify.display.smAndDown?(u(),g(P,{key:1,title:"Close Book"},{default:c(()=>[p(f(l.mdiClose),1)]),_:1})):(u(),b("span",Uo,"close book"))]),_:1},8,["to","onClick"])]),_:1}),i(ot,{id:"toolbarTitle",class:"codexToolbarTitle"},{default:c(()=>[p(f(e.activeTitle),1)]),_:1}),i(ne,null,{default:c(()=>[i(a),i(Z,{id:"tagButton",onClick:z(o.openMetadata,["stop"])},{default:c(()=>[i(h,{ref:"metadataDialog",group:"c",book:e.currentBook},null,8,["book"])]),_:1},8,["onClick"]),i(m,{id:"settingsButton",onClick:t[0]||(t[0]=z(T=>e.isSettingsDrawerOpen=!0,["stop"]))})]),_:1})]),_:1})}const Ue=k(Fo,[["render",Mo],["__scopeId","data-v-5d12ffc0"]]),zo={name:"BookChangeDrawer",props:{direction:{type:String,required:!0}},head(){if(this.isDrawerOpen)return this.prefetchLinks(this.params,this.computedDirection,!0)},computed:{...S(d,["isBTT"]),...w(d,{computedDirection(){return this.normalizeDirection(this.direction)},params(e){return e.routes.books[this.computedDirection]},isDrawerOpen(e){return e.bookChange===this.computedDirection},icon(){return this.bookChangeIcon(this.computedDirection)}}),drawerLocation(){return this.bookChangeLocation(this.direction)},cursorClass(){return this.bookChangeCursorClass(this.computedDirection)},show(){return this.bookChangeShow(this.computedDirection)},route(){return this.toRoute(this.params)},label(){return this.linkLabel(this.computedDirection,"Book")}},methods:{...v(d,["getSettings","linkLabel","normalizeDirection","prefetchLinks","toRoute","bookChangeLocation","bookChangeCursorClass","bookChangeShow","bookChangeIcon"])}};function Wo(e,t,s,n,l,o){const a=L("router-link");return o.show?(u(),g(nt,{key:0,class:"bookChangeDrawer","disable-resize-watcher":"","disable-route-watcher":"",location:o.drawerLocation,"model-value":e.isDrawerOpen,scrim:!1,temporary:"",touchless:""},{default:c(()=>[i(a,{class:A({navLink:!0,[o.cursorClass]:!0}),to:o.route,"aria-label":o.label,title:o.label,onClick:t[0]||(t[0]=h=>h.stopImmediatePropagation())},{default:c(()=>[i(P,{class:"bookChangeIcon"},{default:c(()=>[p(f(e.icon),1)]),_:1})]),_:1},8,["class","to","aria-label","title"])]),_:1},8,["location","model-value"])):C("",!0)}const Me=k(zo,[["render",Wo],["__scopeId","data-v-457facfc"]]),qo={name:"DownloadPanel",data(){return{mdiDownload:bt,mdiFileImage:vt}},computed:{...S(d,["activeTitle","routeParams"]),...w(d,{currentBook:e=>{var t;return(t=e.books)==null?void 0:t.current},storePage:e=>e.page}),downloadURL(){return at(this.currentBook)},filename(){var e;return(e=this.currentBook)==null?void 0:e.filename},pageSrc(){const{pk:e,mtime:t}=this.currentBook;return rt({pk:e,page:this.storePage,mtime:t})},pageName(){return`${this.activeTitle} - page ${this.storePage}.jpg`}},methods:{...v(N,["downloadIOSPWAFix"]),downloadPage(){this.downloadIOSPWAFix(this.pageSrc,this.pageName)},downloadBook(){this.downloadIOSPWAFix(this.downloadURL,this.filename)}}},Ho={id:"downloadPanel"};function Go(e,t,s,n,l,o){return u(),b("div",Ho,[i(q,{onClick:o.downloadPage},{default:c(()=>[i(ae,null,{default:c(()=>[i(P,null,{default:c(()=>[p(f(l.mdiFileImage),1)]),_:1}),p("Download Page "+f(e.storePage),1)]),_:1})]),_:1},8,["onClick"]),i(q,{onClick:o.downloadBook},{default:c(()=>[i(ae,null,{default:c(()=>[i(P,null,{default:c(()=>[p(f(l.mdiDownload),1)]),_:1}),p("Download Book ")]),_:1})]),_:1},8,["onClick"])])}const ze=k(qo,[["render",Go],["__scopeId","data-v-079b7d8d"]]),We=["fitTo","readingDirection","twoPages"];Object.freeze(We);const Ko={name:"ReaderSettingsPanel",data(){return{isGlobalScope:!1,mdiOpenInNew:wt}},computed:{...S(d,["isVertical","isPDF","cacheBook"]),...w(d,{choices:e=>e.choices,selectedSettings(e){var t,s;return this.isGlobalScope||!((t=e.books)!=null&&t.current)?e.readerSettings:(s=e.books)==null?void 0:s.current.settings},isClearSettingsButtonDisabled(e){var t,s;if(this.isGlobalScope||!((t=e.books)!=null&&t.current))return!0;for(const n of We){const l=(s=e.books)==null?void 0:s.current.settings[n];if(!e.choices.nullValues.has(l))return!1}return!0},bookInBrowserURL(e){var t;return Pt((t=e.books)==null?void 0:t.current)}}),...se(d,["readRtlInReverse"]),fitToChoices(){return this.choicesWithoutNull("fitTo")},readingDirectionChoices(){return this.choicesWithoutNull("readingDirection")},disableTwoPages(){return this.isVertical||this.isPDF&&this.cacheBook},disableCacheBook(){return this.isVertical&&this.isPDF}},mounted(){document.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){document.removeEventListener("keyup",this._keyUpListener)},methods:{...v(d,["clearSettingsLocal","setSettingsGlobal","setSettingsLocal","setSettingsClient"]),settingsDialogChanged(e){this.isGlobalScope?this.setSettingsGlobal(e):this.setSettingsLocal(e)},choicesWithoutNull(e){const t=[];for(const s of this.choices[e])s.value&&t.push(s);return Object.freeze(t),t},_keyUpListener(e){e.stopPropagation();let t;switch(e.key){case"w":t={fitTo:"W"};break;case"h":t={fitTo:"H"};break;case"s":t={fitTo:"S"};break;case"o":t={fitTo:"O"};break;case"2":t={twoPages:!this.selectedSettings.twoPages};break;case"l":t={readingDirection:"ltr"};break;case"r":t={readingDirection:"rtl"};break;case"t":t={readingDirection:"ttb"};break;case"b":t={readingDirection:"bbt"};break}t&&this.setSettingsLocal(t)}}},jo={id:"readerSettings"},Yo=["href"];function Xo(e,t,s,n,l,o){return u(),b("div",jo,[i(Y,{modelValue:l.isGlobalScope,"onUpdate:modelValue":t[0]||(t[0]=a=>l.isGlobalScope=a),density:"compact",label:"Scope","hide-details":"auto"},{default:c(()=>[i(F,{label:"Only this comic",value:!1}),i(F,{label:"Default for all comics",value:!0})]),_:1},8,["modelValue"]),i(Y,{class:"displayRadioGroup",density:"compact",label:"Display","hide-details":"auto","model-value":e.selectedSettings.fitTo,"onUpdate:modelValue":t[1]||(t[1]=a=>o.settingsDialogChanged({fitTo:a}))},{default:c(()=>[(u(!0),b(E,null,W(o.fitToChoices,a=>(u(),g(F,{key:a.value,label:a.title,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"]),i(X,{disabled:o.disableTwoPages,class:"displayTwoPages",density:"compact",label:"Two pages","hide-details":"auto","model-value":e.selectedSettings.twoPages,"true-value":!0,indeterminate:e.selectedSettings.twoPages===null||e.selectedSettings.twoPages===void 0,"onUpdate:modelValue":t[2]||(t[2]=a=>o.settingsDialogChanged({twoPages:a}))},null,8,["disabled","model-value","indeterminate"]),i(Y,{class:"displayRadioGroup",density:"compact",label:"Reading Direction","hide-details":"auto","model-value":e.selectedSettings.readingDirection,"onUpdate:modelValue":t[3]||(t[3]=a=>o.settingsDialogChanged({readingDirection:a}))},{default:c(()=>[(u(!0),b(E,null,W(o.readingDirectionChoices,a=>(u(),g(F,{key:a.value,label:a.title,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"]),i(X,{"model-value":e.cacheBook,class:"cacheBook",density:"compact",disabled:o.disableCacheBook,label:"Cache Entire Book","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[4]||(t[4]=a=>e.setSettingsClient({cacheBook:a}))},null,8,["model-value","disabled"]),e.isPDF?(u(),b("a",{key:0,id:"readPDFInBrowser",href:e.bookInBrowserURL,target:"_blank"},[i(P,null,{default:c(()=>[p(f(l.mdiOpenInNew),1)]),_:1}),p("Read PDF in Browser ")],8,Yo)):C("",!0),l.isGlobalScope?(u(),g(X,{key:1,"model-value":e.selectedSettings.readRtlInReverse,class:"readRtlInReverse",density:"compact",label:"Read RTL Comics as LTR","hide-details":"auto","true-value":!0,"onUpdate:modelValue":t[5]||(t[5]=a=>o.settingsDialogChanged({readRtlInReverse:a}))},null,8,["model-value"])):C("",!0),l.isGlobalScope?C("",!0):(u(),g(Z,{key:2,id:"clearSettingsButton",disabled:e.isClearSettingsButtonDisabled,title:"Use the default settings for all comics for this comic",onClick:e.clearSettingsLocal},{default:c(()=>[p(" Clear Comic Settings ")]),_:1},8,["disabled","onClick"]))])}const qe=k(Ko,[["render",Xo],["__scopeId","data-v-953d00f1"]]),Jo={name:"KeyboardShortcutsPanel",data(){return{mdiMenuLeft:St,mdiMenuRight:yt,mdiKeyboardOutline:Ct,mdiKeyboardSpace:Rt,mdiAppleKeyboardShift:Tt}},computed:{...S(N,["isMobile"])}},R=e=>(Bt("data-v-a8b4ac47"),e=e(),Dt(),e),Zo=R(()=>r("h4",null,"Navigation",-1)),Qo={class:"highlight-table"},es=R(()=>r("td",null,"Previous page",-1)),ts=R(()=>r("td",null,"Next page",-1)),os=R(()=>r("tr",null,[r("td",null,","),r("td",null,[p("Next "),r("em",null,"only"),p(" one page in two page mode.")])],-1)),ss=R(()=>r("tr",null,[r("td",null,"."),r("td",null,[p("Previous "),r("em",null,"only"),p(" one page in two page mode.")])],-1)),ns=R(()=>r("tr",null,[r("td",null,"p"),r("td",null,"Previous Book")],-1)),as=R(()=>r("tr",null,[r("td",null,"n"),r("td",null,"Next Book")],-1)),rs=R(()=>r("tr",null,[r("td",null,"esc"),r("td",null,"Close book")],-1)),is=R(()=>r("h4",null,"Fit Page To",-1)),ls=R(()=>r("table",{class:"highlight-table"},[r("tbody",null,[r("tr",null,[r("td",null,"s"),r("td",null,"screen")]),r("tr",null,[r("td",null,"h"),r("td",null,"screen height")]),r("tr",null,[r("td",null,"w"),r("td",null,"screen width")]),r("tr",null,[r("td",null,"o"),r("td",null,"Show page at original size")]),r("tr",null,[r("td",null,"2"),r("td",null,"Toggle two page view")]),r("tr",null,[r("td",null,"r"),r("td",null,"Read Right to Left")]),r("tr",null,[r("td",null,"l"),r("td",null,"Read Left to Right")]),r("tr",null,[r("td",null,"t"),r("td",null,"Read Top to Bottom")]),r("tr",null,[r("td",null,"b"),r("td",null,"Read in Bottom to Top")])])],-1)),cs=R(()=>r("h4",null,"Other",-1)),ds=R(()=>r("table",{class:"highlight-table"},[r("tbody",null,[r("tr",null,[r("td",null,"m"),r("td",null,"Show comic's metadata")]),r("tr",null,[r("td",null,"double click"),r("td",null,"Zoom page")])])],-1));function us(e,t,s,n,l,o){return e.isMobile?C("",!0):(u(),g(Ut,{key:0},{default:c(()=>[i(Nt,{id:"readerKeyboardShortcuts"},{default:c(()=>[i(At,{id:"shortcutsTitle"},{default:c(()=>[i(P,{id:"keyboardIcon"},{default:c(()=>[p(f(l.mdiKeyboardOutline),1)]),_:1}),p("Keyboard Shortcuts ")]),_:1}),i(Ft,null,{default:c(()=>[Zo,r("table",Qo,[r("tbody",null,[r("tr",null,[r("td",null,[i(P,{class:"keyIcon",density:"compact"},{default:c(()=>[p(f(l.mdiMenuLeft),1)]),_:1}),p(", j, "),r("div",null,[i(P,{class:"keyIcon",density:"compact"},{default:c(()=>[p(f(l.mdiAppleKeyboardShift),1)]),_:1}),i(P,{class:"keyIcon",density:"compact"},{default:c(()=>[p(f(l.mdiKeyboardSpace),1)]),_:1})])]),es]),r("tr",null,[r("td",null,[i(P,{class:"keyIcon",density:"compact"},{default:c(()=>[p(f(l.mdiMenuRight),1)]),_:1}),p(", k, "),i(P,{class:"keyIcon",density:"compact"},{default:c(()=>[p(f(l.mdiKeyboardSpace),1)]),_:1})]),ts]),os,ss,ns,as,rs])]),is,ls,cs,ds]),_:1})]),_:1})]),_:1}))}const hs=k(Jo,[["render",us],["__scopeId","data-v-a8b4ac47"]]),ps={name:"ReaderSettingsSuperPanel",components:{DownloadPanel:ze,ReaderKeyboardShortcutsPanel:hs,ReaderSettingsPanel:qe}};function gs(e,t,s,n,l,o){const a=qe,h=L("ReaderKeyboardShortcutsPanel"),m=ze;return u(),b(E,null,[i(a),i(re),i(h),i(re),i(m)],64)}const ms=k(ps,[["render",gs]]),ks={name:"MainReader",components:{BookChangeDrawer:Me,BooksWindow:Ae,ReaderNavToolbar:De,ReaderTitleToolbar:Ue,SettingsDrawer:_e},data(){return{showToolbars:!1,ReaderSettingsSuperPanel:oe(ms)}},computed:{...S(ie,["isCodexViewable"]),...w(ie,{user:e=>e.user})},watch:{user(){this.loadReaderSettings()},isCodexViewable(){this.loadReaderSettings()}},created(){N().isSettingsDrawerOpen=!1},beforeMount(){d().$reset,this.loadReaderSettings()},methods:{...v(d,["loadReaderSettings"]),toggleToolbars(){this.showToolbars=!this.showToolbars}}},_s={key:0,id:"readerContainer"},fs={key:1,id:"announcement"};function bs(e,t,s,n,l,o){const a=Me,h=Ue,m=Ae,T=De,$=L("router-link"),O=_e;return u(),b(E,null,[i(Mt,{id:"readerWrapper"},{default:c(()=>[i(a,{direction:"prev"}),e.isCodexViewable?(u(),b("div",_s,[i(Lt,null,{default:c(()=>[x(i(h,null,null,512),[[le,l.showToolbars]])]),_:1}),i(m,{onClick:o.toggleToolbars},null,8,["onClick"]),i(It,null,{default:c(()=>[x(i(T,null,null,512),[[le,l.showToolbars]])]),_:1})])):(u(),b("div",fs,[r("h1",null,[i($,{to:{name:"home"}},{default:c(()=>[p(" Log in ")]),_:1}),p(" to read comics ")])]))]),_:1}),i(a,{direction:"next"}),i(O,{title:"Reader Settings",panel:l.ReaderSettingsSuperPanel,temporary:""},null,8,["panel"])],64)}const Ns=k(ks,[["render",bs],["__scopeId","data-v-fd949081"]]);export{Ns as default};
