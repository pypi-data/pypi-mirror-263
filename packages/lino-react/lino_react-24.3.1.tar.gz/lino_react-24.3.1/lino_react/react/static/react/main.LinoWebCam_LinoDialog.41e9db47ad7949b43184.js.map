{"version":3,"file":"main.LinoWebCam_LinoDialog.41e9db47ad7949b43184.js","mappings":"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","sources":["webpack://lino_react/./lino_react/react/components/LinoComponentUtils.jsx","webpack://lino_react/./lino_react/react/components/LinoWebCam.tsx"],"sourcesContent":["export const name = \"LinoComponentUtils\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { RegisterImportPool, getExReady, Component, DataContextType } from \"./Base\";\n\nimport * as constants from \"./constants\";\n\n\nlet ex; const exModulePromises = ex = {\n    classNames: import(/* webpackChunkName: \"classNames_LinoComponentUtils\" */\"classnames\"),\n    queryString: import(/* webpackChunkName: \"queryString_LinoComponentUtils\" */\"query-string\"),\n    prDropdown: import(/* webpackChunkName: \"prDropdown_LinoComponentUtils\" */\"primereact/dropdown\"),\n    prInputText: import(/* webpackChunkName: \"prInputText_LinoComponentUtils\" */\"primereact/inputtext\"),\n}\nRegisterImportPool(ex);\n\n\nfunction messageInterceptor(elem) {\n    return (event) => {\n        if (event.data.hasOwnProperty('master_data')) {\n            if (elem.props[constants.URL_PARAM_WINDOW_TYPE] !== constants.WINDOW_TYPE_TABLE && Object.keys(event.data.master_data).includes(elem.props.elem.name)) {\n                elem.setState({value : event.data.master_data[elem.props.elem.name]});\n            }\n        }\n    }\n}\n\nexport function maintainTableWidth(elem, count) {\n    let ctx;\n    if (elem !== undefined) ctx = elem\n    else ctx = this;\n    let keys = Object.keys(ctx.flexs),\n        fo_conditional = count !== undefined ? keys.length === count : keys.length > 1;\n    if (fo_conditional) {\n        keys.forEach(key => {\n            var tbl = document.getElementById(key)\n                .getElementsByClassName('p-datatable');\n            if (tbl.length === 1) {\n                tbl = tbl[0]\n                let width = tbl.getBoundingClientRect().width / document\n                    .getElementsByClassName('layout-topbar')[0]\n                    .getBoundingClientRect().width;\n                if (width > ctx.flexs[key]) {\n                    Array.from(tbl.querySelectorAll(\n                        '.p-datatable table')).forEach(el => {\n                            if (Array.from(el.classList).join(' ')\n                                .includes('p-datatable')) el.style\n                                    .setProperty('table-layout', 'auto');\n                        });\n                }\n            }\n        });\n    }\n}\n\nexport const Labeled = (props) => {\n    const localEx = getExReady(ex, ['classNames']);\n    let label = props.label || props.elem.label;\n    return !localEx.ready ? null : <React.Fragment>\n        {!props.hide_label && label && <React.Fragment>\n            <label\n                className={localEx.classNames.default(\n                    \"l-label\",\n                    {\"l-label--unfilled\": !props.isFilled},\n                )}\n                title={\n                    Object.assign({}, props.elem.value || {}).quicktip\n                    || props.elem.help_text}>{label}:</label>\n            {props.helpText\n                && <span style={{float: 'right', cursor: 'pointer'}}\n                title={props.helpText}>?</span>}\n            <br/>\n        </React.Fragment>}\n        {props.children}\n    </React.Fragment>\n}\n\n\nLabeled.propTypes = {\n    label: PropTypes.string,\n    elem: PropTypes.object.isRequired,\n    hide_label: PropTypes.bool,\n    isFilled: PropTypes.bool,\n    helpText: PropTypes.string,\n    children: PropTypes.element.isRequired,\n}\nLabeled.defaultProps = {\n    hide_label: false,\n    isFilled: false,\n}\n\n\nexport class ABCComponent {\n    static getValueByName({name, props, context}) {\n        if (props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_PARAMS)\n            return context.param_values[name];\n        return props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? context.rows[props.column.rowIndex][name]\n            : props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_CARDS\n                ? context[name] : context.data[name];\n    }\n}\n\n\nexport class LeafComponentBase extends Component {\n    static requiredModules = [\"classNames\"];\n    static iPool = ex;\n    static contextType = DataContextType;\n    static propTypesFromLinoLayout = {\n        column: PropTypes.object,\n        editing_mode: PropTypes.bool,\n        hide_label: PropTypes.bool,\n        [constants.URL_PARAM_WINDOW_TYPE]: PropTypes.oneOf([\n            constants.WINDOW_TYPE_TABLE,\n            constants.WINDOW_TYPE_DETAIL,\n            constants.WINDOW_TYPE_CARDS,\n            constants.WINDOW_TYPE_GALLERIA,\n            constants.WINDOW_TYPE_INSERT,\n            constants.WINDOW_TYPE_PARAMS,\n            constants.WINDOW_TYPE_UNKNOWN,\n        ]),\n        tabIndex: PropTypes.number.isRequired,\n    }\n\n    static propTypes = {\n        ...LeafComponentBase.propTypesFromLinoLayout,\n        elem: PropTypes.object.isRequired,\n        urlParams: PropTypes.object.isRequired,\n    }\n\n    static defaultProps = {\n        editing_mode: false,\n        hide_label: false,\n        [constants.URL_PARAM_WINDOW_TYPE]: constants.WINDOW_TYPE_UNKNOWN,\n    }\n\n    constructor(props) {\n        super(props);\n        this.wrapperClasses = []\n        this.dataKey = props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? props.elem.fields_index : props.elem.name;\n        this.upController = props.urlParams.controller;\n\n        this.filled = this.filled.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.getValueByName = this.getValueByName.bind(this);\n        this.innerHTML = this.innerHTML.bind(this);\n        this.setLeafRef = this.setLeafRef.bind(this);\n    }\n\n    filled = () => (![\"\", null, undefined].includes(this.getValue()));\n\n    getValueByName(name) {\n        return ABCComponent.getValueByName({\n            name: name, props: this.props, context: this.context});\n    }\n\n    getValue() {\n        return this.getValueByName(this.dataKey);\n    }\n\n    innerHTML(dangerous, style={}) {\n        let v = this.getValue() || \"\\u00a0\";\n        if (v instanceof Object) v = JSON.stringify(v);\n        if (dangerous) {\n            return <div style={style} dangerouslySetInnerHTML={{__html: v}}/>\n        } else {\n            return <div style={style}>{v}</div>\n        }\n    }\n\n    setLeafRef({input=false, type=\"\"} = {}) {\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL)\n            this.upController.dataContext.setLeafRef({\n                name: type === 'slave' ? this.actorID\n                    : this.props.elem.name, ref: this, input: input, type: type});\n    }\n}\n\n\nexport class LeafComponentDelayedValue extends LeafComponentBase {\n    static requiredModules = [\"queryString\"].concat(LeafComponentBase.requiredModules);\n    constructor(props) {\n        super(props);\n        this.state = {...this.state, value: null, data_url: null}\n        this.actorID = props.elem.actor_id || (props.elem.name.includes('.')\n            ? props.elem.name : `${props.urlParams.packId}.${props.elem.name}`);\n\n        this.shouldComponentUpdate = this.shouldComponentUpdate.bind(this);\n        this.getData = this.getData.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.update = this.update.bind(this);\n    }\n\n    async prepare() {\n        await super.prepare();\n        let val = super.getValue();\n        if (!this.upController.filled(val)) return;\n        this.delayed = val.hasOwnProperty('delayed_value_url');\n    }\n\n    onReady() {\n        let val = super.getValue();\n        if (this.delayed) {\n            this.setLeafRef({type: \"slave\"});\n            this.getData(val.delayed_value_url);\n        } else {\n            this.setState({value: val});\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (!this.delayed) return this.state.value !== super.getValue();\n        return this.state.value !== nextState.value || (this.state.value !== null &&\n            super.getValue().delayed_value_url !== this.state.data_url);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.delayed) {\n            if (this.state.data_url !== super.getValue().delayed_value_url) {\n                this.setState({value: null});\n                this.update();\n            }\n        } else this.setState({value: super.getValue()});\n    }\n\n    getValue() {\n        return this.state.value;\n    }\n\n    getData(data_url) {\n        this.upController.actionHandler.silentFetch({\n            path: `${data_url}?${this.ex.queryString.default.stringify(this.upController.actionHandler.defaultStaticParams())}`\n        }).then((data) => {\n            this.setState({value: data.data, data_url: data_url});\n        });\n    }\n\n    update() {\n        this.getData(super.getValue().delayed_value_url);\n    }\n}\n\n\nexport class LeafComponentInput extends LeafComponentBase {\n    static requiredModules = [\"prInputText\"].concat(LeafComponentBase.requiredModules);\n    constructor(props) {\n        super(props);\n        this.styleClasses = [\n            \"disabled-input\",\n            \"l-card\",\n            \"unsaved-modification\",\n        ]\n\n        this.componentWillUnmount = this.componentWillUnmount.bind(this);\n\n        this.disabled = this.disabled.bind(this);\n        this.filled = this.filled.bind(this);\n        this.focus = this.focus.bind(this);\n        this.getCellStyleClasses = this.getCellStyleClasses.bind(this);\n        this.getInput = this.getInput.bind(this);\n        this.onChangeUpdate = this.onChangeUpdate.bind(this);\n        this.onInputRef = this.onInputRef.bind(this);\n        this.onRef = this.onRef.bind(this);\n        this.setCellStyle = this.setCellStyle.bind(this);\n        this.submit = this.submit.bind(this);\n        this.tabIndexMatch = this.tabIndexMatch.bind(this);\n        this.update = this.update.bind(this);\n    }\n\n    async prepare() {\n        this.inputState = {\n            inputComponent: this.ex.prInputText.InputText,\n            inputOnly: false,\n            inputProps: {},\n            onChangeUpdateAssert: (event) => (true),\n            postOnChange: (event) => (null),\n        }\n        window.addEventListener('message', messageInterceptor(this));\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('message', messageInterceptor(this));\n    }\n\n    disabled() {\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_CARDS)\n            return true;\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_PARAMS)\n            return false;\n        if (!this.props.elem.editable) return true;\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n            let row = this.context.rows[this.props.column.rowIndex],\n                last_item = row[row.length - 1];\n\n            // No meta, assume not disabled;\n            if (!last_item || !last_item.meta) return false;\n            // disable_editing set to true;\n            if (row[row.length - 2]) return true;\n            // check name in the disabled_fields meta;\n            return row[row.length - 3][this.props.elem.name] || false;\n        } else {\n            if (this.context.data.disable_editing) return true;\n            return this.context.data.disabled_fields[this.props.elem.name] || false;\n        }\n    }\n\n    focus() {\n        let ref = this.inputEl;\n        if (ref.focus) ref.focus()\n        else if (ref.focusInput) ref.focusInput.focus()\n        else if (ref.inputRef) ref.inputRef.current.focus()\n    }\n\n    getCellStyleClasses() {\n        let styleClasses = [];\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n            if (this.context.modifiedRows[this.props.column.rowIndex].includes(\n                this.props.elem.fields_index\n            )) {\n                styleClasses.push(\"unsaved-modification\");\n            }\n        } else {\n            styleClasses.push('l-card');\n            if (this.props[constants.URL_PARAM_WINDOW_TYPE] !== constants.WINDOW_TYPE_CARDS) {\n                if (this.disabled()) styleClasses.push(\"disabled-input\")\n                else if (this.context.modified.includes(this.props.elem.name))\n                    styleClasses.push(\"unsaved-modification\");\n            }\n        }\n        return styleClasses;\n    }\n\n    getInput() {\n        return <this.inputState.inputComponent\n            autoFocus={this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE ? true : undefined}\n            onChange={(e) => {\n                if (!this.inputState.onChangeUpdateAssert(e)) return;\n                this.onChangeUpdate(e);\n                this.inputState.postOnChange(e);\n            }}\n            ref={this.onInputRef}\n            style={{width: \"100%\"}}\n            tabIndex={this.props.tabIndex}\n            value={this.getValue() || \"\"}\n            {...this.inputState.inputProps}/>;\n    }\n\n    onChangeUpdate(e) {\n        this.update({[this.dataKey]: e.target.value});\n        this.setState({});\n    }\n\n    onInputRef(ref) {\n        this.inputEl = ref;\n        if (ref && this.tabIndexMatch()) this.focus();\n    }\n\n    onKeyDown = (event) => null;\n\n    onRef(ref) {\n        const onClick = () => {\n            this.container.onclick = (event) => {\n                if (!this.disabled()) {\n                    Object.assign(this.upController.globals, {\n                        currentInputRowIndex: Object.assign({rowIndex: 0}, this.props.column).rowIndex,\n                        currentInputTabIndex: this.props.tabIndex,\n                        currentInputWindowType: this.props[constants.URL_PARAM_WINDOW_TYPE],\n                        currentInputAHRefName: this.upController.actionHandler.refName,\n                    });\n                    if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL\n                        && !this.props.editing_mode\n                    ) this.upController.history.replaceState({editing_mode: true});\n                }\n            }\n        }\n        if (ref) {\n            this.container = ref;\n            if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n                this.container = ref.closest(\"td\");\n                onClick();\n            }\n            else if (\n                this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL\n            ) onClick();\n        }\n        this.setCellStyle(this.container);\n    }\n\n    setCellStyle(ref) {\n        if (ref) {\n            let classes = this.getCellStyleClasses();\n            this.styleClasses.forEach(item => {ref.classList.remove(item)});\n            classes.forEach(item => {ref.classList.add(item)});\n        }\n    }\n\n    submit() {\n        this.upController.actionHandler.submit({\n            cellInfo: {rowIndex: this.props.column.rowIndex}});\n    }\n\n    tabIndexMatch() {\n        if (\n            this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE &&\n            this.props.column.rowIndex !== this.upController.globals.currentInputRowIndex\n        ) return false;\n        if (\n            this.props[constants.URL_PARAM_WINDOW_TYPE] === this.upController.globals.currentInputWindowType &&\n            this.upController.actionHandler.refName === this.upController.globals.currentInputAHRefName &&\n            this.props.tabIndex === this.upController.globals.currentInputTabIndex\n        ) return true;\n        return false;\n    }\n\n    update(values) {\n        this.upController.actionHandler.update({\n            values: values, elem: this.props.elem, col: this.props.column,\n            windowType: this.props[constants.URL_PARAM_WINDOW_TYPE]});\n    }\n\n    render() {\n        if (!this.state.ready) return null;\n        if (this.container) this.setCellStyle(this.container);\n        return <Labeled {...this.props} elem={this.props.elem} isFilled={this.filled()}>\n            <div\n                className={this.ex.classNames.default(this.wrapperClasses)}\n                onKeyDown={this.onKeyDown}\n                ref={this.onRef}>\n                    {this.inputState.inputOnly ? this.getInput() :\n                        this.props.editing_mode && !this.disabled() ?\n                            this.getInput() : this.innerHTML()}\n            </div>\n        </Labeled>\n    }\n}\n\n\nexport class LeafComponentInputChoices extends LeafComponentInput {\n    static requiredModules = [\"prDropdown\"].concat(LeafComponentInput.requiredModules);\n    constructor(props) {\n        super(props);\n        this.wrapperClasses.push(\"l-ChoiceListFieldElement\");\n        this.state = {\n            ...this.state,\n            hidden_value: null\n        }\n\n        this.dataKeyHidden = props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? props.elem.fields_index_hidden\n            : props.elem.name + \"Hidden\";\n\n        this.getInput = this.getInput.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.innerHTML = this.innerHTML.bind(this);\n    }\n\n    getValue() {\n        return {\n            text: super.getValue(),\n            value: this.getValueByName(this.dataKeyHidden)};\n    }\n\n    getInput() {\n        return <this.ex.prDropdown.Dropdown\n            onChange={(e) => {\n                if (e.originalEvent.ctrlKey || e.originalEvent.altKey) return;\n                this.update({[this.dataKey]: e.value,\n                    [this.dataKeyHidden]: e.value});\n                    this.setState({});\n            }}\n            optionLabel=\"text\"\n            options={this.options}\n            ref={this.onInputRef}\n            showClear={this.props.elem.field_options.allowBlank}\n            style={{width: \"100%\"}}\n            tabIndex={this.props.tabIndex}\n            value={this.getValue().value}/>\n    }\n\n    innerHTML() {\n        let v = super.getValue() || \"\\u00a0\";\n        return <div style={{whiteSpace: \"nowrap\"}}>{v}</div>\n    }\n}\n","// LinoWebCam.tsx\n/** @module LinoWebCam */\n\nexport const name: string = \"LinoWebCam\";\n\n// @ts-ignore\nimport * as React from 'react';\n// @ts-ignore\nimport PropTypes from 'prop-types';\nimport * as t from './types';\nimport { RegisterImportPool, getExReady, URLContextType } from \"./Base\";\n\n// @ts-ignore\nimport Webcam from \"react-webcam\";\n\nlet ex; const exModulePromises = ex = {\n    // @ts-ignore\n    prButton: import(/* webpackChunkName: \"prButton_LinoWebCam\" */\"primereact/button\"),\n    // @ts-ignore\n    prOverlayPanel: import(/* webpackChunkName: \"prOverlayPanel_LinoWebCam\" */\"primereact/overlaypanel\"),\n    // @ts-ignore\n    prInputNumber: import(/* webpackChunkName: \"prInputNumber_LinoWebCam\" */\"primereact/inputnumber\"),\n    // @ts-ignore\n    prInputSwitch: import(/* webpackChunkName: \"prInputSwitch_LinoWebCam\" */\"primereact/inputswitch\"),\n    // @ts-ignore\n    lcu: import(/* webpackChunkName: \"LinoComponentUtils_LinoWebCam\" */\"./LinoComponentUtils\"),\n}\nRegisterImportPool(ex);\n\ntype WebcamState = {\n    err_msg?: null | string;\n    deviceId?: null | string;\n    devices?: string[];\n}\n\ntype WCReferences = {\n    capture?: React.MouseEventHandler<HTMLElement>;\n    props?: LinoWebCamProps;\n    self?: CamController;\n    setState?: Function;\n    state?: WebcamState;\n    switchCamera?: React.MouseEventHandler<HTMLElement>;\n    webcamRef?: React.RefObject<Webcam>;\n}\n\ninterface CamController {\n    buildMediaConstraints(): MediaTrackConstraints;\n    mediaTrackConstraints: MediaTrackConstraints;\n    store: WCReferences;\n    settings: t.WebcamSettings;\n    settingsMod: t.WebcamSettings;\n}\n\nclass CamController implements CamController {\n    static buildReferences = (store: WCReferences): WCReferences => {\n        store.webcamRef = React.useRef(null);\n        store.capture = React.useCallback(\n            (event) => {\n                store.props.captureDone(store.webcamRef.current.getScreenshot());\n            },\n        [store.webcamRef]);\n\n        const [state, setState] = React.useState<WebcamState>({\n            err_msg: null, deviceId: null, devices: []});\n\n        store.state = state;\n        store.setState = React.useCallback((st: WebcamState) =>\n            setState((old: WebcamState) => Object.assign({}, old, st)), []);\n\n        store.switchCamera = React.useCallback(\n            event => {\n                let i = (state.devices.indexOf(state.deviceId) + 1) % state.devices.length;\n                store.setState({deviceId: state.devices[i]});\n            },\n        []);\n        return store;\n    }\n\n    constructor(store: WCReferences) {\n        this.store = store;\n        this.buildMediaConstraints();\n    }\n\n    buildMediaConstraints(): MediaTrackConstraints {\n        const constraints: MediaTrackConstraints = {};\n        this.settings = window.App.getSettings().webcam;\n        if (this.settings !== undefined) {\n            constraints.height = this.settings.height;\n            constraints.width = this.settings.width;\n        } else {\n            constraints.height = this.store.props.height * devicePixelRatio;\n            constraints.width = this.store.props.width * devicePixelRatio;\n            this.settings = Object.assign({}, constraints as t.WebcamSettings, {pixelRatio: devicePixelRatio, mirrored: true});\n            window.App.setSettings({webcam: this.settings});\n        }\n        this.settingsMod = {...this.settings};\n        if (this.store.state.deviceId) constraints.deviceId = this.store.state.deviceId\n        else constraints.facingMode = \"environment\";\n        this.mediaTrackConstraints = constraints;\n        return constraints;\n    }\n}\n\ntype LinoWebCamProps = {\n    captureDone: (data: string) => void;\n    height: number;\n    width: number;\n}\n\ntype CamSettingsProps = {CC: CamController};\n\nconst CamSettings: React.FC<CamSettingsProps> = (props) => {\n    const {settings, settingsMod} = props.CC;\n    const [mirrored, setMirrored] = React.useState<boolean>(settings.mirrored);\n    const localEx = getExReady(ex, [\"prInputNumber\", \"prInputSwitch\", \"lcu\"]);\n    const getInput = React.useCallback(\n        ({label, max = null, min, onValueChange, suffix, value}) => (<div>\n            <localEx.lcu.Labeled elem={{label: label}}>\n                <localEx.prInputNumber.InputNumber buttonLayout=\"horizontal\"\n                    max={max} min={min} onValueChange={onValueChange}\n                    showButtons={true} suffix={suffix} value={value}/>\n            </localEx.lcu.Labeled></div>), [localEx]);\n    return !localEx.ready ? null : <>\n        {getInput({label: 'Height (# > 512)', max: props.CC.store.props.height,\n            min: 512, onValueChange: (e) => Object.assign(settingsMod,\n                {height: e.value * settingsMod.pixelRatio}),\n            suffix: 'px', value: settings.height / settings.pixelRatio})}\n        <br/>\n        {getInput({label: 'Width (# > 512)', max: props.CC.store.props.width,\n            min: 512, onValueChange: (e) => Object.assign(settingsMod,\n                {width: e.value * settingsMod.pixelRatio}),\n            suffix: 'px', value: settings.width / settings.pixelRatio})}\n        <br/>\n        {getInput({label: 'Pixel ratio (# > 1)', min: 1, onValueChange: (e) => {\n                Object.assign(settingsMod, {\n                    height: (settingsMod.height / settingsMod.pixelRatio) * e.value,\n                    width: (settingsMod.width / settingsMod.pixelRatio) * e.value,\n                    pixelRatio: e.value});\n            }, suffix: 'dpr', value: settings.pixelRatio})}\n        <br/>\n        <div>\n            <localEx.lcu.Labeled elem={{label: \"Mirrored\"}}>\n                <localEx.prInputSwitch.InputSwitch\n                    checked={mirrored}\n                    onChange={e => {\n                        setMirrored(e.value);\n                        Object.assign(settingsMod, {mirrored: e.value});\n                    }}/>\n            </localEx.lcu.Labeled>\n        </div>\n    </>\n};CamSettings.propTypes = {CC: PropTypes.instanceOf(CamController).isRequired};\n\ntype CamActionsProps = {CC: CamController};\n\nconst CamActions: React.FC<CamActionsProps> = (props) => {\n    const opRef = React.useRef(null);\n    const buttonStyle = {background: \"white\", color: \"black\",\n        borderRadius: \"50%\", width: \"5ch\", height: \"5ch\", margin: \"5px\"};\n    const localEx = getExReady(ex, [\"prButton\", \"prOverlayPanel\"]);\n    return !localEx.ready ? null : <><localEx.prButton.Button\n        icon=\"pi pi-camera\"\n        onClick={props.CC.store.capture}\n        style={buttonStyle}/>\n    {props.CC.store.state.devices.length > 1 &&\n        <localEx.prButton.Button\n            icon=\"pi pi-undo\"\n            onClick={props.CC.store.switchCamera}\n            style={buttonStyle}/>}\n    <localEx.prButton.Button\n        icon=\"pi pi-cog\"\n        onClick={e => opRef.current.toggle(e)}\n        style={buttonStyle}/>\n    <div onKeyDown={e => e.stopPropagation()}>\n        <localEx.prOverlayPanel.OverlayPanel\n            onHide={e => {\n                // @ts-ignore\n                document.activeElement.blur();\n                window.App.setSettings({webcam: props.CC.settingsMod});\n                props.CC.buildMediaConstraints();\n                props.CC.store.setState({});\n            }}\n            onShow={e => opRef.current.align()}\n            ref={opRef}\n            showCloseIcon={true}>\n            <CamSettings CC={props.CC}/>\n        </localEx.prOverlayPanel.OverlayPanel>\n    </div></>\n};CamActions.propTypes = {CC: PropTypes.instanceOf(CamController).isRequired};\n\nexport const LinoWebCam: React.FC = (props: LinoWebCamProps) => {\n    const store: React.RefObject<WCReferences> = React.useRef({props: props});\n    CamController.buildReferences(store.current);\n\n    const { state, setState } = store.current;\n\n    React.useEffect(() => {\n        // @ts-ignore\n        document.activeElement.blur();\n        store.current.self = new CamController(store.current);\n        navigator.mediaDevices.enumerateDevices().then(devs => setState(\n            {devices: devs.filter(\n                ({kind}) => kind === \"videoinput\").map(d => d.deviceId)}));\n    }, []);\n\n    const { self } = store.current;\n\n    return !state.devices.length ? null : <>\n        <div style={{position: 'absolute'}}>{state.err_msg}</div>\n        <Webcam\n            audio={false}\n            forceScreenshotSourceSize={true}\n            height={self.settings.height / self.settings.pixelRatio}\n            mirrored={self.settings.mirrored}\n            onUserMedia={uM => {\n                if (state.deviceId === null)\n                    setState({deviceId: uM.getVideoTracks()[0].getSettings().deviceId})}}\n            onUserMediaError={exempt => {\n                if (state.err_msg === null) setState({err_msg:\n                    \"Please allow camera access to take a photo.\"})}}\n            ref={store.current.webcamRef}\n            screenshotFormat=\"image/jpeg\"\n            videoConstraints={self.mediaTrackConstraints}\n            width={self.settings.width / self.settings.pixelRatio}\n            />\n        <div\n            style={{position: \"absolute\", bottom: \"40px\", left: \"50%\",\n                transform: \"translate(-50%, 0)\"}}>\n            <CamActions CC={self}/>\n        </div>\n    </>\n}\n\n\nLinoWebCam.propTypes = {\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    captureDone: PropTypes.func.isRequired,\n}\n"],"names":["name","ex","classNames","queryString","prDropdown","prInputText","messageInterceptor","elem","event","data","hasOwnProperty","props","constants","Object","keys","master_data","includes","setState","value","maintainTableWidth","count","ctx","undefined","this","flexs","length","forEach","key","tbl","document","getElementById","getElementsByClassName","getBoundingClientRect","width","Array","from","querySelectorAll","el","classList","join","style","setProperty","RegisterImportPool","Labeled","localEx","getExReady","label","ready","_jsxs","React","children","hide_label","className","default","isFilled","title","assign","quicktip","help_text","helpText","_jsx","float","cursor","propTypes","PropTypes","isRequired","defaultProps","ABCComponent","getValueByName","context","param_values","rows","column","rowIndex","LeafComponentBase","Component","constructor","super","filled","getValue","wrapperClasses","dataKey","fields_index","upController","urlParams","controller","bind","innerHTML","setLeafRef","dangerous","v","JSON","stringify","dangerouslySetInnerHTML","__html","input","type","dataContext","actorID","ref","requiredModules","iPool","contextType","DataContextType","propTypesFromLinoLayout","editing_mode","tabIndex","LeafComponentDelayedValue","state","data_url","actor_id","packId","shouldComponentUpdate","getData","update","prepare","val","delayed","onReady","delayed_value_url","nextProps","nextState","componentDidUpdate","prevProps","prevState","actionHandler","silentFetch","path","defaultStaticParams","then","concat","LeafComponentInput","onKeyDown","styleClasses","componentWillUnmount","disabled","focus","getCellStyleClasses","getInput","onChangeUpdate","onInputRef","onRef","setCellStyle","submit","tabIndexMatch","inputState","inputComponent","InputText","inputOnly","inputProps","onChangeUpdateAssert","postOnChange","window","addEventListener","removeEventListener","editable","row","last_item","meta","disable_editing","disabled_fields","inputEl","focusInput","inputRef","current","modifiedRows","push","modified","autoFocus","onChange","e","target","onClick","container","onclick","globals","currentInputRowIndex","currentInputTabIndex","currentInputWindowType","currentInputAHRefName","refName","history","replaceState","closest","classes","item","remove","add","cellInfo","values","col","windowType","render","LeafComponentInputChoices","hidden_value","dataKeyHidden","fields_index_hidden","text","Dropdown","originalEvent","ctrlKey","altKey","optionLabel","options","showClear","field_options","allowBlank","whiteSpace","prButton","prOverlayPanel","prInputNumber","prInputSwitch","lcu","CamController","store","buildMediaConstraints","constraints","settings","App","getSettings","webcam","height","devicePixelRatio","pixelRatio","mirrored","setSettings","settingsMod","deviceId","facingMode","mediaTrackConstraints","buildReferences","webcamRef","useRef","capture","useCallback","captureDone","getScreenshot","useState","err_msg","devices","st","old","switchCamera","i","indexOf","CamSettings","CC","setMirrored","max","min","onValueChange","suffix","InputNumber","buttonLayout","showButtons","InputSwitch","checked","instanceOf","CamActions","opRef","buttonStyle","background","color","borderRadius","margin","Button","icon","toggle","stopPropagation","OverlayPanel","onHide","activeElement","blur","onShow","align","showCloseIcon","LinoWebCam","useEffect","self","navigator","mediaDevices","enumerateDevices","devs","filter","kind","map","d","position","audio","forceScreenshotSourceSize","onUserMedia","uM","getVideoTracks","onUserMediaError","exempt","screenshotFormat","videoConstraints","bottom","left","transform","number","func"],"sourceRoot":""}