"use strict";(self.webpackChunk_secretflow_secretnote=self.webpackChunk_secretflow_secretnote||[]).push([[1370],{97341:function(Xe,ue,e){e.d(ue,{O:function(){return ae}});var d=e(84880),ye=e(78796),re=e.n(ye),ie=e(4977),Ce=e.n(ie),q=e(47302),fe=e(44054),_,ve,he=(_=(0,q.ri)({contrib:fe.z}),_(ve=function(){function L(){re()(this,L)}return Ce()(L,[{key:"registerColors",value:function(F){F.register({id:"secretnote.sidebar.background",defaults:{dark:"#f4f6f8",light:"#f4f6f8"},description:""}),F.register({id:"secretnote.text.color",defaults:{dark:"#40566c",light:"#40566c"},description:""}),F.register({id:"secretnote.li.hover.background",defaults:{dark:"#e5ebf1",light:"#e5ebf1"},description:""}),F.register({id:"secretnote.icon.color",defaults:{dark:"#40566c",light:"#40566c"},description:""}),F.register({id:"secretnote.icon.hover.color",defaults:{dark:"#182431",light:"#182431"},description:""}),F.register({id:"secretnote.divider.color",defaults:{dark:"#d6dee6",light:"#d6dee6"},description:""})}}]),L}())||ve),ae=d.R.create().register(he)},42892:function(Xe,ue,e){e.r(ue),e.d(ue,{default:function(){return zt}});var d=e(83109),ye=e(43256),re=e(45362),ie=e(20904),Ce=e(84880),q=e(53353),fe=e(78796),_=e.n(fe),ve=e(4977),he=e.n(ve),ae=e(41553),L=e.n(ae),ze=e(49488),F=e.n(ze),Be=e(84047),be=e.n(Be),We=e(10154),oe=e.n(We),Ie=e(90819),C=e.n(Ie),He=e(89933),H=e.n(He),se=e(38168),je=e(91798),ee=e(47302),$e=e(99138),ge=e(20376),X=e(58757),Ye=e(51865),Ge=e.n(Ye),Ee=e(70361),te=e(17241),c=e(74309),m=e(61794),h=e(15146);const v=a=>{const{componentCls:r,sizePaddingEdgeHorizontal:l,colorSplit:i,lineWidth:t,textPaddingInline:f,orientationMargin:n,verticalMarginInline:o}=a;return{[r]:Object.assign(Object.assign({},(0,c.Wf)(a)),{borderBlockStart:`${(0,te.bf)(t)} solid ${i}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${(0,te.bf)(t)} solid ${i}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${(0,te.bf)(a.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${r}-with-text`]:{display:"flex",alignItems:"center",margin:`${(0,te.bf)(a.dividerHorizontalWithTextGutterMargin)} 0`,color:a.colorTextHeading,fontWeight:500,fontSize:a.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${i}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${(0,te.bf)(t)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${r}-with-text-left`]:{"&::before":{width:`calc(${n} * 100%)`},"&::after":{width:`calc(100% - ${n} * 100%)`}},[`&-horizontal${r}-with-text-right`]:{"&::before":{width:`calc(100% - ${n} * 100%)`},"&::after":{width:`calc(${n} * 100%)`}},[`${r}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:f},"&-dashed":{background:"none",borderColor:i,borderStyle:"dashed",borderWidth:`${(0,te.bf)(t)} 0 0`},[`&-horizontal${r}-with-text${r}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${r}-dashed`]:{borderInlineStartWidth:t,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${r}-with-text`]:{color:a.colorText,fontWeight:"normal",fontSize:a.fontSize},[`&-horizontal${r}-with-text-left${r}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${r}-inner-text`]:{paddingInlineStart:l}},[`&-horizontal${r}-with-text-right${r}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${r}-inner-text`]:{paddingInlineEnd:l}}})}},j=a=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:a.marginXS});var Y=(0,m.I$)("Divider",a=>{const r=(0,h.TS)(a,{dividerHorizontalWithTextGutterMargin:a.margin,dividerHorizontalGutterMargin:a.marginLG,sizePaddingEdgeHorizontal:0});return[v(r)]},j,{unitless:{orientationMargin:!0}}),R=function(a,r){var l={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&r.indexOf(i)<0&&(l[i]=a[i]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,i=Object.getOwnPropertySymbols(a);t<i.length;t++)r.indexOf(i[t])<0&&Object.prototype.propertyIsEnumerable.call(a,i[t])&&(l[i[t]]=a[i[t]]);return l},A=a=>{const{getPrefixCls:r,direction:l,divider:i}=X.useContext(Ee.E_),{prefixCls:t,type:f="horizontal",orientation:n="center",orientationMargin:o,className:g,rootClassName:y,children:ne,dashed:x,plain:Ue,style:Re}=a,Pe=R(a,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","plain","style"]),I=r("divider",t),[at,$,bt]=Y(I),It=n.length>0?`-${n}`:n,ot=!!ne,st=n==="left"&&o!=null,lt=n==="right"&&o!=null,$t=Ge()(I,i==null?void 0:i.className,$,bt,`${I}-${f}`,{[`${I}-with-text`]:ot,[`${I}-with-text${It}`]:ot,[`${I}-dashed`]:!!x,[`${I}-plain`]:!!Ue,[`${I}-rtl`]:l==="rtl",[`${I}-no-default-orientation-margin-left`]:st,[`${I}-no-default-orientation-margin-right`]:lt},g,y),ct=X.useMemo(()=>typeof o=="number"?o:/^\d+$/.test(o)?Number(o):o,[o]),Et=Object.assign(Object.assign({},st&&{marginLeft:ct}),lt&&{marginRight:ct});return at(X.createElement("div",Object.assign({className:$t,style:Object.assign(Object.assign({},i==null?void 0:i.style),Re)},Pe,{role:"separator"}),ne&&f!=="vertical"&&X.createElement("span",{className:`${I}-inner-text`,style:Et},ne)))},z=e(35198),O=e(39566),le=e(36756),T=e(34319),D=e(39270),G=e(84743),V=e(32368),Z=e(34949);const J=(0,Z.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),B=(0,Z.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var N=e(26336),k=e.n(N),b=e(62055),K=e.n(b),ce=e(23202),W=e(95881),Oe,me,Ne,de,S,Me,Se,Le,P,xe,Ae,Te,pe=function(a){return a.UNDECIDED="UNDECIDED",a.ACCEPTED="ACCEPTED",a.DECLINED="DECLINED",a.INVALID="INVALID",a}({}),U=(Oe=(0,ee.ri)(),me=(0,se.vg)(),Ne=Reflect.metadata("design:type",Array),de=(0,se.vg)(),S=Reflect.metadata("design:type",Array),Me=(0,se.vg)(),Se=Reflect.metadata("design:type",typeof PlatformInfo=="undefined"?Object:PlatformInfo),Oe(Le=(P=function(){function a(){_()(this,a),k()(this,"projects",xe,this),k()(this,"invitationList",Ae,this),k()(this,"platformInfo",Te,this)}return he()(a,[{key:"getPlatformInfo",value:function(){var r=H()(C()().mark(function i(){var t;return C()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,W.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getPlatformInfo"})});case 2:return t=n.sent,this.platformInfo=t,n.abrupt("return",t);case 5:case"end":return n.stop()}},i,this)}));function l(){return r.apply(this,arguments)}return l}()},{key:"getProjectList",value:function(){var r=H()(C()().mark(function i(){var t,f;return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,W.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getProjectList"})});case 2:return t=o.sent,f=t.map(function(g){return{id:g.project_id,name:g.name||g.project_id,description:g.description,creator:g.creator,members:g.members}}),f.sort(function(g,y){return g.name.localeCompare(y.name)}),this.projects=f,o.abrupt("return",this.projects);case 7:case"end":return o.stop()}},i,this)}));function l(){return r.apply(this,arguments)}return l}()},{key:"addProject",value:function(){var r=H()(C()().mark(function i(t){return C()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,W.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"addProject",project_id:t.id,name:t.name,description:t.description})});case 2:this.getProjectList();case 3:case"end":return n.stop()}},i,this)}));function l(i){return r.apply(this,arguments)}return l}()},{key:"getInvitationList",value:function(){var r=H()(C()().mark(function i(){var t;return C()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,W.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"getInvitationList"})});case 2:return t=n.sent,this.invitationList=t.map(function(o){return{status:o.status,id:o.invitation_id,inviter:o.inviter,invitee:o.invitee,project:o.project.name||o.project.project_id}}),n.abrupt("return",t);case 5:case"end":return n.stop()}},i,this)}));function l(){return r.apply(this,arguments)}return l}()},{key:"processInvitation",value:function(){var r=H()(C()().mark(function i(t,f){return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,W.WY)("api/broker",{method:"POST",body:JSON.stringify({action:"processInvitation",invitation_id:t,respond:f?"ACCEPT":"DECLINE"})});case 2:this.getInvitationList(),this.getProjectList();case 4:case"end":return o.stop()}},i,this)}));function l(i,t){return r.apply(this,arguments)}return l}()}]),a}(),xe=K()(P.prototype,"projects",[me,Ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ae=K()(P.prototype,"invitationList",[de,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=K()(P.prototype,"platformInfo",[Me,Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{party:"",host:""}}}),P))||Le),s=e(35667),De,Ze,we,Q,p,u,M=function(){var r=(0,se.oC)(je.yd),l=r.service.invitationList.filter(function(n){return n.status===pe.UNDECIDED}),i=r.service.invitationList.filter(function(n){return n.status!==pe.UNDECIDED}),t=function(){var n=H()(C()().mark(function o(g,y){return C()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,x.next=3,r.service.processInvitation(g,y);case 3:ge.ZP.success("".concat(y?"Accept":"Decline"," successfully.")),x.next=9;break;case 6:x.prev=6,x.t0=x.catch(0),x.t0 instanceof Error&&ge.ZP.error(x.t0.message);case 9:case"end":return x.stop()}},o,null,[[0,6]])}));return function(g,y){return n.apply(this,arguments)}}(),f=[{key:"1",label:"Pending",children:(0,s.jsx)("div",{className:"secretnote-notification-box",children:l.length>0?(0,s.jsx)("ul",{children:l.map(function(n){return(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:"".concat(n.inviter," invites you to participate in the project ").concat(n.project,".")}),(0,s.jsx)(A,{type:"vertical",style:{height:"1em",borderInlineStart:"1px solid #d6dee6"}}),(0,s.jsxs)("span",{className:"action",children:[(0,s.jsx)(z.ZP,{onClick:function(){return t(n.id,!0)},type:"link",children:"Accept"}),(0,s.jsx)(z.ZP,{onClick:function(){return t(n.id,!1)},type:"link",children:"Decline"})]})]},n.id)})}):(0,s.jsx)(O.Z,{image:O.Z.PRESENTED_IMAGE_SIMPLE,description:"No new notifications."})})},{key:"2",label:"Archived",children:(0,s.jsx)("div",{className:"secretnote-notification-box",children:i.length>0?(0,s.jsx)("ul",{children:i.map(function(n){return(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:"".concat(n.inviter," invites you to participate in the project ").concat(n.project,".")}),(0,s.jsx)(A,{type:"vertical",style:{height:"1em",borderInlineStart:"1px solid #d6dee6"}}),(0,s.jsx)("span",{className:"action",style:{color:n.status===pe.ACCEPTED?"green":"orange"},children:pe[n.status]})]},n.id)})}):(0,s.jsx)(O.Z,{image:O.Z.PRESENTED_IMAGE_SIMPLE,description:"Nothing in Archived."})})}];return(0,s.jsxs)("div",{className:"secretnote-invitation-notification",children:[(0,s.jsx)(le.Z,{content:(0,s.jsx)(T.Z,{defaultActiveKey:"1",items:f,size:"small"}),title:"",overlayStyle:{width:480},trigger:"click",placement:"bottomLeft",arrow:!1,overlayClassName:"secretnote-notification-popover",children:(0,s.jsx)(D.Z,{dot:!0,count:l.length,color:"#1677ff",size:"small",children:(0,s.jsx)(J,{color:"#40566c",size:18,cursor:"pointer"})})}),(0,s.jsx)(G.Z,{title:r.service.platformInfo.party,children:(0,s.jsx)(V.C,{style:{backgroundColor:"#87d068",marginTop:-2,marginLeft:12,cursor:"pointer"},icon:(0,s.jsx)(B,{size:12,color:"#fff"}),size:"small"})})]})},Je=(De=(0,ee.ri)(),Ze=(0,q.ei)("secretnote-invitation-notification-view"),we=function(r,l){return(0,ee.f3)(U)(r,void 0,0)},Q=Reflect.metadata("design:type",Function),p=Reflect.metadata("design:paramtypes",[typeof U=="undefined"?Object:U]),De(u=Ze(u=we(u=Q(u=p(u=function(a){F()(l,a);var r=be()(l);function l(i){var t;return _()(this,l),t=r.call(this),oe()(L()(t),"view",M),oe()(L()(t),"service",void 0),t.service=i,t}return he()(l,[{key:"onViewMount",value:function(){this.service.getPlatformInfo(),this.service.getInvitationList()}}]),l}($e.P))||u)||u)||u)||u)||u),dt=e(45332),Ke=e.n(dt),ut=e(19689),Ve=e(72085),ke=e(64940),ft=e(34186);const vt=(0,Z.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ht=(0,Z.Z)("KanbanSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}]]),gt=(0,Z.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var mt=e(72202),Fe=e(38644),pt=e(8328),yt=function(r){var l=r.visible,i=r.close,t=r.data,f=Fe.Z.useForm(),n=Ke()(f,1),o=n[0],g=(0,se.oC)(U),y=!!(t&&t.name);(0,X.useEffect)(function(){o&&t&&o.setFieldsValue(t)},[t,o]);var ne=function(){o.validateFields().then(function(){var Ue=H()(C()().mark(function Re(Pe){var I;return C()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return I={id:Pe.name,name:Pe.name,description:Pe.description},$.prev=1,$.next=4,g.addProject(I);case 4:ge.ZP.success("\u6DFB\u52A0\u6210\u529F"),i(),$.next=11;break;case 8:$.prev=8,$.t0=$.catch(1),$.t0 instanceof Error&&ge.ZP.error($.t0.message);case 11:return $.abrupt("return");case 12:case"end":return $.stop()}},Re,null,[[1,8]])}));return function(Re){return Ue.apply(this,arguments)}}()).catch(function(){})};return(0,s.jsx)(pt.Z,{open:l,destroyOnClose:!0,title:"New Project",okText:"Create Project",onOk:function(){return ne()},onCancel:function(){i()},children:(0,s.jsxs)(Fe.Z,{form:o,autoComplete:"off",requiredMark:!0,labelCol:{span:6},wrapperCol:{span:18},style:{marginTop:24},children:[(0,s.jsx)(Fe.Z.Item,{label:"Name",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"}],children:(0,s.jsx)(ke.Z,{maxLength:16,disabled:y,placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u3001\u6570\u5B57\u6216\u8005\u4E0B\u5212\u7EBF",allowClear:!0})}),(0,s.jsx)(Fe.Z.Item,{label:"Description",name:"description",required:!1,children:(0,s.jsx)(ke.Z.TextArea,{rows:3,placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u3001\u6570\u5B57\u6216\u8005\u4E0B\u5212\u7EBF",allowClear:!0})})]})})},Qe={id:"project-config-modal",component:yt},qe,_e,et,tt,nt,rt,w,Ct=function(){var r=(0,se.oC)(je.yd),l=(0,X.useState)(""),i=Ke()(l,2),t=i[0],f=i[1],n=r.service.projects.filter(function(g){return g.name.includes(t)||t===""}),o=function(y){mt.m8.push("/scql/project/"+y)};return(0,s.jsxs)("div",{className:"project-container",children:[(0,s.jsxs)("div",{className:"toolbar",children:[(0,s.jsx)(ke.Z,{placeholder:"Filter name",prefix:(0,s.jsx)(vt,{color:"#5b768f",size:16}),style:{width:280},value:t,onChange:function(y){return f(y.target.value)},allowClear:!0}),(0,s.jsx)(z.ZP,{type:"primary",onClick:function(){return r.openAddProjectModal()},children:"Add New Project"})]}),(0,s.jsx)("div",{className:"content",children:(0,s.jsx)(ft.Z,{dataSource:n,rowKey:"id",pagination:n.length>15?{pageSize:10,size:"small"}:!1,columns:[{title:"Name",dataIndex:"name",key:"name",render:function(y){return(0,s.jsxs)("span",{className:"project-name",children:[(0,s.jsx)(ht,{size:14,style:{marginRight:8}}),(0,s.jsx)("span",{children:y})]})}},{title:"Host",dataIndex:"creator",key:"creator"},{title:"Member",dataIndex:"members",key:"members",render:function(y){return y.join(", ")}},{title:"Description",dataIndex:"description",key:"description",render:function(y){return y||"-"}},{title:"Action",dataIndex:"action",key:"action",render:function(y,ne){return(0,s.jsx)(gt,{size:16,cursor:"pointer",onClick:function(){return o(ne.id)}})}}]})})]})},it=(qe=(0,ee.ri)({contrib:[ut.l]}),_e=(0,q.ei)("scql-project-view"),et=function(r,l){return(0,ee.f3)(U)(r,void 0,0)},tt=function(r,l){return(0,ee.f3)(Ve.Z)(r,void 0,1)},nt=Reflect.metadata("design:type",Function),rt=Reflect.metadata("design:paramtypes",[typeof U=="undefined"?Object:U,typeof Ve.Z=="undefined"?Object:Ve.Z]),qe(w=_e(w=et(w=tt(w=nt(w=rt(w=function(a){F()(l,a);var r=be()(l);function l(i,t){var f;return _()(this,l),f=r.call(this),oe()(L()(f),"view",Ct),oe()(L()(f),"service",void 0),oe()(L()(f),"modalService",void 0),f.service=i,f.modalService=t,f}return he()(l,[{key:"onViewMount",value:function(){var i=H()(C()().mark(function f(){return C()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.service.getProjectList();case 1:case"end":return o.stop()}},f,this)}));function t(){return i.apply(this,arguments)}return t}()},{key:"openAddProjectModal",value:function(){this.modalService.openModal(Qe)}},{key:"registerModal",value:function(){return Qe}}]),l}($e.P))||w)||w)||w)||w)||w)||w),jt=Ce.R.create().register(U,it,Je,(0,q.bQ)({slot:ie.fD.main,view:it,autoCreate:!0}),(0,q.bQ)({slot:ie.Mx.right,view:Je,autoCreate:!0})),St=e(20252),xt=e(97341),Pt=function(){return(0,s.jsx)(ye.rF.Application,{asChild:!0,modules:[re.n6L,St.F,xt.O,ie.zd,jt]},"libro-app")},zt=Pt},32368:function(Xe,ue,e){e.d(ue,{C:function(){return te}});var d=e(58757),ye=e(51865),re=e.n(ye),ie=e(61376),Ce=e(55819),q=e(57629),fe=e(70361),_=e(56115),ve=e(97978),ae=d.createContext({}),L=e(17241),ze=e(74309),F=e(61794),Be=e(15146);const be=c=>{const{antCls:m,componentCls:h,iconCls:v,avatarBg:j,avatarColor:Y,containerSize:R,containerSizeLG:E,containerSizeSM:A,textFontSize:z,textFontSizeLG:O,textFontSizeSM:le,borderRadius:T,borderRadiusLG:D,borderRadiusSM:G,lineWidth:V,lineType:Z,calc:J}=c,B=(N,k,b)=>({width:N,height:N,lineHeight:(0,L.bf)(J(N).sub(J(V).mul(2)).equal()),borderRadius:"50%",[`&${h}-square`]:{borderRadius:b},[`${h}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${h}-icon`]:{fontSize:k,[`> ${v}`]:{margin:0}}});return{[h]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,ze.Wf)(c)),{position:"relative",display:"inline-block",overflow:"hidden",color:Y,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:j,border:`${(0,L.bf)(V)} ${Z} transparent`,["&-image"]:{background:"transparent"},[`${m}-image-img`]:{display:"block"}}),B(R,z,T)),{["&-lg"]:Object.assign({},B(E,O,D)),["&-sm"]:Object.assign({},B(A,le,G)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},We=c=>{const{componentCls:m,groupBorderColor:h,groupOverlapping:v,groupSpace:j}=c;return{[`${m}-group`]:{display:"inline-flex",[`${m}`]:{borderColor:h},["> *:not(:first-child)"]:{marginInlineStart:v}},[`${m}-group-popover`]:{[`${m} + ${m}`]:{marginInlineStart:j}}}},oe=c=>{const{controlHeight:m,controlHeightLG:h,controlHeightSM:v,fontSize:j,fontSizeLG:Y,fontSizeXL:R,fontSizeHeading3:E,marginXS:A,marginXXS:z,colorBorderBg:O}=c;return{containerSize:m,containerSizeLG:h,containerSizeSM:v,textFontSize:Math.round((Y+R)/2),textFontSizeLG:E,textFontSizeSM:j,groupSpace:z,groupOverlapping:-A,groupBorderColor:O}};var Ie=(0,F.I$)("Avatar",c=>{const{colorTextLightSolid:m,colorTextPlaceholder:h}=c,v=(0,Be.TS)(c,{avatarBg:h,avatarColor:m});return[be(v),We(v)]},oe),C=e(29107),He=function(c,m){var h={};for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&m.indexOf(v)<0&&(h[v]=c[v]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,v=Object.getOwnPropertySymbols(c);j<v.length;j++)m.indexOf(v[j])<0&&Object.prototype.propertyIsEnumerable.call(c,v[j])&&(h[v[j]]=c[v[j]]);return h};const H=(c,m)=>{const[h,v]=d.useState(1),[j,Y]=d.useState(!1),[R,E]=d.useState(!0),A=d.useRef(null),z=d.useRef(null),O=(0,Ce.sQ)(m,A),{getPrefixCls:le,avatar:T}=d.useContext(fe.E_),D=d.useContext(ae),G=()=>{if(!z.current||!A.current)return;const p=z.current.offsetWidth,u=A.current.offsetWidth;if(p!==0&&u!==0){const{gap:M=4}=c;M*2<u&&v(u-M*2<p?(u-M*2)/p:1)}};d.useEffect(()=>{Y(!0)},[]),d.useEffect(()=>{E(!0),v(1)},[c.src]),d.useEffect(G,[c.gap]);const V=()=>{const{onError:p}=c;(p==null?void 0:p())!==!1&&E(!1)},{prefixCls:Z,shape:J,size:B,src:N,srcSet:k,icon:b,className:K,rootClassName:ce,alt:W,draggable:Oe,children:me,crossOrigin:Ne}=c,de=He(c,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),S=(0,_.Z)(p=>{var u,M;return(M=(u=B!=null?B:D==null?void 0:D.size)!==null&&u!==void 0?u:p)!==null&&M!==void 0?M:"default"}),Me=Object.keys(typeof S=="object"?S||{}:{}).some(p=>["xs","sm","md","lg","xl","xxl"].includes(p)),Se=(0,ve.Z)(Me),Le=d.useMemo(()=>{if(typeof S!="object")return{};const p=q.c4.find(M=>Se[M]),u=S[p];return u?{width:u,height:u,lineHeight:`${u}px`,fontSize:u&&(b||me)?u/2:18}:{}},[Se,S]),P=le("avatar",Z),xe=(0,C.Z)(P),[Ae,Te,pe]=Ie(P,xe),U=re()({[`${P}-lg`]:S==="large",[`${P}-sm`]:S==="small"}),s=d.isValidElement(N),De=J||(D==null?void 0:D.shape)||"circle",Ze=re()(P,U,T==null?void 0:T.className,`${P}-${De}`,{[`${P}-image`]:s||N&&R,[`${P}-icon`]:!!b},pe,xe,K,ce,Te),we=typeof S=="number"?{width:S,height:S,lineHeight:`${S}px`,fontSize:b?S/2:18}:{};let Q;if(typeof N=="string"&&R)Q=d.createElement("img",{src:N,draggable:Oe,srcSet:k,onError:V,alt:W,crossOrigin:Ne});else if(s)Q=N;else if(b)Q=b;else if(j||h!==1){const p=`scale(${h}) translateX(-50%)`,u={msTransform:p,WebkitTransform:p,transform:p},M=typeof S=="number"?{lineHeight:`${S}px`}:{};Q=d.createElement(ie.Z,{onResize:G},d.createElement("span",{className:`${P}-string`,ref:z,style:Object.assign(Object.assign({},M),u)},me))}else Q=d.createElement("span",{className:`${P}-string`,style:{opacity:0},ref:z},me);return delete de.onError,delete de.gap,Ae(d.createElement("span",Object.assign({},de,{style:Object.assign(Object.assign(Object.assign(Object.assign({},we),Le),T==null?void 0:T.style),de.style),className:Ze,ref:O}),Q))};var je=d.forwardRef(H),ee=e(12895),$e=e(36756),ge=e(33737);const X=c=>{const{size:m,shape:h}=d.useContext(ae),v=d.useMemo(()=>({size:c.size||m,shape:c.shape||h}),[c.size,c.shape,m,h]);return d.createElement(ae.Provider,{value:v},c.children)};var Ge=c=>{const{getPrefixCls:m,direction:h}=d.useContext(fe.E_),{prefixCls:v,className:j,rootClassName:Y,style:R,maxCount:E,maxStyle:A,size:z,shape:O,maxPopoverPlacement:le="top",maxPopoverTrigger:T="hover",children:D}=c,G=m("avatar",v),V=`${G}-group`,Z=(0,C.Z)(G),[J,B,N]=Ie(G,Z),k=re()(V,{[`${V}-rtl`]:h==="rtl"},N,Z,j,Y,B),b=(0,ee.Z)(D).map((ce,W)=>(0,ge.Tm)(ce,{key:`avatar-key-${W}`})),K=b.length;if(E&&E<K){const ce=b.slice(0,E),W=b.slice(E,K);return ce.push(d.createElement($e.Z,{key:"avatar-popover-key",content:W,trigger:T,placement:le,overlayClassName:`${V}-popover`},d.createElement(je,{style:A},`+${K-E}`))),J(d.createElement(X,{shape:O,size:z},d.createElement("div",{className:k,style:R},ce)))}return J(d.createElement(X,{shape:O,size:z},d.createElement("div",{className:k,style:R},b)))};const Ee=je;Ee.Group=Ge;var te=Ee}}]);
