"use strict";(self.webpackChunk_secretflow_secretnote=self.webpackChunk_secretflow_secretnote||[]).push([[684],{14659:function(de,j,a){a.r(j),a.d(j,{default:function(){return ae}});var F=a(88205),p=a.n(F),E=a(23534),b=a(64256),I=a(68625),L=a(11326),M=a(37678),r=a(58757),P=a(89428),z=a(82237),H=a(95831),W=a(55844),Z=a(86434),ve=a(83510),V=a(77016),O=a.n(V),K=a(61697),Y=a.n(K),G=a(2657),R=a.n(G),X=function(){function d(){O()(this,d),R()(this,"_terminal",void 0),R()(this,"_cacheDecorations",new Map),R()(this,"_highlightTimeout",0)}return Y()(d,[{key:"activate",value:function(n){this._terminal=n}},{key:"_getLineProperty",value:function(n){for(var t=0,e=n.getCell(t),o=0,u=!0,f=!0;e;)e.isBgDefault()||(u=!1),e.isFgDefault()||(f=!1),o+=e.getWidth(),e=n.getCell(t),t++;return{width:o,isAllBgDefault:u,isAllFgDefault:f}}},{key:"_decoration",value:function(n,t,e){if(this._terminal&&e&&e.decorations){var o=this._terminal,u=this._getLineProperty(n),f=u.width,v=u.isAllBgDefault,g=u.isAllFgDefault;if(!(!v||!g)){var m=o.registerMarker(-o.buffer.active.baseY-o.buffer.active.cursorY+t);if(m){var C={marker:m,x:0,width:f,backgroundColor:e.decorations.matchBackground,foregroundColor:e.decorations.matchForegroundColor,layer:"bottom"},w=o.registerDecoration(C);w&&(w.onDispose(function(){m.dispose()}),this._cacheDecorations.set(t,w))}}}}},{key:"_clearDecoration",value:function(){this._cacheDecorations.forEach(function(n){n.dispose()}),this._cacheDecorations.clear()}},{key:"_updateHighlight",value:function(n){var t=this;if(this._terminal&&Array.isArray(n)){this._clearDecoration();for(var e=this._terminal,o=0,u=e.buffer.active.getLine(o),f,v=function(){var m,C=e.buffer.active.getLine(o+1),w=C?C.isWrapped:!1,A=(m=u)===null||m===void 0?void 0:m.translateToString(!w);if(A){var x;if((x=u)!==null&&x!==void 0&&x.isWrapped&&f)t._decoration(u,o,f);else{var S=n.find(function(y){var c=y.keyword||"";if(y.ignoreSensitive){var D=A.toLowerCase();return D.includes(c.toLowerCase())||D.includes(c)}return A.includes(c)});f=S,t._decoration(u,o,S)}}o++,u=C};u;)v()}}},{key:"highlight",value:function(n){var t=this;if(this._terminal&&Array.isArray(n)){this._cacheDecorations=new Map;var e=this._terminal;e.onWriteParsed(function(){clearTimeout(t._highlightTimeout),t._highlightTimeout=window.setTimeout(function(){t._updateHighlight(n)},0)}),e.onResize(function(){clearTimeout(t._highlightTimeout),t._highlightTimeout=window.setTimeout(function(){t._updateHighlight(n)},0)})}}},{key:"dispose",value:function(){clearTimeout(this._highlightTimeout),this._cacheDecorations.clear()}}]),d}();function $(d,l,n,t){var e=(0,r.useState)(),o=p()(e,2),u=o[0],f=o[1],v=(0,r.useRef)(t);return(0,r.useEffect)(function(){v.current=t}),(0,r.useEffect)(function(){var g=new l;return n&&d&&(d.loadAddon(g),f(g),v.current instanceof Function&&v.current(d,g)),function(){f(void 0),g.dispose()}},[d,l,n]),u}var k=$;function J(d,l){var n=(0,r.useRef)(d),t=(0,r.useRef)(0);return(0,r.useEffect)(function(){n.current=d}),(0,r.useEffect)(function(){return function(){clearTimeout(t.current)}},[]),(0,r.useCallback)(function(e){var o=e.target.value;clearTimeout(t.current),t.current=window.setTimeout(function(){n.current(o)},l)},[l])}var Q=J,U=a(14978),q=a.n(U),_=function(l,n){var t=(0,r.useRef)(l);return(0,r.useEffect)(function(){t.current=l}),(0,r.useCallback)(function(){return q()(t.current,n)()},[n])},ee=_,s=a(35667),N={regex:!1,wholeWord:!1,caseSensitive:!1,incremental:!1,decorations:{matchForegroundColor:"#000000",matchBackground:"#ffff54",matchBorder:"none",matchOverviewRuler:"none",activeMatchBackground:"#ff9540",activeMatchBorder:"none",activeMatchColorOverviewRuler:"none"}},te={cursorBlink:!1,convertEol:!1,scrollback:Number.MAX_SAFE_INTEGER,drawBoldTextInBrightColors:!1,allowProposedApi:!0,allowTransparency:!0,fontSize:13,fontFamily:"Roboto Mono,Andale Mono,Consolas,Courier New,monospace",lineHeight:20/17,fastScrollSensitivity:35,theme:{selectionBackground:"#fff",selectionForeground:"#fff",background:"#24292e",foreground:"#b5bbc6"}},re=[{keyword:"[error]",ignoreSensitive:!0,decorations:{matchForegroundColor:"red",matchBackground:"#24292e"}},{keyword:"[warn]",ignoreSensitive:!0,decorations:{matchForegroundColor:"yellow",matchBackground:"#24292e"}},{keyword:"[debug]",ignoreSensitive:!0,decorations:{matchForegroundColor:"green",matchBackground:"#24292e"}}],ne=function(l){var n=(0,r.useState)(),t=p()(n,2),e=t[0],o=t[1],u=(0,r.useState)(""),f=p()(u,2),v=f[0],g=f[1],m=(0,r.useState)({resultIndex:-1,resultCount:0}),C=p()(m,2),w=C[0],A=C[1],x=(0,r.useRef)(null),S=(0,r.useRef)(!1);(0,r.useEffect)(function(){var i=new P.Terminal(te);return o(i),function(){i.dispose()}},[]),(0,r.useEffect)(function(){return x.current&&e&&(e.open(x.current),S.current=!0),function(){e&&(e.clear(),S.current=!1)}},[e]),k(e,z.CanvasAddon,!!e),k(e,Z.WebLinksAddon,!!e);var y=k(e,H.FitAddon,!!e),c=k(e,W.SearchAddon,!!e,(0,r.useCallback)(function(i,h){var T=h;T&&T.onDidChangeResults&&T.onDidChangeResults(function(fe){A(fe||{resultIndex:-1,resultCount:0})})},[]));k(e,X,!!e,function(i,h){var T=h;T&&T.highlight(re)}),(0,r.useEffect)(function(){if(e){var i=l.code.replaceAll(`
`,`\r
`);e.write(i)}},[e,l.code]);var D=ee(function(){S.current&&y&&y.fit&&y.fit()},3e3);(0,r.useEffect)(function(){var i=new ResizeObserver(D),h=x.current;return h&&i.observe(h),function(){h&&(i.unobserve(h),i.disconnect())}},[y,D]);var ie=Q(function(i){c&&c.findNext(i,N)},800),oe=(0,r.useCallback)(function(){c&&c.findNext("",N)},[c]),se=(0,r.useCallback)(function(i){c&&c.findPrevious(i,N)},[c]),B=(0,r.useCallback)(function(i){c&&c.findNext(i,N)},[c]),le=(0,r.useCallback)(function(){e&&e.scrollToTop()},[e]),ue=(0,r.useCallback)(function(){e&&e.scrollToBottom()},[e]),ce=(0,s.jsxs)("div",{className:"terminal-viewer",children:[(0,s.jsx)("div",{className:"terminal-viewer-header",children:(0,s.jsxs)("div",{className:"terminal-viewer-input-wrapper",children:[(0,s.jsx)("input",{className:"terminal-viewer-input",value:v,type:"text",onKeyDown:function(h){h.key==="Enter"&&B(v)},onChange:function(h){g(h.target.value),ie(h)}}),(0,s.jsxs)("div",{className:"terminal-viewer-input-suffix",children:[v&&(0,s.jsx)("span",{className:"input-suffix-search-result",children:w.resultCount}),(0,s.jsx)("span",{className:"input-suffix-clear",onClick:function(){g(""),oe()},children:(0,s.jsx)(E.Z,{size:16})}),(0,s.jsx)("span",{className:"input-suffix-search-tool",onClick:function(){return se(v)},children:(0,s.jsx)(b.Z,{size:16})}),(0,s.jsx)("span",{className:"input-suffix-search-tool",onClick:function(){return B(v)},children:(0,s.jsx)(I.Z,{size:16})})]})]})}),(0,s.jsx)("div",{className:"terminal-viewer-body",ref:x}),(0,s.jsxs)("div",{className:"terminal-viewer-toolbar",children:[(0,s.jsx)("div",{className:"terminal-viewer-toolbar-button",onClick:le,children:(0,s.jsx)(L.Z,{size:16})}),(0,s.jsx)("div",{className:"terminal-viewer-toolbar-button",onClick:ue,children:(0,s.jsx)(M.Z,{size:16})})]})]});return ce},ae=ne}}]);
