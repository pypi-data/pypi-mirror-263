(function(o,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(o=typeof globalThis<"u"?globalThis:o||self,c(o.trame_tauri={}))})(this,function(o){"use strict";function c(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function u(e,n=!1){const t=c(),i=`_${t}`;return Object.defineProperty(window,i,{value:a=>(n&&Reflect.deleteProperty(window,i),e==null?void 0:e(a)),writable:!1,configurable:!0}),t}async function d(e,n={}){return new Promise((t,i)=>{const a=u(l=>{t(l),Reflect.deleteProperty(window,`_${s}`)},!0),s=u(l=>{i(l),Reflect.deleteProperty(window,`_${a}`)},!0);window.__TAURI_IPC__({cmd:e,callback:a,error:s,...n})})}async function r(e){return d("tauri",e)}async function f(e,n){return r({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:n}})}async function O(e,n,t){await r({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:n,payload:t}})}async function m(e,n,t){return r({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:n,handler:u(t)}}).then(i=>async()=>f(e,i))}async function p(e,n,t){return m(e,n,i=>{t(i),f(e,i.id).catch(()=>{})})}var g;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress"})(g||(g={}));async function _(e,n){return m(e,null,n)}async function y(e,n){return p(e,null,n)}async function S(e,n){return O(e,void 0,n)}const A={name:"TauriEvent",props:{listen:{type:Array,default:()=>[]},once:{type:Array,default:()=>[]}},async mounted(){this.unsubscribes=[];for(let e=0;e<this.listen.length;e++){const n=this.listen[e],t=`tauri://${n.replaceAll("_","-")}`,i=n.replaceAll("-","_");this.unsubscribes.push(await _(t,a=>{this.$emit(i,a.payload)}))}for(let e=0;e<this.once.length;e++){const n=this.once[e],t=`tauri://${n.replaceAll("_","-")}`,i=n.replaceAll("-","_");this.unsubscribes.push(await y(t,a=>{this.$emit(i,a.payload)}))}},beforeUnmount(){for(;this.unsubscribes.length;)this.unsubscribes.pop()()}};async function b(e={}){return typeof e=="object"&&Object.freeze(e),r({__tauriModule:"Dialog",message:{cmd:"openDialog",options:e}})}async function w(e={}){return typeof e=="object"&&Object.freeze(e),r({__tauriModule:"Dialog",message:{cmd:"saveDialog",options:e}})}async function W(e,n){var i,a;const t=typeof n=="string"?{title:n}:n;return r({__tauriModule:"Dialog",message:{cmd:"messageDialog",message:e.toString(),title:(i=t==null?void 0:t.title)==null?void 0:i.toString(),type:t==null?void 0:t.type,buttonLabel:(a=t==null?void 0:t.okLabel)==null?void 0:a.toString()}})}async function h(e,n){var i,a,s;const t=typeof n=="string"?{title:n}:n;return r({__tauriModule:"Dialog",message:{cmd:"askDialog",message:e.toString(),title:(i=t==null?void 0:t.title)==null?void 0:i.toString(),type:t==null?void 0:t.type,buttonLabels:[((a=t==null?void 0:t.okLabel)==null?void 0:a.toString())??"Yes",((s=t==null?void 0:t.cancelLabel)==null?void 0:s.toString())??"No"]}})}async function D(e,n){var i,a,s;const t=typeof n=="string"?{title:n}:n;return r({__tauriModule:"Dialog",message:{cmd:"confirmDialog",message:e.toString(),title:(i=t==null?void 0:t.title)==null?void 0:i.toString(),type:t==null?void 0:t.type,buttonLabels:[((a=t==null?void 0:t.okLabel)==null?void 0:a.toString())??"Ok",((s=t==null?void 0:t.cancelLabel)==null?void 0:s.toString())??"Cancel"]}})}const N={TauriEvents:A,TauriDialog:{name:"TauriDialog",methods:{async open(e){this.$emit("open",await b(e))},async save(e){this.$emit("save",await w(e))},async message(e){this.$emit("message",await W(e))},async confirm(e){this.$emit("confirm",await D(e))},async ask(e){this.$emit("ask",await h(e))}}}};async function L(e){return r({__tauriModule:"Clipboard",message:{cmd:"writeText",data:e}})}async function E(){return r({__tauriModule:"Clipboard",message:{cmd:"readText",data:null}})}const I={readText:E,writeText:L},M={ask:h,confirm:D,open:b,save:w},P={emit:S,listen:_,once:y};async function R(e,n){return r({__tauriModule:"GlobalShortcut",message:{cmd:"register",shortcut:e,handler:u(n)}})}async function C(e,n){return r({__tauriModule:"GlobalShortcut",message:{cmd:"registerAll",shortcuts:e,handler:u(n)}})}async function $(e){return r({__tauriModule:"GlobalShortcut",message:{cmd:"isRegistered",shortcut:e}})}async function U(e){return r({__tauriModule:"GlobalShortcut",message:{cmd:"unregister",shortcut:e}})}async function G(){return r({__tauriModule:"GlobalShortcut",message:{cmd:"unregisterAll"}})}const T={isRegistered:$,register:R,registerAll:C,unregister:U,unregisterAll:G};async function j(){return window.Notification.permission!=="default"?Promise.resolve(window.Notification.permission==="granted"):r({__tauriModule:"Notification",message:{cmd:"isNotificationPermissionGranted"}})}async function k(){return window.Notification.requestPermission()}function x(e){typeof e=="string"?new window.Notification(e):new window.Notification(e.title,e)}const F={tauri:{clipboard:I,dialog:M,event:P,globalShortcut:T,notification:{isPermissionGranted:j,requestPermission:k,sendNotification:x},tauri:{invoke:d,transformCallback:u}}};function H(e){Object.keys(N).forEach(n=>{e.component(n,N[n])}),Object.assign(window.trame.utils,F)}o.install=H,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
